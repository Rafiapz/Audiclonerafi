/*! For license information please see bundle.configurator.js.LICENSE.txt */
/* nemo v168.0.0 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("core-application"),require("core-utils"),require("microkernel"),require("core-global"),require("core-vendor")):"function"==typeof define&&define.amd?define("configurator",["core-application","core-utils","microkernel","core-global","core-vendor"],e):"object"==typeof exports?exports.configurator=e(require("core-application"),require("core-utils"),require("microkernel"),require("core-global"),require("core-vendor")):t.configurator=e(t["core-application"],t["core-utils"],t.microkernel,t["core-global"],t["core-vendor"])}(window,(function(__WEBPACK_EXTERNAL_MODULE__0__,__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__4__,__WEBPACK_EXTERNAL_MODULE__5__,__WEBPACK_EXTERNAL_MODULE__8__){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=76)}([function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__0__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(5),r=n(3);const o={},a={__:o};o.stored={},a.getSpecialFamilies=function(){var t,e=SETUPS.get("nemo.families"),n=a.getFamilies();if(!e&&n)for(t in e={},n)n[t].showstandard&&"true"===n[t].showstandard&&(e[t]=n[t]);return e||null},a.getFamilies=function(){return r.a.getFamilies()},a.sendRenderServiceRequest=function(t,e,n,i){return r.a.sendRenderServiceRequest(t,e,n,i)},a.search=function(t,e){var n=a.searchItems(t,e);return n.length>0?o.groupByFamily(n):[]},o.groupByFamily=function(t){var e,n,i={search:[]},r=a.getFamilies(),o={},s=a.getCarlineName(),l=t||{};return jQuery.each(l,(function(t,a){if(void 0===a.family)return console.log("Found item without family: ",a),!0;if(n=r[a.family]){if(!n.name)return console.log("Found family without family.name: ",n),!0;n.group=n.group||n.name||n.id,o[n.group]||(o[n.group]=1,e={key:n.group,value:{carlineName:s,family:n,items:[]}},i.search.push(e)),e.value.items.push(a)}})),i.search},o.groupByExtColorKey=function(t){var e,n,i=a.getFamilies(),r=["extcolors.uni","extcolors.metallic","extcolors.pearl","extcolors.exclusive","extcolors.o","extcolors.m","extcolors.p"],o=[],s=[],l=a.getCarlineName(),c=t||{};for(jQuery.each(c,(function(t,e){if(void 0===e.family)return console.log("Found item without family: ",e),!0;if(n=i[e.family]){if(!n.name)return console.log("Found family without family.name: ",n),!0;n.group=n.group||n.id||n.name,n.group=n.group.trim(),-1===r.indexOf(n.group)?console.log("Found unknown family group: ",n.group):(o[n.group]||(o[n.group]={key:n.group,value:{carlineName:l,family:n,items:[]}}),o[n.group].value.items.push(e))}})),e=0;e<r.length;e++)o[r[e]]&&s.push(o[r[e]]);return s},a.getRenderUrl=function(){return SETUPS.get("nemo.url.mediaservice")||null},a.getSelectedItems=function(){var t,e=a.getItems()||{},n=a.getSpecialFamilies(),i={},r=0;for(t in e)e[t].status&&"1"===e[t].status.charAt(3)&&("0"===e[t].status.charAt(4)&&(i[t]=e[t],r++),"1"===e[t].status.charAt(4)&&e[t].family&&n[e[t].family]&&(i[t]=e[t],r++));return r>0?i:null},a.getSelectedTrimline=function(){var t,e=a.getSelectedItems(),n=[];if(e)for(t=(n=Object.keys(e)).length;t--;)if(n[t].indexOf("trimline_")>-1)return n[t];return null},a.getSelectedItemsArray=function(){var t={};return jQuery.each(a.getItems(),(function(e,n){n.selectionMethod&&(t[n.selectionMethod]=t[n.selectionMethod]||[],t[n.selectionMethod].push(n))})),t},a.getCarline=function(){return r.a.getCarline()},a.getCarlineName=function(){var t=a.getConfiguration();return t&&t.carlineName?t.carlineName:null},a.getEngine=function(){var t=a.getConfiguration();return t&&t.model?t.model:null},a.getTechdata=function(){var t=a.getConfiguration();return t&&t.techdata?t.techdata:null},a.getExtColor=function(){var t,e,n=a.getSelectedItemsIDsArray();for(t=0,e=n.length;t<e;t++)if(4===n[t].length)return n[t];return null},a.getModelYear=function(){var t=a.getConfiguration();return t&&t.modelyear?t.modelyear:null},a.getPriceRateMode=function(){var t=r.a.getHeader();return t&&t.mode?t.mode:"price"},a.getVisitorId=function(){var t=r.a.getHeader();return t&&t["visitor-id"]?t["visitor-id"]:null},a.getHiddenItemIDsFromVersion=function(){return r.a.getHiddenItemIDsFromVersion()},a.getPrString=function(){return r.a.getPrString()},a.getConfigurationStartType=function(){return r.a.getConfigurationStartType()},a.isContinuedConfiguration=function(){return r.a.isContinuedConfiguration()},a.getContentVersion=function(){var t=r.a.getHeader();return t&&t.version?t.version:null},a.getMarketVersion=function(){var t=r.a.getHeader();return t&&t.marketVersion?t.marketVersion:null},a.isLoggedIn=function(){return!!(r.a.getHeader()&&!0===r.a.getHeader()["logged-in"])},a.setLogin=function(t,e){return r.a.setLogin(t,e)},a.getSearchStopWords=function(){return r.a.getSearchStopWords()},a.getConflicts=function(){return r.a.getConflicts()},a.getConflictTriggers=function(){var t=null,e=a.getConflicts();return e&&e.triggers&&e.triggers.length&&(t=e.triggers),t},a.getTransfers=function(){var t=r.a.getTransfers();return t&&t.deleted&&t.deleted.length?t:null},a.getAudicode=function(){return r.a.getAudicode()},a.getConfiguration=function(){return r.a.getConfiguration()},a.getVersion=function(){return r.a.getVersion()},a.getMemcacheVersion=function(){return r.a.getMemcacheVersion()},a.getDpuUrl=function(){return r.a.getDpuUrl()},a.getContext=function(){return r.a.getContext()},a.getSubsessionID=function(){return r.a.getSubsessionID()},a.setSubsessionID=function(t){return r.a.setSubsessionID(t)},a.getMotorcode=function(){var t=a.getConfiguration();return t&&t.model?t.model:null},a.getConfigurationAssets=function(){var t=a.getConfiguration();return t&&t.assets?t.assets:null},a.getCarImages=function(){return r.a.getImages()},a.getExtColors=function(){var t=o.getItemsByFamily("extcolors");return t?o.groupByExtColorKey(t):null},a.getDocrootUrl=function(){var t=window.location.protocol+"//"+window.location.host+(SETUPS.get("nemo.url.static")||"");return"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t},a.isConfigurable=function(){return!!SETUPS.get("nemo.url.carinfo")},a.isInPreviewMode=function(){return!!SETUPS.get("nemo.url.preview")},a.getPageTree=function(){return SETUPS.get("pagetree")},a.getSearchResultsPageUrl=function(){return SETUPS.get("searchResultsLink")||null},a.searchNavigation=function(t,e){var n=[],i=[],r=t.toLowerCase();switch(e){case"model":i=o.getModelNavigationStorage();break;case"siteMap":i=o.getSiteNavigationStorage();break;case"footer":i=o.getFooterNavigationStorage();break;default:i=[]}return jQuery.each(i,(function(t,e){if(!e.search)return!0;-1!==e.search.indexOf(r)&&e.url&&n.push(e)})),n},a.getItems=function(){return r.a.getItems()||null},a.isConfigurationStarted=function(){return r.a.isConfigurationStarted()},a.hasCustomConfiguration=function(){return r.a.hasCustomConfiguration()},a.isOptionSelectedInConfiguration=function(t){return a.getSelectedItemsIDsArray().indexOf(t)>-1},a.getSelectedItemsIDsArray=function(){var t=a.getSelectedItems()||{};return Object.keys(t)},a.getPrices=function(){var t=a.getConfiguration();return t&&t.prices?t.prices:null},a.getItem=function(t){var e=a.getItems();return e&&e[t]?e[t]:null},a.getItemsByStatus=function(t){var e=a.getItems(),n=null,i=t;return i&&e&&("function"!=typeof i.compile&&(i=new RegExp(i)),jQuery.each(e,(function(t,e){e.status&&i.test(e.status)&&((n=n||{})[t]=e)}))),n},o.getItemsByFamily=function(t){var e=a.getItems(),n=null,i=t;return i&&e&&("function"!=typeof i.compile&&(i=new RegExp(i)),jQuery.each(e,(function(t,e){e.family&&i.test(e.family)&&((n=n||{})[t]=e)}))),n},a.getItemsByFamily=o.getItemsByFamily,a.getConfigurationCarPriceRate=function(){var t=a.getConfiguration();return t&&t.rate?t.rate:null},a.getNwbLink=function(){var t=a.getConfiguration();return t&&t.nwbLink?t.nwbLink:null},a.getVtpRequestUrl=function(){return SETUPS.get("nemo.vtp.request.url")},a.getVtpEntryUrl=function(){return SETUPS.get("nemo.vtp.entry.url")},a.getDOMStatusCode=function(t){var e=t?t.get(0).className:"";return-1===e.indexOf("nm-j-configurator-status_")?null:e.split("nm-j-configurator-status_")[1].split(" ")[0]},a.supportsLocalStorage=function(){if(null!==window.navigator.userAgent.toLowerCase().match(/adobeair/i))return!0;try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return t.code===window.DOMException.QUOTA_EXCEEDED_ERR&&0===localStorage.length}},a.getConfigurationFamilies=function(){var t=a.getConfiguration();return t&&t.families?t.families:null},a.getRecommendations=function(){var t=a.getConfiguration();return t&&t.recommendations?t.recommendations:[]},a.getDynamicRecommendations=function(){var t=a.getConfiguration();return t&&t.empfehlungenPoC&&t.empfehlungenPoC.recommendations?t.empfehlungenPoC.recommendations:[]},a.resolvePackagesInPrString=function(t){let e=[];if(t){const n=t.split("|"),i=this.getItems();for(let t=0;t<n.length;t++){const r=new RegExp("([\\d\\w]{2,})_in_"+n[t],"gi"),o=Object.getOwnPropertyNames(i).reduce((t,e)=>{const n=r.exec(e);return n&&(t.find(t=>t===n[1])||t.push(n[1])),t},[n[t]]);e=[...e,...o]}return e.join("|")}},a.replacePackagesInPrString=function(t){let e=t;if(t){const t=/([\d\w]{2,})_in_[\d\w]{2,}(|$)?/gi;let n;for(;null!==(n=t.exec(e));)n&&n.length>1&&(e=e.replace(n[0],n[1]))}return e},o.getSiteNavigationStorage=function(){var t=SETUPS.get("siteNavigation");return t||[]},o.getModelNavigationStorage=function(){var t=SETUPS.get("modelNavigation");return t||[]},a.searchItems=function(t,e){var n,r=!!window.mss||i.state.getStateOfModeFor("debug")||!1,o=a.getItems()||{},s=[],l=a.getFamilies(),c=t.toLowerCase();return c=c.replace(/^\w\s/," ").replace(/\s\w$/," ").replace(/\s\w\s/," ").trim(),jQuery.each(o,(function(t,i){var o;if(!i.search||"string"!=typeof i.search)return!0;if(n=i.search,r&&i.mbvId&&(n+=" | "+i.mbvId.toLowerCase()),-1!==n.indexOf(c)){if(e&&("00000"===i.status||"10000"===i.status))return!0;if(void 0===i.family)return!0;if(!(o=l[i.family])||!o.name)return!0;s.push(i)}})),s},a.isInitialized=function(){return r.a.isInitialized()},a.getCarlineUrl=function(t){var e=SETUPS.get("nemo.carlineID2Url")||{},n=e[t];return!n&&(e=SETUPS.get("mssc.carlinemapping")||{})?(n=e[t])?n.posterViewUrl:void 0:n?n.baseurl:void 0},a.getCurrentCarlineUrl=function(){var t=a.getCarline();return a.getCarlineUrl(t)},o.d4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},o.guid=function(){return o.d4()+o.d4()+o.d4()+o.d4()+o.d4()},a.getConfigurationId=function(){return o.configurationID=o.configurationID||o.guid(),o.configurationID},a.getModelsInfo=function(t){return r.a.getModelsInfo(t)},a.getModelsInfoFootnotes=function(t){return r.a.getModelsInfoFootnotes(t)},a.getModelsInfoSectionFootnotes=function(t){return r.a.getModelsInfoSectionFootnotes(t)},a.getCurrentModelInfo=function(){var t=a.getEngine();return t?a.getModelsInfo(t):null},a.getModelDisclaimer=function(t){return r.a.getModelDisclaimer(t)},a.getAveString=function(){var t=a.getConfiguration();return t&&t.ave?t.ave:null},a.getSCSmatchingAttributes=function(){var t=a.getSCSAttributes();return t&&t.attrs?t.attrs:[]},a.getSCSAttributes=function(){var t=a.getConfiguration();return t&&t["stock-car-attrs"]?t["stock-car-attrs"]:null},a.getErrorMessage=function(t){const e=o.getErrorMessageFromI18N(t),n=o.getErrorMessageFromDpuError(t),i=e||n;return i||o.getErrorMessageFromI18N("DEFAULT")},o.getErrorMessageFromI18N=function(t){const e="string"==typeof t?t:t.id;return window.i18n["error.message."+e]},o.getErrorMessageFromDpuError=function(t){return t.message?t.message:null},a.getAltImagePath=function(t,e){var n,i;return!!((n=a.getCarline())&&t&&e)&&(i=o.setFallbackGroup(n),o.setImagePath(i,t,e))},o.setFallbackGroup=function(t){var e;return e=t.substring(0,1),0!==t.indexOf("rs")&&0!==t.indexOf("s")||(e="a"),0===t.indexOf("tt")&&(e="r"),e},o.setImagePath=function(t,e,n){var i,r=".jpg";return i="selection-compare"!==e?t+"-"+n.split(".")[0]+"-"+e+r:t+"-"+e+(r=".jpg"),i="undefined"!=typeof mss?a.getDocrootUrl()+"/cms4i-nemo-mss/fallback-renderings/"+i:a.getDocrootUrl()+"/cms4i-nemo/fallback-renderings/"+i},a.getMinPriceForItemIds=function(t){const e=t.map(t=>a.getItem(t)).reduce((t,e)=>!t||void 0===e.priceValue&&void 0!==t.priceValue||e.priceValue<t.priceValue?e:t,!1);return e&&e.priceValue?e.price:""},o.getFooterNavigationStorage=function(){var t=SETUPS.get("footerNavigation");return t||[]},a.openEngineDisclaimerLayer=function(){r.a.sendEngineDisclaimerLayerEvent()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n(0),r=n(15),o=n(4),a=n(1),s=n(68),l=n(31);const c=t=>{const e=new Error;if(e.status=t.statuscode,t.audicode&&t.audicode.message&&(e.name="custom-dpu-error"),t.header&&t.header.error){if(e.id=t.header.error.id,"HIDDEN_CARLINE"===e.id)return void(()=>{const t={layerType:"MessageLayerElement",clickOnShaderClosesModal:!1,isLayerClosable:!1,dataset:{headline:window.i18n["error.no_wltp_data.modal_layer.headline"],messageType:"string",message:window.i18n["error.no_wltp_data.modal_layer.message"],actionButtonLinkText:window.i18n["error.no_wltp_data.modal_layer.link.text"],actionButtonLinkUrl:window.i18n["error.no_wltp_data.modal_layer.link.url"]}},e=new CustomEvent("modalLayer:open",{detail:t});document.dispatchEvent(e)})();t.header.error.message?e.message=t.header.error.message:t.header.statusmessage&&(e.message=t.header.statusmessage)}throw e},u={},d={__:u};let m=!1;u.oDefaults={actionsLookup:{itemAdd:"set",removeItem:"remove",itemRemove:"remove"}},u.configurationStartType="default",u.configurationContinued=!1,u.dataInitialized=!1,u.configurationEndpoint="configuration",u.dpuExtra="",u.storage={configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null,modelsInfo:null,images:null},u.sendResetRequest=function(){u.checkDefaultSetup();let t={context:d.getContext(),ids:u.getDefaultPrString()};t=u.addDpuExtraData(t),t=u.addSubsessionData(t);const e=new URLSearchParams(t),n=d.getDpuUrl()+u.configurationEndpoint+"?"+e.toString();return fetch(n,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},d.dispatchPriceMode=function(t){const e=new CustomEvent("setPriceMode",{detail:"rate"===t?"RATE":"PRICE"});document.dispatchEvent(e)},d.changeRatePriceMode=function(t){return u.checkDefaultSetup(),new Promise((function(e,n){const i=d.getHeader();if((i&&i.mode?i.mode:"price")===t)return n(new TypeError("Rate/Price mode did not change")),null;const r="rate"===t?"rate":"price";let o={context:d.getContext(),ids:d.getPrString(),mode:r};o=u.addDpuExtraData(o),u.isStatelessMode||(o=u.addSubsessionData(o));const a=d.getDpuUrl()+u.configurationEndpoint+"?"+new URLSearchParams(o).toString();return fetch(a,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus).then(t=>{u.setConfigurationRaw(t).then(()=>{d.dispatchPriceMode(r),e(!0)})},t=>{n(new TypeError("Error switching priceRateMode: "+t.message))})}))},u.sendChangeRequest=function(t){const e=d.getDpuUrl()+u.configurationEndpoint+"?";let n=u.generateRequestData(t);n=u.addDpuExtraData(n),n=u.addSubsessionData(n);const i=e+new URLSearchParams(n).toString();return fetch(i,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus).catch(t=>{throw t.id||(t.id="NETWORK_ERROR"),t})},u.setStatelessParams=function(t){var e=d.getConflicts();return u.isStatelessMode&&e&&(e.triggerIds&&(t.trigger=e.triggerIds),e.choiceIds&&(t.choices=e.choiceIds)),t},u.generateRequestData=function(t){var e=d.getSubsessionID(),n=u.oDefaults.actionsLookup[t.action]||"missing_action",i=t.id,r={context:d.getContext(),ids:d.getPrString()};return t.count&&(i+="*"+t.count),r[n]=i,r=u.setStatelessParams(r),e&&!u.isStatelessMode&&(r.subsession=e),u.isDebugMode()&&(r.dpu_extra="messages"),r},u.isDebugMode=function(){var t=document.querySelector("html");return new RegExp("(^| )nm-state-is-debug( |$)","gi").test(t.className)},d.getVersion=function(){var t=d.getHeader();return t&&t.version?t.version:null},d.getStaticVersion=function(){var t=SETUPS.get("nemo.staticversion");return t||null},d.isInitialized=function(){return u.dataInitialized},d.getMemcacheVersion=function(){var t,e,n="",i=d.getDpuHeader();return i&&(i.version&&(n=i.version),i.taggedVersion?n=i.taggedVersion:i.marketVersion&&(n=i.marketVersion),!!i.taggedVersion&&!!i.marketVersion&&i.manualRevision&&parseInt(i.manualRevision,10)>0&&(n+="."+i.manualRevision)),t=d.getStaticVersion(),(e=SETUPS.get("nemo.build.time"))&&t&&e!==t&&(n+="."+t),n&&0===n.toString().indexOf(".")&&(n=n.substring(1)),n},d.getContext=function(){var t=d.getHeader();return t&&t.context?t.context:null},d.getSubsessionID=function(){var t=d.getHeader();return t&&t.subsession?t.subsession:null},d.setSubsessionID=function(t){u.storage.header.subsession=t,u.updateConfigDataForConsumers()},d.getPrString=function(){var t=d.getConfiguration();return t&&t.prstring?t.prstring:null},u.getDefaultPrString=function(){return u.storage.defaultPrString||null},u.setDefaultPrString=function(t){u.storage.defaultPrString=t||null,u.updateConfigDataForConsumers()},d.handleConfigurationResponse=function(t){return u.setConfigurationRaw(t)},d.adoptConfiguration=function(t){return u.setConfigurationRaw(t)},u.setPrice=function(t){t&&t.configuration&&t.configuration.prices&&t.configuration.prices.rotr&&(u.storage.configuration.rotrprice=t.configuration.prices.rotr)},u.setConfigurationRaw=async function(t){let e,n=!0,i=d.getPrString();if(u.setHeader(t),u.setAudicode(t),u.setConfiguration(t),u.setPrice(t),u.setItems(t),u.setFamilies(t),u.storage.searchstopwords=t.searchstopwords||u.storage.searchstopwords||null,u.setConflictsAndTransfers(t),u.updateConfigDataForConsumers(),!t.configuration)return!1;d.sendEngineDisclaimerLayerEvent(),u.getDefaultPrString()||(e=SETUPS.get("nemo.default.prstring")||t.configuration.prstring,u.setDefaultPrString(e)),i&&i===d.getPrString()&&(n=!1);try{const t=await Object(l.a)(u.storage.configuration);u.setImages(t)}catch(t){console.error(t)}return n},u.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY="engine-disclaimer-layer-shown",u.engineDisclaimerLayerShownNoSessionStorage={},u.getEngineDisclaimerLayerShown=function(){try{const t=window.sessionStorage.getItem(u.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY);return!!JSON.parse(t)[u.storage.configuration.model]}catch(t){return!!u.engineDisclaimerLayerShownNoSessionStorage[u.storage.configuration.model]}},u.setEngineDisclaimerLayerShown=function(){try{const t=window.sessionStorage.getItem(u.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY);let e;try{e=JSON.parse(t)||{}}catch(t){e={}}e[u.storage.configuration.model]=!0,window.sessionStorage.setItem(u.ENGINE_DISCLAIMER_LAYER_SHOWN_KEY,JSON.stringify(e))}catch(t){u.engineDisclaimerLayerShownNoSessionStorage[u.storage.configuration.model]=!0}},d.sendEngineDisclaimerLayerEvent=async function(){const t=document.querySelector(".nm-content"),e=t?t.getAttribute("data-template"):"";if(u.getEngineDisclaimerLayerShown()||"home"===e)return;await a.polling.wait(d.isInitialized,5e3);const n=d.getConfiguration(),i=n&&n.model?d.getModelDisclaimer(n.model):null;if(i&&i.headline&&i.text){const t={layerType:"EngineDisclaimerLayerElement",options:{onEscClick:!1,onShaderClick:!1,centerVertically:!0},dataset:{headline:i.headline,message:i.text}},e=new CustomEvent("modalLayer:open",{detail:t});document.dispatchEvent(e),u.setEngineDisclaimerLayerShown()}},u.setFamilies=function(t){t&&t.families&&(u.storage.families=jQuery.extend(!0,u.storage.families,t.families),u.updateConfigDataForConsumers())},d.getFamilies=function(){return u.storage.families||null},u.setConflictsAndTransfers=function(t){u.storage.conflicts=t.conflicts||null,u.storage.transfers=t.transfers||null},u.setAudicode=function(t){u.storage.audicode=!(!t.audicode||!t.audicode.id)&&t.audicode.id},u.setConfiguration=function(t){u.storage.configuration=jQuery.extend(!1,u.storage.configuration,t.configuration)},u.setImages=function(t){u.storage.images=jQuery.extend(!1,u.storage.images,t)},u.setHeader=function(t){var e;t&&t.header&&(e=u.storage&&u.storage.header&&u.storage.header.version?{version:u.storage.header.version}:{},u.storage.header=jQuery.extend(!0,u.storage.header,t.header,e))},u.setItems=function(t){var e,n;if("full"===t.itemsUpdateMode&&t.items)for(e in u.storage.items)u.storage.items.hasOwnProperty(e)&&u.storage.items[e].status&&(u.storage.items[e].status="00000");else for(n in console.log("DPU_MODEL.setItems::incrmental updateâ€¦"),t.items)t.items[n].packageDescription||(t.items[n].packageDescription="");for(n in t.items)t.items[n].subname?t.items[n].subname="("+t.items[n].subname+")":t.items[n].subname="";for(e in u.storage.items=jQuery.extend(!0,u.storage.items,t.items),u.storage.items)u.storage.items.hasOwnProperty(e)&&("11001"!==u.storage.items[e].status&&"10011"!==u.storage.items[e].status||(u.storage.items[e].price=window.i18n&&window.i18n.standard||"***Serie***"))},u.sendVersionRequest=function(){const t=d.getDpuUrl()+"version?",e=d.getCarline();if(!e)return Promise.reject(new TypeError("no carline defined for version request"));let n={context:d.getContext(),carline:e};n=u.addDpuExtraData(n);const i=new URLSearchParams(n);return fetch(t+i,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},u.handleVersionResponse=function(t){var e,n=t.items,r=[];if(n)for(e in n)n.hasOwnProperty(e)&&!0===n[e].hidden&&r.push(e);u.storage.header=t.header,u.storage.headerItems=r,u.updateConfigDataForConsumers(),u.eventBus.emit(i.appEvents.VERSION_LOAD_COMPLETE)},u.sendCarinfoRequest=function(){const t=u.getCarinfoUrl();return fetch(t,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},u.handleCarinfoResponse=function(t){return console.log("handleCarinfoResponse",t,d.isConfigurationStarted()),d.isConfigurationStarted()?(u.setFamilies(t),u.updateItemsFromCarinfo(t.items),u.eventBus.emit(i.appEvents.CARINFO_LOAD_COMPLETE),Promise.resolve(!1)):d.handleConfigurationResponse(t)},u.sendModelsinfoRequest=function(){const t=u.getModelsinfoUrl();return fetch(t,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},u.handleModelsinfoResponse=function(t){console.log("handleModelsinfoResponse",t,d.isConfigurationStarted()),u.storage.modelsInfo=t.models||null,u.storage.modelsInfoFootnotes=t.footnotes||null,u.storage.modelsInfoSectionFootnotes=t.sectionFootnotes||null,u.storage.modelsInfoDisclaimers=t.disclaimers||null,u.updateConfigDataForConsumers(),u.eventBus.emit(i.appEvents.MODELSINFO_LOAD_COMPLETE)},d.getModelsInfo=function(t){var e;return t?((e=u.storage.modelsInfo)?e[t]:null)||null:u.storage.modelsInfo||null},d.getModelsInfoFootnotes=t=>t?u.storage.modelsInfoFootnotes&&u.storage.modelsInfoFootnotes[t]?u.storage.modelsInfoFootnotes[t]:null:u.storage.modelsInfoFootnotes||null,d.getModelsInfoSectionFootnotes=t=>t?u.storage.modelsInfoSectionFootnotes&&u.storage.modelsInfoSectionFootnotes[t]?u.storage.modelsInfoSectionFootnotes[t]:null:u.storage.modelsInfoSectionFootnotes||null,d.getModelDisclaimer=t=>{if(t){const e=u.storage.modelsInfoDisclaimers?u.storage.modelsInfoDisclaimers[t]:null;if(e&&Array.isArray(e)&&e.length>0)return e[0]}return null},u.updateItemsFromCarinfo=function(t){var e=jQuery.extend(!0,{},d.getItems());if(!t)return console.log("Carinfo Items missing!"),!1;u.storage.items=t,u.storage.items=jQuery.extend(!0,u.storage.items,e),u.updateConfigDataForConsumers()},u.getCarinfoUrl=function(){var t=SETUPS.get("nemo.url.carinfo");return t?t=t.split(".json").join("."+d.getMemcacheVersion()+".json"):null},u.getModelsinfoUrl=function(){var t=SETUPS.get("nemo.url.modelsinfo");return t?t=t.split(".json").join("."+d.getMemcacheVersion()+".json"):null},u.setLoginState=function(t){var e=d.getHeader();e&&(e["logged-in"]=t)},d.sendCarstoreRequest=function(t="",e={}){u.checkDefaultSetup();if(-1===["list","delete","load"].indexOf(t))return Promise.reject(new TypeError("sendCarestoreRequest: invalid actionStr"));e.slot||(e.slot=null);const n=d.getDpuUrl()+"carstore?",i={action:t,context:d.getContext(),subsession:d.getSubsessionID()};let r=Object.assign({},i,e);r=u.addDpuExtraData(r);const o=n+new URLSearchParams(r).toString();return fetch(o,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},u.getFilteredPrNumbersFromCurrentConfig=function(t){var e,n,i,r,o,a=d.getPrString().split("|"),s=[];for(e=0,i=a.length,r=t.length;e<i;e++){for(o=!0,n=0;n<r;n++)a[e].indexOf(t[n])>-1&&(o=!1);!0===o&&s.push(a[e])}return s},d.sendRenderServiceRequest=function(t,e,n,i){u.checkDefaultSetup();const r=d.getDpuUrl()+"stateless-render-service?",o=u.getFilteredPrNumbersFromCurrentConfig(t);let a={context:d.getContext(),ids:o.join("|"),"render-prnrs":e,"render-views":n,"render-sizes":i};a=u.addDpuExtraData(a);const s=r+new URLSearchParams(a).toString();return fetch(s,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},d.sendCarstoreHistoryRequest=function(t){u.checkDefaultSetup();const e=d.getDpuUrl()+"history?";let n=t;t&&""!==n&&void 0!==n||(n={}),n.slot&&""!==n.slot&&void 0!==n.slot||(n.slot=null);let i={context:d.getContext(),subsession:d.getSubsessionID()};i=Object.assign(i,n),i=u.addDpuExtraData(i);const r=e+new URLSearchParams(i).toString();return fetch(r,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},d.setLogin=function(t,e){return new Promise((function(n,i){"boolean"==typeof t&&e?(d.setSubsessionID(e),u.setLoginState(t),n(t)):(u.setLoginState(!1),i(new TypeError("login failure")))}))},d.requestConfigurationChange=function(t){return new Promise((function(e,n){u.sendChangeRequest(t).then((function(t){e(d.handleConfigurationResponse(t))}),(function(t){n(t)})).catch(t=>{throw new Error(t)})}))},d.requestConfigurationReset=function(){return new Promise((function(t,e){u.sendResetRequest().then((function(e){return t(d.handleConfigurationResponse(e))}),(function(t){e(t)}))}))},d.setItemSelectionMethod=function(t,e){var n=d.getItems();n&&n[t]&&(n[t].selectionMethod=e||null)},d.requestTransferOrConflictResolve=function(t){return new Promise((function(e,n){const i=u.addDpuExtraParam(t);return fetch(i,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus).then(t=>e(d.handleConfigurationResponse(t)),t=>{n(t)})}))},d.loadConfigurationByAudiCode=function(t){u.checkDefaultSetup();const e=d.getDpuUrl()+"audicode?";let n=t;void 0!==n&&(n=n.toUpperCase());let i={context:d.getContext(),audicode:n};i=u.addDpuExtraData(i),i=u.addSubsessionData(i);const r=e+new URLSearchParams(i).toString();return fetch(r,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},d.loadConfigurationByAudiCodeStateless=t=>{if(!t)return;const e=d.getDpuUrl()+"stateless-audicode?",n=u.addDpuExtraData({context:d.getContext(),audicode:t.toUpperCase()}),i=e+new URLSearchParams(n).toString();return fetch(i,{credentials:"omit"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},d.generateAudiCode=function(t){u.checkDefaultSetup();const e=d.getDpuUrl()+"audicode?";let n=t;n&&""!==n&&void 0!==n||(n={});let i={context:d.getContext(),ids:d.getPrString(),subsession:d.getSubsessionID()};i=Object.assign(i,n),i=u.addDpuExtraData(i);const r=e+new URLSearchParams(i).toString();return fetch(r,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus)},d.loadConfigurationByPrString=function(t,e){u.checkDefaultSetup();const n=d.getDpuUrl()+u.configurationEndpoint+"?";let i={context:d.getContext(),ids:t};e&&!u.isStatelessMode&&(i.subsession=e),i=u.addDpuExtraData(i);const r=n+new URLSearchParams(i).toString();return fetch(r,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus).catch(e=>{if("PRSTRING_MODEL_NOT_FOUND"===e.id){const n=new CustomEvent("TNT_ERROR",{detail:{errorCode:e.id,prString:t}});document.dispatchEvent(n)}throw e})},d.getHeader=function(){return u.storage.header||null},d.getHiddenItemIDsFromVersion=function(){return u.storage.headerItems||null},d.getSearchStopWords=function(){return u.storage.searchstopwords||null},d.transferCompleted=function(){u.storage.transfers=null,u.updateConfigDataForConsumers()},d.fireDataInitializationChain=function(){return u.dataInitialized=!1,u.checkDefaultSetup(),u.sendVersionRequest().then(u.handleVersionResponse).then(u.getSignedLink).then(u.sendCarinfoRequest).then(u.handleCarinfoResponse).then(u.sendModelsinfoRequest).then(u.handleModelsinfoResponse).then((function(){u.dataInitialized=!0}))},d.getConflicts=function(){return u.storage.conflicts||null},d.getDpuHeader=function(){return u.storage.header||null},d.getTransfers=function(){return u.storage.transfers||null},d.getRecommendations=function(){return u.storage.configuration.recommendations||[]},d.getAudicode=function(){return u.storage.audicode||!1},d.getConfiguration=function(){return u.storage.configuration||null},d.getRawConfigurationData=function(){return u.storage||null},d.getItems=function(){return u.storage.items||null},d.getImages=function(){return u.storage.images||null},d.getCarline=function(){var t=d.getConfiguration();return t&&t.carline?t.carline:SETUPS.get("nemo.default.carline")||null},d.getDpuUrl=function(){return SETUPS.get("nemo.url.dpu")||null},d.isConfigurationStarted=function(){return u.configurationStartType&&"default"!==u.configurationStartType},d.getFamilies=function(){return u.storage.families||null},d.hasCustomConfiguration=function(){return d.isConfigurationStarted()&&u.getDefaultPrString()!==d.getPrString()},d.isContinuedConfiguration=function(){return u.configurationContinued},u.getSignedLink=function(){const t=SETUPS.get("nemo.url.preview");return t?fetch(t,{credentials:"include"}).then(t=>{if(t.ok)return t.json();c({statuscode:t.status})}).then(u.checkDPUresponseStatus).then(t=>u.setConfigurationRaw(t),t=>console.warn("loading signedPreviewUrl failed: "+t.message)):Promise.resolve("no signedPreviewUrl available")},d.switchCarline=function(t,e,n){let i,r;return u.checkDefaultSetup(),e&&t?(SETUPS.set("nemo.default.carline",t),SETUPS.set("nemo.url.carinfo",e),SETUPS.set("nemo.url.modelsinfo",n),i=d.getContext(),r={configuration:{carline:t},header:{context:i}},u.clearConfigurationData(r),d.fireDataInitializationChain()):Promise.reject("switchCarline: missing params for initialization!")},u.clearConfigurationData=function(t){var e;if(u.configurationContinued=!1,u.configurationStartType="default",u.clearStorage(),t&&t)for(e in t)t[e]&&(u.storage[e]=t[e]);u.updateConfigDataForConsumers()},u.clearStorage=function(){u.storage={configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null}},d.setConfigurationStartType=function(t){if("default"===d.getConfigurationStartType()&&"configuration-change"===t)return u.configurationContinued=!1,u.configurationStartType=t,void u.eventBus.emit(i.appEvents.CONFIG_START,u.configurationStartType);"configuration-change"!==t?(u.configurationStartType=t,u.configurationContinued=!1,u.eventBus.emit(i.appEvents.CONFIG_START,u.configurationStartType)):u.configurationContinued=!0},u.checkDPUresponseStatus=function(t){if(t.header&&t.header.statuscode){const e=Math.floor(t.header.statuscode/100);3!==e&&5!==e||c(t)}return t},d.getConfigurationStartType=function(){return u.configurationStartType},d.resetToDefaultSetupParams=function(){var t={prstring:SETUPS.get("nemo.default.prstring"),header:SETUPS.get("nemo.default.header"),configuration:SETUPS.get("nemo.default.configuration"),items:SETUPS.get("nemo.minimal.carinfoitems")||{}};u.clearConfigurationData(t)},u.checkDefaultSetup=function(){m||(u.isStatelessMode=SETUPS.get("scope.nemo.configuration.stateless"),u.configurationEndpoint=u.isStatelessMode?"stateless-configuration":"configuration",m=!0,d.resetToDefaultSetupParams())},d.setDpuExtra=function(t){u.dpuExtra=t,window.sessionStorage&&(t?window.sessionStorage.setItem("dpu_extra",t):window.sessionStorage.removeItem("dpu_extra"))},d.getDpuExtra=function(){let t="";return u.dpuExtra?t=u.dpuExtra:u.isDebugMode()&&(t="messages"),t},u.updateConfigDataForConsumers=function(){o.stateRegistry.triggerAction(r.a,"update",u.storage),Object(s.a)(u.storage)},u.restoreDpuExtra=function(){window.sessionStorage&&(u.dpuExtra=window.sessionStorage.getItem("dpu_extra"))},u.addDpuExtraData=function(t){const e=d.getDpuExtra();return e&&(t.dpu_extra=e),t},u.addDpuExtraParam=function(t){const e=d.getDpuExtra();return e?t.indexOf("?")>=0?t+"&dpu_extra="+e:t+"?dpu_extra="+e:t},u.addSubsessionData=function(t){const e=d.getSubsessionID();return e&&(t.subsession=e),t},d.resetAudicodeRescueInfo=()=>{u.storage.configuration["audicode-rescue-info"]=void 0,u.updateConfigDataForConsumers()},u.addEvents=function(){u.eventBus.on(i.appEvents.PAGE_READY,d.sendEngineDisclaimerLayerEvent)},d.initialize=function(t){u.eventBus=t,u.checkDefaultSetup(),u.restoreDpuExtra(),u.addEvents()}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__4__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__5__},,function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(0),r=n(2),o=n(3),a=n(32),s=n(19),l=n(42),c=n(44),u=n(45),d=n(4),m=n(14),g=n(9);const f={},p={__:f};let h=!1;f.dataInitialized=!1,f.initMaxTries=20,f.oDefaults={sSelectorDelegateClick:".nm-j-configurator-delegate-click",sSelectorDelegateChangeCount:".nm-quantity",sSelectorDelegateNewClick:".nm-configuration-new",sSelectorPrintBtn:".nm-configuration-print"},f.startLayerActivated=!1,f.openedLayer=null,f.configurationContinued=!1,f.unprocessedTrackingChange=null,f.addEvents=function(){f.legacyEventBus.on("click.configuration.item",f.oDefaults.sSelectorDelegateClick,{triggerAction:"click"},f.handleConfigurationItemChanges),f.legacyEventBus.on("change.configuration.count",f.oDefaults.sSelectorDelegateChangeCount,{triggerAction:"changeCount"},f.handleConfigurationItemChanges),f.legacyEventBus.on("click.configuration.new",f.oDefaults.sSelectorDelegateNewClick,f.handleNewConfigurationClick),f.addModeSwitchEventAfterReset(),f.eventBus.on(i.appEvents.CONFLICT_CLOSE,f.handleConflictClose),f.eventBus.on(i.appEvents.TRANSFER_CLOSE,f.handleTransferClose),f.eventBus.on(i.appEvents.STARTLAYER_CLOSE,f.handleStartlayerClose),f.legacyEventBus.on("click.nemo.configurator.print",f.oDefaults.sSelectorPrintBtn,f.callPrint),f.eventBus.on(i.appEvents.FORM_FINISHED,f.receiveAudicodeForm),document.addEventListener("changeItemInConfiguration",f.handleEventForConfigurationChange),document.addEventListener("configurationUpdateFromCoLa",f.handleEventForConfigurationChange),document.addEventListener("resetConfiguration",f.handleNewConfigurationClick)},f.callPrint=function(){f.eventBus.emit(i.appEvents.CONFIG_PDF);let t=SETUPS.get("nemo.core.configurator.dpu.oAjaxRESTConfigurationURIPrint"),e=jQuery(this),n=r.a.getContext(),o=r.a.getSubsessionID()?"&subsession="+r.a.getSubsessionID():"",a=r.a.getPrString();return t=t+"?context="+n+o+"&ids="+encodeURIComponent(a),e.attr({href:t,target:"_blank"}),!0},f.isSelectedRadioButton=function(t){var e=t.closest(".nm-j-configurator-item");return!(!e.is(".nm-j-configurator-status_11010, .nm-j-configurator-status_100110")||e.is(".nm-md-bicolor-chooser-el-options")||!1!==t.data("is-deselectable"))},f.isPreselectedConflictItem=function(t){var e,n;return!!r.a.getConflicts()&&(-1!==(n=t.closest(".nm-j-configurator-item").get(0).className).indexOf("nm-j-configurator-status_")&&(5===(e=n.split("nm-j-configurator-status_")[1].split(" ")[0]).length&&"1"===e[3]))},f.handleConfigurationItemChanges=function(t){var e;f.cancelEvent(t);let n=jQuery(t.target);if(f.isSelectedRadioButton(n)||f.isPreselectedConflictItem(n))return!1;let o,a=n.closest(".nm-j-configurator-item"),s=a.attr("data-configurator-id"),l=a.find(f.oDefaults.sSelectorDelegateChangeCount).val(),c=t.data.triggerAction||"no-GUI-action-defined",u=r.a.isOptionSelectedInConfiguration(s);switch(c){case"changeCount":if(!u)return!1;o="itemAdd";break;case"click":if(!1===f.isSelectableItem(a))return;o=u?"itemRemove":"itemAdd",o=f.isIndividualColorConfiguration(s)?"itemAdd":o;break;case"dropDown":a=jQuery(this),s=a.val(),u=r.a.isOptionSelectedInConfiguration(s),o=u?"itemRemove":"itemAdd";break;default:return}let d={id:s,count:l,action:o,itemInfo:r.a.getItem(s),configurationItems:null===(e=r.a.getConfiguration())||void 0===e?void 0:e.items};const m=jQuery.extend(!0,d,{triggerAction:c,$element:a});f.eventBus.emit(i.appEvents.CONFIG_CHANGEREQUEST_START,m),f.triggerChangeRequest(d)},f.handleEventForConfigurationChange=function(t){try{t.detail.id&&f.triggerConfigurationChange(t.detail.id)}catch(t){console.error("handleEventForConfigurationChange: ","<id> is not defined")}},f.triggerConfigurationChange=function(t){var e={},n=r.a.isOptionSelectedInConfiguration(t);e.id=t,e.count=0,e.productInfo=r.a.getItem(t),e.action=n?"itemRemove":"itemAdd",f.triggerChangeRequest(e)},f.receiveAudicodeForm=function(t){f.cancelEvent(this),t.id&&t.id.indexOf("audicode")>-1&&(f.lockPrString(r.a.getPrString()),Promise.resolve(t.response).then((function(t){if(f.detectConfigurationChanges(r.a.getPrString()))throw new TypeError("receiveAudicodeForm:configuration changed while processing, loaded configuration was rejected");p.handleExternalConfiguration(t,{startType:"audicode-input"})})).then(()=>{f.dispatchCustomConfigurationStartEvent("audicode-input")}).catch(t=>{console.warn(t),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-audicode-error"],t.message])}))},p.generateAudiCode=function(t){return o.a.generateAudiCode(t)},f.lockPrString=function(t){f.lockedPrString=t},f.detectConfigurationChanges=function(t){return f.lockedPrString!==t},p.handleExternalConfiguration=function(t,e){if(!t||t&&t.audicode&&!1===t.audicode.success||t&&t.errorMessage){let e;if(t.audicode&&!t.audicode.success&&t.audicode&&t.audicode["other-url"])return void(window.location.href=t.audicode["other-url"]);throw e=t&&t.audicode&&t.audicode.message?t.audicode.message:t&&t.errorMessage?t.errorMessage:t&&t.header&&t.header.errormessages?t.header.errormessages.join(","):"unknown_error",new TypeError(e)}if(!e.startType)return o.a.adoptConfiguration(t).then((function(t){f.handleConfigurationUpdate(t)})).catch((function(t){f.handleConfigurationUpdateError(t)}));if(f.startLayerActivated=!0,"user-configuration"===e.startType&&(f.startLayerActivated=!1),s.a.isMatchingConfiguration(t))return o.a.adoptConfiguration(t).then((function(t){f.setConfigurationStartType(e.startType),f.handleConfigurationUpdate(t)})).catch((function(t){f.handleConfigurationUpdateError(t)}));{let n=r.a.getSubsessionID();return t.subsession&&(n=t.subsession),t.header&&t.header.subsession&&(n=t.header.subsession),new Promise((function(){s.a.useTrampoline(t,n,e.startType),Promise.reject("using trampoline page")})).catch((function(t){console.err("Trampoline failed",t)}))}},f.setConfigurationStartType=function(t,e){const n="default"===o.a.getConfigurationStartType()&&"configuration-change"===t?"configuration-start":t;o.a.setConfigurationStartType(t),Object(g.d)(n)?f.configurationStartedByAudiCodeSearch=!0:f.dispatchCustomConfigurationStartEvent(n,e)},f.handleConfigurationUpdate=function(){f.eventBus.emit(i.appEvents.CONFIG_UPDATE),f.configurationStartedByAudiCodeSearch?f.configurationStartedByAudiCodeSearch=!1:f.dispatchCustomConfigurationUpdateEvent(),f.dispatchCustomEvent(),f.checkLayerQueue()},f.dispatchCustomEvent=function(){try{let t=r.a.getItems(),e=new CustomEvent("configurationItemsUpdate",{detail:{items:t}});document.dispatchEvent(e)}catch(t){console.error("dispatchCustomEvent: ","the custom-event for the configuration-change could not be dispatched",t)}},f.dispatchCustomConfigurationStartEvent=function(t,e){const n=new CustomEvent("configuration-start-tracking",{detail:{type:t,changeEventData:e}});o.a.setConfigurationStartType(t),document.dispatchEvent(n)},f.dispatchCustomConfigurationUpdateEvent=function(){document.dispatchEvent(new CustomEvent("configuration-update-tracking"))},f.checkLayerQueue=function(){let t,e;e=r.a.getTransfers(),t=r.a.getConflicts();let n=!e&&!t,i=r.a.getConfigurationStartType();if(f.startLayerActivated&&n&&!r.a.isContinuedConfiguration()&&"default"!==i&&"configuration-change"!==i){if(f.startLayerActivated=!1,"configuration-reset"===i)return f.handleStartLayerDemand(),!1;{let t={configuration:r.a.getConfiguration(),assets:r.a.getConfigurationAssets(),images:r.a.getCarImages(),ms_url:r.a.getRenderUrl(),start_type:i};return f.handleStartLayerDemand(t),!1}}return f.unHandleStartLayerDemand(),e&&r.a.isContinuedConfiguration()?(c.a.handleTransfer(e),!1):!t||(u.a.handleConflict(t),!1)},f.handleStartLayerDemand=function(t){if(t&&t.configuration&&t.configuration["audicode-rescue-info"]){const e=f.getAudicodeRescueLayerMessages(t);if(e.length>0)return void f.triggerAudicodeRescueLayer(t,e)}a.a.handleStartLayer(t).then((function(){}),(function(t){console.warn("handleStartLayerDemand Error",t.message)}))},f.unHandleStartLayerDemand=function(){a.a.unHandleStartLayer()},f.getAudicodeRescueLayerMessages=t=>{const e=SETUPS.get("nemo.audicode.rescue.messages");if(!e)return[];return t.configuration["audicode-rescue-info"].history.reduce((t,e)=>t.includes(e.repairType)?t:[...t,e.repairType],[]).reduce((t,n)=>{const i=e[n]?e[n].trim():void 0;return i&&!t.includes(i)?[...t,i]:t},[])},f.triggerAudicodeRescueLayer=(t,e)=>{document.dispatchEvent(new CustomEvent("modalLayer:open",{detail:{layerType:"AudicodeRescueLayerElement",options:{addCssClass:"audicode-rescue-wrapper",onEscClick:!0,onShaderClick:!0,centerVertically:!0},dataset:{...t,rescueMessages:e}}}))},p.resetAudicodeRescueInfo=()=>{o.a.resetAudicodeRescueInfo()},f.handleConflictClose=function(t){let e=new Date;o.a.requestTransferOrConflictResolve(t.url).then(f.handleConfigurationUpdate).catch(f.handleConfigurationUpdateError).then((function(){f.onAjaxCompleted(e)})),null!==f.unprocessedTrackingChange&&"submit"===t.action&&(f.setConfigurationStartType(f.unprocessedTrackingChange.startType,f.unprocessedTrackingChange.changeEventData),f.unprocessedTrackingChange=null),"cancel"===t.action&&(f.unprocessedTrackingChange=null)},f.handleTransferClose=function(t){if(o.a.transferCompleted(),t&&t.url){let e=new Date;o.a.requestTransferOrConflictResolve(t.url).then(f.handleConfigurationUpdate).catch(f.handleConfigurationUpdateError).then((function(){f.onAjaxCompleted(e)}))}else f.checkLayerQueue()},f.handleStartlayerClose=function(){f.checkLayerQueue()},p.addToConfiguration=function(t){let e={action:"itemAdd",count:null,id:t};return f.eventBus.emit(i.appEvents.CONFIG_CHANGEREQUEST_START,{}),f.triggerChangeRequest(e)},p.removeFromConfiguration=function(t){var e={action:"itemRemove",count:null,id:t};return f.eventBus.emit(i.appEvents.CONFIG_CHANGEREQUEST_START,{}),f.triggerChangeRequest(e)},f.triggerChangeRequest=function(t){var e=new Date;return o.a.requestConfigurationChange(t).then((function(e){f.updateItemSelectionMethod(t,"active");r.a.getConflicts()?f.unprocessedTrackingChange={startType:"configuration-change",changeEventData:t}:(f.setConfigurationStartType("configuration-change",t),f.unprocessedTrackingChange=null),f.handleConfigurationUpdate(e)})).catch(f.handleConfigurationUpdateError).then((function(){f.onAjaxCompleted(e)}))},f.updateItemSelectionMethod=function(t,e){var n;n=t.id,"itemAdd"===t.action?o.a.setItemSelectionMethod(n,e):o.a.setItemSelectionMethod(n,"")},f.updatePreselectedItems=function(){var t=r.a.getItems();jQuery.each(t,(function(t,e){e.status&&5===e.status.length&&"1"===e.status.substr(3,1)&&o.a.setItemSelectionMethod(t,"pre")}))},f.handleConfigurationUpdateError=function(t){console.error("Configuration Error",t);const e=r.a.getErrorMessage(t);f.eventBus.emit(i.appEvents.ERROR,e)},f.isIndividualColorConfiguration=function(t){return"Q0Q0"===t||"O0O0"===t||"BODY_Q0"===t||"BODY_O0"===t},f.isSelectableItem=function(t){var e=r.a.getDOMStatusCode(t).split(""),n=window.mss||null;return!!t.hasClass("nm-j-configurator-item-forceselectable")||"0"!==e[0]&&("0"!==e[1]&&(("1"!==e[4]||"1"!==e[3]||!n)&&(e[2],!0)))},f.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},f.handleNewConfigurationClick=function(t){f.cancelEvent(t),o.a.requestConfigurationReset().then((function(t){f.startLayerActivated=!0,o.a.setConfigurationStartType("configuration-reset"),f.handleConfigurationUpdate(t)})).then(()=>{f.dispatchCustomConfigurationStartEvent("configuration-reset")}).then(void 0,f.configurationErrors).then(f.onAjaxCompleted)},f.configurationErrors=function(t){console.warn("Configuration Error",t.mesage)},f.addModeSwitchEventAfterReset=function(){var t=jQuery("nm-price-rate-switch");t&&(t.checked=!1),f.legacyEventBus.on("change",".nm-price-rate-switch, .j-rate-switch",f.handleModeSwitchChange),document.addEventListener("rateSwitch",f.handleModeSwitchChange)},f.handleModeSwitchChange=function(t){let e;e=t.detail&&t.detail.mode?t.detail.mode:!0===t.target.checked?"rate":"price",o.a.changeRatePriceMode(e).then(f.handleConfigurationUpdate).then(void 0,f.configurationErrors).then(f.onAjaxCompleted)},f.onAjaxCompleted=function(t){f.eventBus.emit(i.appEvents.CONFIG_CHANGEREQUEST_END)},f.initialize=function(){var t;h||(f.addEvents(),h=!0,t=new Date,f.dataInitialized=!1,o.a.fireDataInitializationChain().then((function(){f.initPreviousConfiguration().then(()=>{f.updatePreselectedItems(),o.a.dispatchPriceMode(r.a.getPriceRateMode()),f.dispatchCustomEvent(),f.dataInitialized=!0,console.info("fireDataInitializationChain completed after "+((new Date).getTime()-t.getTime())+" ms")})}),(function(e){f.initPreviousConfiguration().then(()=>{f.dataInitialized=!0,console.warn("fireDataInitializationChain failed after "+((new Date).getTime()-t.getTime())+" ms:"+e.message)})})))},p.isDataInitialized=function(){return f.dataInitialized},f.initPreviousConfiguration=function(){var t,e,n,o,a;if(window.location.search&&window.location.search.indexOf("new_config")>-1&&(e=!0),n=s.a.getPreviousWindowConfig(),o=s.a.getConfigurationRequestParam(),a=l.a.getPreviousUserConfigurationPrString(),o){if(o.audicode)return p.loadConfigurationByAudiCode(o.audicode).then((function(t){p.handleExternalConfiguration(t,{startType:"teaser-audicode"})})).then(()=>{f.dispatchCustomConfigurationStartEvent("teaser-audicode"),d.stateRegistry.triggerAction(m.a,"update",{audicode:o.audicode})}).catch(e=>{t=r.a.getErrorMessage(e),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],t])});if(o.prstring)return p.loadConfigurationByPrString(o.prstring).then((function(t){p.handleExternalConfiguration(t,{startType:"teaser-prstring"})})).then(()=>{f.dispatchCustomConfigurationStartEvent("teaser-prstring")}).catch(e=>{t=r.a.getErrorMessage(e),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],t])})}return n?n.carline!==r.a.getCarline()?(s.a.useTrampoline(n,n.subsession,n.entryType),Promise.resolve()):p.loadConfigurationByPrString(n.prstring,n.subsession).then(t=>{p.handleExternalConfiguration(t,{startType:n.entryType})}).then(()=>{Object(g.d)(n.entryType)&&f.dispatchCustomConfigurationStartEvent(n.entryType)}).catch(e=>{t=r.a.getErrorMessage(e),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],t])}):n||o?Promise.resolve():e?p.loadConfigurationByPrString(SETUPS.get("nemo.default.prstring")).then((function(t){p.handleExternalConfiguration(t,{startType:"configuration-reset"})}),(function(t){console.warn(t.message)})).then(()=>{f.dispatchCustomConfigurationStartEvent("configuration-reset")}):(console.log("previousUserConfigurationPromise - loadConfiguration"),a.then((async function(t){await p.loadConfigurationByPrString(t).then((function(t){p.handleExternalConfiguration(t,{startType:"user-configuration"})}),(function(t){console.warn(t.message)})).then(()=>{f.dispatchCustomConfigurationStartEvent("user-configuration")})})).catch((function(t){console.warn(t.message)})))},p.loadConfigurationByPrString=function(t,e){return o.a.loadConfigurationByPrString(t,e)},p.loadConfigurationFromTeaser=function(t,e){var n,o=r.a.getSubsessionID();return t.prstring?p.loadConfigurationByPrString(t.prstring,o).then((function(t){p.handleExternalConfiguration(t,{startType:e})})).then(()=>{"audicode.visualizer"===e&&f.dispatchCustomConfigurationStartEvent(e)}).catch((function(t){n=r.a.getErrorMessage(t),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],n])})):t.audicode?p.loadConfigurationByAudiCode(t.audicode).then((function(t){p.handleExternalConfiguration(t,{startType:e})})).then(()=>{"audicode.visualizer"===e&&f.dispatchCustomConfigurationStartEvent(e)}).catch((function(t){n=r.a.getErrorMessage(t),f.eventBus.emit(i.appEvents.ERROR,[window.i18n["standard-configuration-error"],n])})):Promise.reject("No valid config option found")},p.loadConfigurationByAudiCode=function(t){return o.a.loadConfigurationByAudiCode(t)},p.listCarstoreItems=function(){return o.a.sendCarstoreRequest("list")},p.switchCarline=function(t,e,n,r){return o.a.switchCarline(t,e,n).then((function(){r?o.a.adoptConfiguration(r).then((function(t){f.handleConfigurationUpdate(t)})).catch((function(t){f.handleConfigurationUpdateError(t)})):(f.eventBus.emit(i.appEvents.CONFIG_RESET),o.a.setConfigurationStartType("switched-carline"))}))},p.loadCarstoreItem=function(t){return o.a.sendCarstoreRequest("load",{slot:t}).then((function(t){p.handleExternalConfiguration(t,{startType:"carstore"})}))},p.deleteCarstoreItem=function(t){return o.a.sendCarstoreRequest("delete",{slot:t})},p.setSubsessionID=function(t){o.a.setSubsessionID(t)},p.resetToDefaultSetupParams=function(){o.a.resetToDefaultSetupParams()},p.getAjaxMarker=function(){var t={marker:"",overwrites:!1};return new Promise((function(e){r.a.isConfigurable()?(t.marker=r.a.getMemcacheVersion(),t.overwrites=!0):t.marker=SETUPS.get("nemo.staticversion"),e(t)}))},p.setDpuExtra=function(t){o.a.setDpuExtra(t)},p.initialize=function(t){f.eventBus=t,f.legacyEventBus=jQuery("body"),i.content.registerMarkerProvider(p.getAjaxMarker),f.initialize()}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__8__},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return u}));n(20);const i=()=>{let t=!1;const e=document.querySelector(".nm-content");if(e){const n=e.getAttribute("data-type");n&&"nemo"===n&&(t=!0)}return t},r=()=>{let t=!1;const e=document.querySelector(".nm-content");if(e){const n=e.getAttribute("data-template");n&&"home"===n&&(t=!0)}return t},o=t=>{const e=t.id?{productID:t.id}:{},n=t.mbvId?{productMbvId:t.mbvId}:{},i=t.name?{productName:t.name}:{},r=t.mileage?{mileage:t.mileage}:{};return Object.assign({},e,n,i,r)},a=(t,e)=>{return e&&e[t.family]&&(void 0!==(n=t.family.split("."))&&n.length>0)&&t.family.split(".")||[];var n},s=(t,e)=>{const[n=""]=a(t,e),[,i=""]=a(t,e);return{primaryCategory:n,subCategory1:i,productType:((t,e)=>{return e&&e[t.family]&&((n=e[t.family]).type&&void 0!==n.type)&&e[t.family].type||"";var n})(t,e)}},l=t=>{const e=t.price?{price:t.price}:{};return Object.assign({},e)},c=(t,e)=>{const n=0!==Object.keys(o(t)).length?{productInfo:o(t)}:{},i=0!==Object.keys(s(t,e)).length?{category:s(t,e)}:{},r=l(t)!=={}?{price:l(t)}:{},a=0!==Object.keys({}).length?{attributes:{}}:{};return Object.assign({},n,i,r,a)};function u(t){return["audicode-input","teaser-audicode","audicode.visualizer","audicode-search","teaser-prstring","user-configuration","configuration-reset"].indexOf(t)>-1}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(24),r=n(36);t.exports=n(16)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},,function(t,e,n){var i=n(21)("wks"),r=n(23),o=n(10).Symbol,a="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)("Symbol."+t))}).store=i},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(4);const r="dbadAudicodeStore";class o{constructor(){return o.instance||(this._initStore(),o.instance=this),o.instance}_initStore(){const t={update:this._update,invalidate:this._invalidate};i.stateRegistry.addStore(r,{audicode:null,configuration:null},t)}_update(t,e){return{...t,audicode:e.audicode,configuration:e.configuration}}_invalidate(t){return{...t,audicode:null,configuration:null}}}const a=new o;Object.freeze(a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(4);const r="dbadConfigurationStore";class o{constructor(){return o.instance||(this._initStore(),o.instance=this),o.instance}_initStore(){const t={update:this._update};i.stateRegistry.addStore(r,{configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null},t)}_update(t,e){return{...t,...e,...o._processUpdate(e)}}static _processUpdate(t){return{selectedTrimline:o._getSelectedTrimline(t)}}static _getSelectedTrimline(t){return t.items?Object.values(t.items).reduce((t,e)=>o._isSelectedTrimline(e)?e.id:t,null):null}static _isSelectedTrimline(t){return o._isTrimlineItem(t)&&o._isSelectedItem(t)}static _isTrimlineItem(t){return t.id&&t.id.indexOf("trimline_")>-1}static _isSelectedItem(t){return t.status&&"1"===t.status.charAt(3)}}const a=new o;Object.freeze(a)},function(t,e,n){t.exports=!n(34)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t){t.exports=JSON.parse('{"mediaService":{"api":"https://mediaservice.audi.com/renderapi/v1/urls","clientId":"4DWZjsGz","live":true}}')},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(0),r=n(2);const o={},a={__:o};o.oDefaults={},a.getPreviousWindowConfig=function(){let t,e=null,n=r.a.getCarline(),o=window&&window.name&&null!==window.name?window.name:i.cache.getItem("use_trampoline","data","localStorage");if(o)try{t=JSON.parse(o),t&&t.prstring&&t.subsession&&t.carline===n&&(e=t)}catch(t){console.log("we are not comming from a page were we set the window.name"),e=null}return i.cache.getItem("use_trampoline","data","localStorage")&&i.cache.removeItem("use_trampoline","data","localStorage"),e},a.getConfigurationRequestParam=function(){var t=null,e=o.getUrlVar("audicode"),n=o.getUrlVar("pr");return e&&((t={}).audicode=e),n&&((t={}).prstring=n),t},a.useTrampoline=function(t,e,n){let r=t.configuration.prstring,a=t.configuration.carline,s=o.getCarlineUrl(a);s&&(window.name='{"subsession":"'+e+'","carline":"'+a+'","prstring":"'+r+'","entryType":"'+n+'"}',i.cache.setItem("carline_mapping",e,JSON.stringify(t),"localStorage"),i.cache.setItem("use_trampoline","data",'{"subsession":"'+e+'","carline":"'+a+'","prstring":"'+r+'","entryType":"'+n+'"}',"localStorage"),setTimeout((function(){window.location.href=s}),150))},o.getCarlineUrl=function(t){return r.a.getCarlineUrl(t)},a.hasPreviousWindowConfiguration=function(){return!!a.getPreviousWindowConfig()},a.isMatchingConfiguration=function(t){let e,n,i,a,s,l,c;return e=!1,i=!!t,a=null,n=r.a.getCarline(),i&&t.configuration&&t.configuration.carline&&(a=t.configuration.carline),i&&t.configuration&&t.configuration.carline&&(a=t.configuration.carline),s=null,i&&t.configuration&&t.configuration.prstring&&(s=t.configuration.prstring),l=!1,c=o.getCarlineUrl(a),c&&(l=!0),a&&n!==a&&l&&(e=!1),a&&n===a&&(e=!0),console.log("isMatchingConfiguration: "+e+"  audiCodeCorrespondingPrstring: "+s),e},o.getUrlVars=function(t){let e,n,i,r,o={};for(n=t.slice(t.indexOf("?")+1).split("#")[0].split("&"),i=0,r=n.length;i<r;i++)e=n[i].split("="),o[e[0]]=e[1];return o},o.getUrlVar=function(t,e){const n=e||window.location.href;return o.getUrlVars(n)[t]||null}},function(t,e,n){for(var i=n(46),r=n(38),o=n(29),a=n(10),s=n(11),l=n(27),c=n(13),u=c("iterator"),d=c("toStringTag"),m=l.Array,g={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(g),p=0;p<f.length;p++){var h,v=f[p],y=g[v],S=a[v],C=S&&S.prototype;if(C&&(C[u]||s(C,u,m),C[d]||s(C,d,v),l[v]=m,y))for(h in i)C[h]||o(C,h,i[h],!0)}},function(t,e,n){var i=n(22),r=n(10),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(33)?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(25),r=n(48),o=n(49),a=Object.defineProperty;e.f=n(16)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(26);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports={}},function(t,e,n){var i=n(51),r=n(37);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(10),r=n(11),o=n(17),a=n(23)("src"),s=n(55),l=(""+s).split("toString");n(22).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(c&&(o(n,a)||r(n,a,t[e]?""+t[e]:l.join(String(e)))),t===i?t[e]=n:s?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(t,e,n){var i=n(21)("keys"),r=n(23);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(18);const r={exterior:{fullscreen:"aecwn8o1920x1152",flyout:"aecwn8o1920x600"},exterior_front:{fullscreen:"aecwn1o1920x1152",flyout:"aecwn1o1920x600"},exterior_back:{fullscreen:"aecwn6o1920x1152",flyout:"aecwn6o1920x600"},exterior_straight_front:{fullscreen:"aecwn3o1920x1152",flyout:"aecwn3o1920x600"},exterior_straight_back:{fullscreen:"aecwn5o1920x1152",flyout:"aecwn5o1920x600"},closeup_lights:{fullscreen:"aecwn2o1920x1152",flyout:"aecwn2o1920x600"},interior:{fullscreen:"aecwi1n1920x1152",flyout:"aecwi1n1920x600"},dashboard:{fullscreen:"aecwi2n1920x1152",flyout:"aecwi2n1920x600"}},o=Object.values(r).map(t=>[null==t?void 0:t.flyout,null==t?void 0:t.fullscreen]);function a(t,e){if(t&&t.length){const n=t.find(t=>t.config===e);return null==n?void 0:n.url}return null}const s=t=>null==t?void 0:t.startsWith("LC_PR"),l=async function(t){var e;const n=null==t?void 0:t.ave,l=t&&t["mbv-ids"];if(!n)return Promise.reject({});const c=n.split(","),u=c.slice(0,5),d=c.slice(5),m=c[3],g=c[4],f=c[2],p=c[1],h=null==t||null===(e=t.extColorCode)||void 0===e?void 0:e.selected,v=(null==l?void 0:l.exteriorColor)||m,y=(null==l?void 0:l.interiorColor)||g,S=(null==l?void 0:l.modelyear)||(null==t?void 0:t.modelyear)||f,C=p||(null==l?void 0:l.model)||(null==t?void 0:t.model),E={client:i.mediaService.clientId,brand:"ALL",configs:[].concat(...o),live:i.mediaService.live,modelRequests:[{modelCode:C,modelYear:S,exteriorColor:v,interiorColor:y,standardEquipments:d,mimeType:"image/png",...s(u[3])&&{aozEquipments:[h]}}]},b={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)};try{const t=await fetch(i.mediaService.api,b);if(t.ok)return t.json().then(t=>{var e;return(t=>t?Object.entries(r).reduce((e,n)=>{var i,r;return{...e,[n[0]]:{fullscreen:a(t,null===(i=n[1])||void 0===i?void 0:i.fullscreen),flyout:a(t,null===(r=n[1])||void 0===r?void 0:r.flyout)}}},{}):[])(null===(e=t.modelResults[0])||void 0===e?void 0:e.urlResult.filter(t=>null==t?void 0:t.url))});console.error("Response error from fetch images API: ",t)}catch(t){console.error("error occured when trying to fetch images from API:"+t)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(0),r=n(1),o=n(5);const a={},s={__:a};a.instance=!1,a.enabled=!0,a.source=!1,a.oDefaults={sCloseLayerButtonSelector:".nm-configurationstart-layer-close"},a.addEvents=function(){a.legacyEventBus.on("click.layer.configstart.close",a.oDefaults.sCloseLayerButtonSelector,a.closeStartLayer)},a.removeEvents=function(){a.legacyEventBus.off("click.layer.configstart.close",a.oDefaults.sCloseLayerButtonSelector,a.closeStartLayer)},a.trackLoadConfigEvent=function(){return a.enabled?new Promise((function(t){var e=setInterval((function(){if(a.layerProcessed){if(clearInterval(e),!a.layerActive)return console.log("reject"),Promise.reject();console.log("resolve: ",a.source),"carstore"===a.source?t({source:"myAudi"}):"audicode-input"===a.source?t({source:"audicode"}):t({source:a.source})}}),50)})):Promise.reject()},a.isStartlayerNotToShow=function(){return!a.enabled||o.hideHeaderFooter.isHiddenHeaderFooter()||SETUPS.get("scope.nemo.hide_startlayer")},a.openStartLayer=function(t){var e=t;return a.isStartlayerNotToShow()?(a.layerProcessed=!0,a.layerActive=!1,Promise.reject(new Error("Start layers not supported."))):new Promise((function(n,o){let s,l,c="configurationstart-implicit";(e=t)?(c="configurationstart-loaded",l='<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n\t<div class="nm-layer nm-layer-dialogue">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-dialogue-content clearfix">\n\t\t\t\t<div class="nm-3col clearfix">\n\t\t\t\t\t<div class="nm-module nm-start-layer nm-simpleform nm-configurationstart-loaded-layer clearfix">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'configurationloaded-layer-info\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-01">\n\t\t\t\t\t\t\t{{=\twindow.i18n[\'configurationloaded-layer-edit\']}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<img src="{{=it.ms_url}}{{=it.images.exterior_front[\'flyout\']}}"\n\t\t\t\t\t\tclass="nm-unscaled-image nm-alpha" />\n\t\t\t\t\t\t<div class="nm-start-information-overview">\n\t\t\t\t\t\t\t<div class="nm-start-inforamation-content">\n\t\t\t\t\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t\t\t\t\t{{=it.configuration.carlineName}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="nm-engine nm-el-pg nm-el-pg-03">\n\t\t\t\t\t\t\t\t\t{{=it.configuration.description}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<ul class="nm-car-price clearfix">\n\t\t\t\t\t\t\t\t\t<li class="nm-car-price-total nm-el-hdl nm-el-hdl-04 nm-at-hdl-b clearfix">\n\t\t\t\t\t\t\t\t\t\t/*<span class="nm-car-price-total-key">\n\t\t\t\t\t\t\t\t\t\t\t{{=window.i18n[\'totalprice-label\']}}\n\t\t\t\t\t\t\t\t\t\t</span>*/\n\t\t\t\t\t\t\t\t\t\t<span class="nm-car-price-total-value">\n\n\t\t\t\t\t\t\t\t\t\t\t{{? typeof(it.configuration.prices.rotr) !== \'undefined\' && parseInt(it.configuration.prices.rotr, 10) > 0 }}\n\t\t\t\t\t\t\t\t\t\t\t\t{{=it.configuration.prices.rotr}}\n\t\t\t\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t\t\t\t{{=it.configuration.price}}\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="nm-btn-continue">\n\t\t\t\t\t\t\t\t<a href="#" class="nm-configurationstart-layer-close nm-el-btn nm-el-btn-01 nm-el-btn-ast">{{=window.i18n[\'proceed-label\']}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'):(c="configurationstart-implicit",l='<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n\t<div class="nm-layer nm-layer-dialogue">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-dialogue-content clearfix">\n\t\t\t\t<div class="nm-3col clearfix">\n\t\t\t\t\t<div class="nm-module nm-start-layer nm-md-configurationstart-implicit-layer">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'configurationstart-layer-info\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-01">{{= window.i18n[\'configurationstart-layer-edit\']}}</p>\n\t\t\t\t\t\t<div class="nm-btn-continue">\n\t\t\t\t\t\t\t<a href="#" class="nm-configurationstart-layer-close nm-el-btn nm-el-btn-01 nm-el-btn-ast" style="float:right;">{{=window.i18n[\'proceed-label\']}}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'),s=r.template.render(l,e||{}),setTimeout((function(){document.body.scrollTop=0,i.layerApi.open(c,s,a.closeStartLayer).then((function(t){a.layerProcessed=!0,a.layerActive=!1,e&&(a.source=e.start_type,a.layerActive=!0),a.instance=t,a.addEvents(),jQuery("body").addClass("nm-config-layer-open"),n(a.instance)}),(function(t){a.layerProcessed=!0,a.layerActive=!1,o(t)}))}),600)}))},a.closeStartLayer=function(t){a.cancelEvent(t),a.instance&&"function"==typeof a.instance.close&&a.instance.close(),a.eventBus.emit(i.appEvents.STARTLAYER_CLOSE),a.instance=null,a.removeEvents(),jQuery("body").removeClass("nm-config-layer-open")},a.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},a.initialize=function(){a.instance||(a.addEvents(),a.instance=!0,a.layerProcessed=!1,a.layerActive=!0)},s.handleStartLayer=function(t){return a.openStartLayer(t)},s.unHandleStartLayer=function(){a.layerProcessed=!0,a.layerActive=!1},s.setEnabled=function(t){a.enabled=t},s.initialize=function(t){a.eventBus=t,a.legacyEventBus=jQuery("body"),a.initialize()}},function(t,e){t.exports=!1},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(26),r=n(10).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(61),r=n(40);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(24).f,r=n(17),o=n(13)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(2),r=n(0),o={},a={__:o};o.STORAGE=window.sessionStorage||null,o.entryPrefix="__nemo__",o.handleConfigurationUpdates=function(){var t={prString:i.a.getPrString(),carlineID:i.a.getCarline()};o.writeEntry(t).then((function(t){console.log("userÂ´s configuration storageID: "+t.stored)}),(function(t){console.warn("Error storing userÂ´s configuration: "+t.message)}))},o.writeEntry=function(t){let e=t;return new Promise((function(t,n){var i;i=o.uuid(),e||n(new TypeError("writeEntry: missing param 'entry_'")),e=JSON.stringify(e),o.STORAGE||n(new TypeError("sessionStorage is not available")),o.STORAGE.setItem(i,e),t({stored:i})}))},o.uuid=function(){return o.entryPrefix+i.a.getVersion()},o.addEvents=function(){o.eventBus.on(r.appEvents.CONFIG_UPDATE,o.handleConfigurationUpdates)},o.readEntryFromStorage=function(){return new Promise((function(t,e){var n;o.STORAGE||e(new TypeError("Browserstorage is not available"));try{n=o.STORAGE.getItem(o.uuid()),t(n=JSON.parse(n))}catch(t){e(new TypeError("Error reading userÂ´s configuration: "+t.message))}}))},o.initialize=function(){!i.a.isInPreviewMode()&&i.a.isConfigurable()?o.addEvents():console.log("preview-mode")},a.getPreviousUserConfigurationPrString=function(){return o.readEntryFromStorage().then((function(t){return t&&t.carlineID&&t.prString&&t.carlineID===i.a.getCarline()&&t.prString!==i.a.getPrString()?Promise.resolve(t.prString):Promise.reject(new TypeError("no valid user configuration available"))}),(function(){return Promise.reject(new TypeError("error reading user configuration from storage"))}))},o.debugEntries=function(){var t,e=[],n=new RegExp(o.entryPrefix);for(t in o.STORAGE)n.test(t)&&e.push(t);return e},a.initialize=function(t){o.eventBus=t,o.initialize()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(4);class r{static get SEARCHPROVIDER_STORE_ID(){return"dbadSearchProviderStore"}static get SEARCHQUERY_STORE_ID(){return"dbadSearchQueryStore"}get searchResultStoreId(){return null}constructor(){i.stateRegistry.subscribeToStore(r.SEARCHQUERY_STORE_ID,t=>{this.performSearch(t.searchQuery)}),this.registerResultStore()}async registerResultStore(){this.searchResultStoreId&&(await this.waitForProviderStore(),i.stateRegistry.triggerAction(r.SEARCHPROVIDER_STORE_ID,"addSearchProvider",{searchProvider:this.searchResultStoreId}))}waitForProviderStore(){return new Promise(t=>{i.stateRegistry.subscribeToStore(r.SEARCHPROVIDER_STORE_ID,()=>{t()})})}performSearch(t){throw new Error("Implement performSearch in Subclass. (searchQuery: "+t+")")}publishResult(t,e){i.stateRegistry.triggerAction(this.searchResultStoreId,"update",{result:e,searchQuery:t})}setPreventSubmit(t=!1){i.stateRegistry.triggerAction(r.SEARCHPROVIDER_STORE_ID,"preventSubmit",{preventSubmit:t})}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(2),r=n(0),o=n(1);const a={},s={__:a};a.oDefaults={sSelectorDelegateTransferClick:".nm-layer-transfer .nm-j-configurator-delegate-transfer-click"},a.transfer=null,a.layerInstance=null,a.layerIsOpening=!1,a.layerIsClosing=!1,a.mergeData=function(t){return{deleted:t.deleted?a.mergeItemList(t.deleted):[],transferred:t.transferred?a.mergeItemList(t.transferred):[],standard:t.standard?a.mergeItemList(t.standard):[],urls:t.urls}},a.mergeItemList=function(t){return t.map(t=>i.a.getItem(t.id))},a.openLayer=function(t,e,n){let i;if(!a.layerIsClosing)return a.layerIsOpening=!0,i=r.layerApi.open(t,e,n),i.then((function(t){return a.layerIsOpening=!1,Promise.resolve(t)}),(function(t){return a.layerIsOpening=!1,Promise.reject(t)}));setTimeout((function(){a.openLayer(t,e,n)}),510)},a.closeLayer=function(){let t;a.layerIsClosing=!0,null===a.layerInstance&&a.layerIsOpening?setTimeout(a.closeLayer,510):(t=a.layerInstance.close(),t.then((function(){a.layerInstance=null,a.layerIsClosing=!1,a.onLayerClose()}),(function(){a.layerIsClosing=!1})))},a.onLayerClose=function(){a.transfer=null},a.handleTransferResolveClick=function(t){let e,n,i,s;t?(a.cancelEvent(t),e=o.dom.closest(t.target,a.oDefaults.sSelectorDelegateTransferClick),e&&(n=e.getAttribute("href"))):(i=o.dom.getElement(a.oDefaults.sSelectorDelegateTransferClick+"[data-transfer='cancel']"),o.dom.isElement(i)?n=i.getAttribute("href"):(s=o.dom.getElement(a.oDefaults.sSelectorDelegateTransferClick+"[data-transfer='submit']"),n=s.getAttribute("href"))),n&&(n=SETUPS.get("nemo.url.dpu")+n,a.eventBus.trigger(r.appEvents.TRANSFER_CLOSE,{url:n})),a.closeLayer()},a.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},a.handleTransferClose=function(){a.layerName&&a.handleTransferResolveClick()},s.handleTransfer=function(t){var e,n;e=a.mergeData(t),n=o.template.render('<div class="nm-layer-wrapper nm-layer-wrapper-dialogue nm-layer-wrapper-transfer">\n\t<div class="nm-layer nm-layer-transfer nm-layer-transfer-default">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-conflict-content clearfix">\n\t\t\t\t<div class="nm-3col cearfix">\n\t\t\t\t\t<div class="">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'transfer-layer.configuration-transfer\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t{{? 0 !== it.deleted.length}}\n\t\t\t\t\t\t<strong class="nm-el-pg nm-el-pg-01">\n\t\t\t\t\t\t\t{{=window.i18n[\'transfer-layer.configuration-transfer-warning\']}}:\n\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t<ul class="nm-options-list nm-transfer-trigger nm-j-configurator-no-update">\n\t\t\t\t\t\t\t{{~it.deleted :value:index}}\n\t\t\t\t\t\t\t<li class="nm-check-list-item nm-j-configurator-item">\n\t\t\t\t\t\t\t\t<div class="nm-options-cell-additional">\n\t\t\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t\t<div class="nm-list-item-additional clearfix">\n\t\t\t\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t\t\t\t\t\t{{=value.price}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t\t\t\t\t{{=value.name}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<ul class="nm-button-list clearfix">\n\t\t\t\t\t\t/*<li>\n\t\t\t\t\t\t\t<a class="nm-b7 nm-j-configurator-delegate-transfer-click" data-transfer="cancel"\n\t\t\t\t\t\t\thref="{{=it.urls.cancel}}">{{=window.i18n[\'transfer-layer.label.cancel\']}}</a>\n\t\t\t\t\t\t</li>*/\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<div class="nm-btn-continue">\n\t\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-transfer-click nm-el-btn nm-el-btn-01 nm-el-btn-ast" data-transfer="submit">{{=window.i18n[\'proceed-label\']}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',e),a.openLayer("transfer-layer",n,a.handleTransferResolveClick).then((function(t){a.layerInstance=t}),(function(t){console.warn("TRANSFER Layer open failed",t.message)}))},s.initialize=function(t){a.eventBus=t,a.legacyEventBus=o.dom.getEventDelegate("body"),a.legacyEventBus.on("click",a.oDefaults.sSelectorDelegateTransferClick,a.handleTransferResolveClick)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(2),r=n(0),o=n(1);const a={},s={__:a};a.previousSelectedSolution=null,a.layerInstance=null,a.currentCancelLink="",a.oDefaults={sSelectorConflictLayer:".nm-layer-conflict",sSelectorConfigLayerOpen:"nm-config-layer-open",sSelectorDelegateConflictClick:".nm-j-configurator-delegate-conflict-click",sSelectorOptionsShow:".nm-j-conflict-options-show",sSelectorConflictSolution:".nm-conflict-solution",sSelectorDelegateClick:".nm-layer-wrapper-conflict .nm-j-configurator-delegate-click",sClassConflictSolutionShow:"nm-conflict-solution-show"},a.groupingWhitelist=["extcolor","upholstery"],a.debouncedConflictResolveHandler=o.dom.debounce(t=>{a.handleConflictResolveClick(t)},500),a.addEvents=function(){a.legacyEventBus.on("click.nemo.configurator",a.oDefaults.sSelectorDelegateConflictClick,t=>{t.preventDefault(),a.debouncedConflictResolveHandler(t)}),a.legacyEventBus.on("click.alternative-options",a.oDefaults.sSelectorOptionsShow,a.toggleAlternativeOptions),a.legacyEventBus.on("click.solution.store",a.oDefaults.sSelectorDelegateClick,a.handleConflictItemClick)},a.handleConflictItemClick=function(t){var e,n,i;if(a.cancelEvent(t),i=(n=(e=jQuery(this)).closest("div[data-solution-id]")).data("solution-id"),a.isSelectedItem(e.closest(".nm-j-configurator-item")))return console.log('ITEM "'+e.closest(".nm-j-configurator-item").attr("[nm-j-configurator-id]")+'" is already part of the configuration',e,n,i),!1;a.previousSelectedSolution=i,console.log("ITEM was clicked",e,n,i,a.previousSelectedSolution)},a.isSelectedItem=function(t){var e,n=t.get(0).className;return-1!==n.indexOf("nm-j-configurator-status_")&&(5===(e=n.split("nm-j-configurator-status_")[1].split(" ")[0]).length&&"1"===e[3])},a.toggleAlternativeOptions=function(){return jQuery(this).closest(".nm-conflict-solution").toggleClass(a.oDefaults.sClassConflictSolutionShow),!1},a.detectGroups=function(t,e,n){var i,r,o,s,l,c=t.items.length;if(t.sameTypeItems=!1,c<2)return t;for(i=c-1;i>=0;i--){if(!(r=n[t.items[i].id]))return t;if(!(o=e[r.family]))return t;if(l=o.name,i<c-1&&(s!==o.type||a.groupingWhitelist.indexOf(o.type)<0))return t;s=o.type}return t.sameTypeItems=!0,t.header=l,t},a.mergeData=function(t,e,n){var i,r,o,s,l,c,u,d,m,g,f=t,p=[];for(f.replacedByTriggers&&f.replacedByTriggers.length&&f.solutions.unshift(f.replacedByTriggers),jQuery.each(f.solutions,(function(t,i){(m={}).items=[],m.ids=[],l=[],jQuery.each(i,(function(t,i){(c=n[i.id])?(c.name&&delete i.name,u=jQuery.extend(!0,{},c,i)):u=i,u.family&&e[u.family]&&(u.family=e[u.family]),i.effItems&&jQuery.each(i.effItems,(function(t,i){(c=n[i.id]).name&&delete i.name,(r=jQuery.extend(!0,{},c,i)).family&&e[r.family]&&(r.family=e[r.family]),r.items=[r],l.push(r)})),m.ids.push(u.id),m.items.push(u)})),m.id=m.ids.join(""),p.push(m),l.length>0&&(p=p.concat(l))})),f.solutions=p,o=f.solutions.length-1;o>=0;o--)f.solutions[o]=a.detectGroups(f.solutions[o],e,n);for(g=[],s=f.solutions[0].items.length;s--;)(i=f.solutions[0].items[s]).family&&i.family.id&&i.family.id.indexOf("synthetic.audi_exclusive")>-1?(g.push(i),f.solutions[0].items[s].exclusive=!0):f.solutions[0].items[s].exclusive=!1;return g.reverse(),f.solutions[0].exclusives=g,d=[],l=[],jQuery.each(f.triggers,(function(t,i){(c=n[i.id])?(c.name?delete i.name:i.name="#"+c.name,u=jQuery.extend(!0,{},c,i)):u=i,u.family&&e[u.family]&&(u.family=e[u.family]),d.push(u),i.effItems&&jQuery.each(i.effItems,(function(t,e){(c=n[e.id]).name&&delete e.name,(r=jQuery.extend(!0,{},c,e)).items=[r],l.push(r)}))})),l.length>0&&(f.solutions=l.concat(f.solutions)),f.triggers=d,f},a.openLayer=function(t,e,n){return new Promise((function(i,o){r.layerApi.open(t,e,n).then((function(t){a.layerInstance=t,a.openSelectedSolutionAlternatives(),a.currentCancelLink=jQuery([a.oDefaults.sSelectorDelegateConflictClick,"[data-conflict='cancel']"].join("")).attr("href"),i(a.layerInstance)}),(function(t){o(t)}))}))},a.closeLayer=function(){return a.layerInstance.close().then((function(){a.layerInstance=null,a.onLayerClose()}),(function(t){throw new TypeError("Error closing conflict Layer: "+t.message)}))},a.onLayerClose=function(){jQuery("body").removeClass(a.oDefaults.sSelectorConfigLayerOpen),a.conflict=null},a.handleConflictResolveClick=function(t){var e,n,i,o="cancel";t?(a.cancelEvent(t),e=jQuery(t.target),n=SETUPS.get("nemo.url.dpu")+e.attr("href"),e.data("conflict")&&(o=e.data("conflict"))):(o="cancel",n=(i=jQuery([a.oDefaults.sSelectorDelegateConflictClick,"[data-conflict='cancel']"].join("")).attr("href"))?SETUPS.get("nemo.url.dpu")+i:SETUPS.get("nemo.url.dpu")+a.currentCancelLink),a.eventBus.emit(r.appEvents.CONFLICT_CLOSE,{url:n,action:o}),a.closeLayer()},a.openSelectedSolutionAlternatives=function(){var t;a.previousSelectedSolution&&(t=jQuery("[data-solution-id='"+a.previousSelectedSolution+"']"),a.previousSelectedSolution||(a.previousSelectedSolution=void 0),t.addClass(a.oDefaults.sClassConflictSolutionShow))},a.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},s.handleConflict=function(t){return new Promise((function(e,n){var r=a.mergeData(t,i.a.getSpecialFamilies()||{},i.a.getItems()),s=o.template.render('{{##def.options_tiles:\n<ul class="nm-options-list nm-options-tiles">\n\t<li>\n\t\t<span class="nm-el-pg nm-el-pg-03 nm-at-pg-b">{{=p.header}}</span>\n\n\t\t<div class="nm-tile-block">\n\n\t\t\t<ul class="nm-tile-list clearfix">\n\n\t\t\t{{~ p.items :value:i }}\n\t\t\t\t\t<li class="nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n\t\t\t\tdata-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\t\t\t\t\t\t{{? !!value.image }}\n\t\t\t\t\t\t<div class="nm-tile-element-image">\n\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-click" href="#"><img src="{{=value.image}}" /></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{?}}\n\n\t\t\t\t\t\t<div class="nm-tile-element-info">\n\t\t\t\t\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-03">{{=value.name}}</span>\n\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t\t\t\t\t\t{{? value.price }}{{=value.price}}{{?}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t\t</ul>\n\n\t\t</div>\n\n\t</li>\n</ul>\n#}}\n\n\n{{##def.options_list:\n\x3c!-- Default options list --\x3e\n\n<ul class="nm-options-list">\n\t{{~ p.items :value:i }}\n\t<li class="nm-check-list-item nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n\tdata-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\n\t\t<div class="nm-options-list-cell-cb clearfix">\n\t\t\t<a class="nm-checkbox-1 nm-j-configurator-delegate-click" href="#"></a>\n\t\t</div>\n\n\t\t<div class="nm-options-cell-additional">\n\t\t\t{{? value.image }}\n\t\t\t<div class="nm-list-item-additional">\n\t\t\t\t<div class="nm-list-item-image">\n\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.image.name}}" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{{?}}\n\n\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-03">\n\t\t\t\t{{? value.type === "add" }}\n\t\t\t\t<span class="nm-conflict-add-text nm-at-pg-b">\n\t\t\t\t\t{{=window.i18n[\'conflict-layer.add-item\']}}\n\t\t\t\t</span>\n\t\t\t\t{{??}}\n\t\t\t\t<span class="nm-conflict-remove-text nm-at-pg-b">\n\t\t\t\t\t{{=window.i18n[\'conflict-layer.remove-item\']}}\n\t\t\t\t</span>\n\t\t\t\t{{?}} {{=value.name}}\n\t\t\t</span>\n\t\t</div>\n\n\t\t{{? typeof value.priceValue !== \'undefined\' && value.priceValue < 0 }} \n\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n\t\t{{??}}\n\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t{{?}}\n\t\t\t{{? value.price }}{{=value.price}}{{?}}\n\t\t</div>\n\t</li>\n\t{{~}}\n</ul>\n#}}\n\n\n<div class="nm-layer-wrapper nm-layer-wrapper-dialogue nm-layer-wrapper-conflict">\n\t<div class="nm-layer nm-layer-conflict nm-layer-conflict-default">\n\t\t<div class="nm-layer-inner">\n\t\t\t<div class="nm-layer-conflict-content clearfix">\n\t\t\t\t<div class="nm-3col cearfix">\n\t\t\t\t\t<div class="nm-module nm-md-conflict-layer" data-module="conflict-layer">\n\t\t\t\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.selection-conflict\']}}\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t{{? 0 !== it.triggers.length}}\n\t\t\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.your-selection\']}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<ul class="nm-options-list nm-conflict-trigger">\n\t\t\t\t\t\t\t{{~it.triggers :value:index}}\n\t\t\t\t\t\t\t<li class="nm-check-list-item nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n\t\t\t\t\t\t\tdata-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\t\t\t\t\t\t\t\t<a class="nm-checkbox-1 nm-j-configurator-delegate-click" href="#"></a>\n\t\t\t\t\t\t\t\t<div class="nm-options-cell-additional">\n\t\t\t\t\t\t\t\t\t<span class="nm-list-item-text nm-el-pg nm-el-pg-03">\n\t\t\t\t\t\t\t\t\t\t{{=value.name}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{{? typeof value.priceValue !== \'undefined\' && value.priceValue < 0 }} \n\t\t\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{? value.price }}{{=value.price}}{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t{{?}} {{? 0 !== it.solutions[0].length}}\n\t\t\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.mandatory-customizations\']}}:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{{~ it.solutions :p }}\n\t\t\t\t\t\t{{? !!p.id}}\n\t\t\t\t\t\t<div class="nm-conflict-solution" data-solution-id="{{=p.id}}">\n\n\t\t\t\t\t\t\t{{?!!p.sameTypeItems}}\n\t\t\t\t\t\t\t\t{{#def.options_tiles}}\n\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t{{#def.options_list}}\n\t\t\t\t\t\t\t\t{{? 1 < p.items.length}} <a href="" class="nm-j-conflict-options-show nm-el-lbl nm-el-lbl-01">\n\t\t\t\t\t\t\t\t\t<span class="nm-conflict-alternative-text-show">\n\t\t\t\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.show-alternatives\']}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="nm-conflict-alternative-text-hide">\n\t\t\t\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.hide-alternatives\']}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{?}}\n\n\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t{{~}} {{?}}\n\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-03 nm-at-pg-b nm-conflict-layer-total-price">\n\t\t\t\t\t\t\t{{=window.i18n[\'conflict-layer.overall-cutomizations\']}}: {{?\n\t\t\t\t\t\t\ttypeof it.totalPriceValue !== \'undefined\' && it.totalPriceValue\n\t\t\t\t\t\t\t< 0 }} <span class="nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t<span class="nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t\t\t\t\t\t\t{{?}} {{=it.totalPrice}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<ul class="nm-button-list clearfix">\n\t\t\t\t\t\t\t{{? !!it.urls.cancel }}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-conflict-click nm-el-btn nm-el-btn-01 nm-at-btn-inv" data-conflict="cancel"\n\t\t\t\t\t\t\t\thref="{{=it.urls.cancel}}">{{=window.i18n[\'abort-label\']}}</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{?}} {{? !!it.urls.submit }}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-j-configurator-delegate-conflict-click nm-el-btn nm-el-btn-02" data-conflict="submit"\n\t\t\t\t\t\t\t\thref="{{=it.urls.submit}}">{{=window.i18n[\'conflict-layer.label.submit\']}}</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>',r);a.openLayer("conflict-layer",s,a.debouncedConflictResolveHandler).then(e,n)}))},s.initialize=function(t){a.eventBus=t,a.legacyEventBus=jQuery("body"),a.addEvents()}},function(t,e,n){"use strict";var i=n(47),r=n(50),o=n(27),a=n(28);t.exports=n(53)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(13)("unscopables"),r=Array.prototype;null==r[i]&&n(11)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){t.exports=!n(16)&&!n(34)((function(){return 7!=Object.defineProperty(n(35)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var i=n(26);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(52);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var i=n(33),r=n(54),o=n(29),a=n(11),s=n(27),l=n(58),c=n(41),u=n(66),d=n(13)("iterator"),m=!([].keys&&"next"in[].keys()),g=function(){return this};t.exports=function(t,e,n,f,p,h,v){l(n,e,f);var y,S,C,E=function(t){if(!m&&t in _)return _[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},b=e+" Iterator",w="values"==p,D=!1,_=t.prototype,A=_[d]||_["@@iterator"]||p&&_[p],L=A||E(p),T=p?w?E("entries"):L:void 0,k="Array"==e&&_.entries||A;if(k&&(C=u(k.call(new t)))!==Object.prototype&&C.next&&(c(C,b,!0),i||"function"==typeof C[d]||a(C,d,g)),w&&A&&"values"!==A.name&&(D=!0,L=function(){return A.call(this)}),i&&!v||!m&&!D&&_[d]||a(_,d,L),s[e]=L,s[b]=g,p)if(y={values:w?L:E("values"),keys:h?L:E("keys"),entries:T},v)for(S in y)S in _||o(_,S,y[S]);else r(r.P+r.F*(m||D),e,y);return y}},function(t,e,n){var i=n(10),r=n(22),o=n(11),a=n(29),s=n(56),l=function(t,e,n){var c,u,d,m,g=t&l.F,f=t&l.G,p=t&l.S,h=t&l.P,v=t&l.B,y=f?i:p?i[e]||(i[e]={}):(i[e]||{}).prototype,S=f?r:r[e]||(r[e]={}),C=S.prototype||(S.prototype={});for(c in f&&(n=e),n)d=((u=!g&&y&&void 0!==y[c])?y:n)[c],m=v&&u?s(d,i):h&&"function"==typeof d?s(Function.call,d):d,y&&a(y,c,d,t&l.U),S[c]!=d&&o(S,c,m),h&&C[c]!=d&&(C[c]=d)};i.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,n){t.exports=n(21)("native-function-to-string",Function.toString)},function(t,e,n){var i=n(57);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var i=n(59),r=n(36),o=n(41),a={};n(11)(a,n(13)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(25),r=n(60),o=n(40),a=n(30)("IE_PROTO"),s=function(){},l=function(){var t,e=n(35)("iframe"),i=o.length;for(e.style.display="none",n(65).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;i--;)delete l.prototype[o[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[a]=t):n=l(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(24),r=n(25),o=n(38);t.exports=n(16)?Object.defineProperties:function(t,e){r(t);for(var n,a=o(e),s=a.length,l=0;s>l;)i.f(t,n=a[l++],e[n]);return t}},function(t,e,n){var i=n(17),r=n(28),o=n(62)(!1),a=n(30)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),l=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;e.length>l;)i(s,n=e[l++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var i=n(28),r=n(63),o=n(64);t.exports=function(t){return function(e,n,a){var s,l=i(e),c=r(l.length),u=o(a,c);if(t&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var i=n(39),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(39),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(10).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(17),r=n(67),o=n(30)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(37);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(7),r=n(1),o=n(3);const a=t=>{let e=new CustomEvent("configurationUpdate",{detail:t});document.dispatchEvent(e)};document.addEventListener("configurationDataRequest",()=>(async()=>{await r.polling.wait(i.a.isDataInitialized,3e4);const t=o.a.getRawConfigurationData();a(t)})())},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return exports}));var core_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),core_utils__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_utils__WEBPACK_IMPORTED_MODULE_0__),_dpu_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),core_application__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),core_application__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_application__WEBPACK_IMPORTED_MODULE_2__);const __={},exports={__:__};__.oDefaults={sSelectorOptionList:".nm-options-list",sSelectorOptionListAlternative:".nm-j-options-list-alternative",sSelectorConfiguratorContainer:".nm-configurator-container",sClassOptionListCollapsed:"nm-options-list-collapsed",sClassConfiguratorContainerShow:"nm-j-configurator-container-show",sClassConfiguratorContainerHide:"nm-j-configurator-container-hide"},__.toggleAlternativeOptions=function(t){var e=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElement(__.oDefaults.sSelectorOptionList,t.target.parentNode);core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.isElement(e)&&e.classList.toggle(__.oDefaults.sClassOptionListCollapsed)},__.getSelectedIdString=function(t,e){var n="";return e&&e.forEach((function(e){"idid"!==e&&t[e]&&t[e].status&&"11010"===t[e].status&&(n+=e)})),n},__.tilesExclusive=()=>{const exclusiveTiles=document.querySelectorAll(".nm-module-tiles-exclusive, .nm-md-tiles-exclusive");[...exclusiveTiles].forEach(element=>{const items=_dpu_api__WEBPACK_IMPORTED_MODULE_1__.a.getItems()||{},optionsIncluded=eval(element.getAttribute("data-configurator-id-included")),selectedIdString=__.getSelectedIdString(items,optionsIncluded);element.setAttribute("data-tile-selected",selectedIdString)})},__.hasSelectedItem=function(t,e){var n,i,r=e.length;for(i=0;i<r;i++)if((n=t[e[i]]||{}).status&&("11010"===n.status||"10011"===n.status))return!0;return!1},__.isHiddenByVersion=function(t){var e=!1;return __.hiddenItemsFromVersion&&null!==__.hiddenItemsFromVersion&&(e=__.hiddenItemsFromVersion.indexOf(t)>-1),e},__.isVisible=function(t,e){var n,i=!1,r=!1,o=!1;return e&&e.forEach((function(e){if(!1===i)return"idid"===e||(t[e]?(t[e].status&&"00000"!==t[e].status&&"10000"!==t[e].status&&"10010"!==t[e].status&&(r=!0),t[e].id&&!1===__.isHiddenByVersion(t[e].id)&&(o=!0),i=r&&o,!1):(!1===__.isHiddenByVersion(e)&&((n=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElement('.nm-j-configurator-item[data-configurator-id="'+e+'"]',document)).classList.contains("nm-j-configurator-status_00000")||n.classList.contains("nm-j-configurator-status_10000")||n.classList.contains("nm-j-configurator-status_10010")||(i=!0)),!1))})),i},__.isVisibleSummary=function(t,e){var n,i=!1,r=!1,o=!1;return e&&e.forEach((function(e){if(!i)return t[e]?(t[e].status&&"11000"!==t[e].status&&"00000"!==t[e].status&&"11100"!==t[e].status&&"10000"!==t[e].status&&"10010"!==t[e].status&&(r=!0),t[e].id&&!1===__.isHiddenByVersion(t[e].id)&&(o=!0),i=r&&o,!0):(!1===__.isHiddenByVersion(e)&&(n=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElement('.nm-j-configurator-item[data-configurator-id="'+e+'"]',document),!core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.isElement(n)||n.classList.contains("nm-j-configurator-status_11000")||n.classList.contains("nm-j-configurator-status_00000")||n.classList.contains("nm-j-configurator-status_11100")||n.classList.contains("nm-j-configurator-status_10000")||n.classList.contains("nm-j-configurator-status_10010")||(i=!0)),!1)})),i},__.handler=function(){const t=_dpu_api__WEBPACK_IMPORTED_MODULE_1__.a.getItems()||{};__.hiddenItemsFromVersion=_dpu_api__WEBPACK_IMPORTED_MODULE_1__.a.getHiddenItemIDsFromVersion(),__.handleConfiguratorContainer(t),__.handleConfiguratorSummary(t),__.handleEquipmentContainer(t),__.handleOptionsListContainer(t)},__.handleConfiguratorContainer=function(items){let configuratorContainer=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer);configuratorContainer.forEach((function(element){var optionsIncluded=eval(element.getAttribute("data-configurator-id-included"));!1===__.isVisible(items,optionsIncluded)?(element.classList.add(__.oDefaults.sClassConfiguratorContainerHide),element.classList.remove(__.oDefaults.sClassConfiguratorContainerShow)):(element.classList.remove(__.oDefaults.sClassConfiguratorContainerHide),element.classList.add(__.oDefaults.sClassConfiguratorContainerShow))}))},__.handleConfiguratorSummary=function(items){let configuratorContainerSummary=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer+".nm-summary-list-container");configuratorContainerSummary.forEach((function(element){let optionsIncluded=eval(element.getAttribute("data-configurator-id-included"));!1===__.isVisibleSummary(items,optionsIncluded)?(element.classList.add(__.oDefaults.sClassConfiguratorContainerHide),element.classList.remove(__.oDefaults.sClassConfiguratorContainerShow)):(element.classList.remove(__.oDefaults.sClassConfiguratorContainerHide),element.classList.add(__.oDefaults.sClassConfiguratorContainerShow))}))},__.handleEquipmentContainer=function(items){let equipmentContainers=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(".nm-j-selected-standard-equipment-container");equipmentContainers.forEach((function(container){let optionsIncluded=eval(container.getAttribute("data-configurator-id-included"));__.containsSelectedStandardEquipment(items,optionsIncluded)?(container.classList.remove(__.oDefaults.sClassConfiguratorContainerHide),container.classList.add(__.oDefaults.sClassConfiguratorContainerShow)):(container.classList.add(__.oDefaults.sClassConfiguratorContainerHide),container.classList.remove(__.oDefaults.sClassConfiguratorContainerShow))}))},__.containsSelectedStandardEquipment=function(t,e){let n=!1;return e.forEach((function(e){t[e]&&t[e].status&&"10011"===t[e].status&&(n=!0)})),n},__.handleOptionsListContainer=function(items){let optionsListContainer=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(".nm-md-options-list");optionsListContainer.forEach((function(element){let container=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(__.oDefaults.sSelectorConfiguratorContainer,element),optionsIncluded,isCollapsible,optionsList;if(0===container.length)return!0;optionsIncluded=eval(container[0].getAttribute("data-configurator-id-included")),isCollapsible=!1,container.forEach((function(t){let e=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElement(".nm-j-options-list-alternative",t);core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.isElement(e)&&!core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.isHidden(e)&&(isCollapsible=!0)})),optionsList=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getElementsArray(__.oDefaults.sSelectorOptionList,element),__.hasSelectedItem(items,optionsIncluded)&&isCollapsible?optionsList[0].classList.add(__.oDefaults.sClassOptionListCollapsed):optionsList[0].classList.remove(__.oDefaults.sClassOptionListCollapsed)}))},__.addEvents=function(){__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.CONFIG_UPDATE,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.PAGE_LOADED,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.LAYER_LOADED,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.MODELSINFO_LOAD_COMPLETE,__.handler),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.CONFIG_UPDATE,__.tilesExclusive),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.PAGE_LOADED,__.tilesExclusive),__.eventBus.on(core_application__WEBPACK_IMPORTED_MODULE_2__.appEvents.LAYER_LOADED,__.tilesExclusive),__.domEventDelegate.on("click",__.oDefaults.sSelectorOptionListAlternative,__.toggleAlternativeOptions)},exports.initialize=function(t){__.eventBus=t,__.domEventDelegate=core_utils__WEBPACK_IMPORTED_MODULE_0__.dom.getEventDelegate("body"),__.addEvents()}},function(t,e,n){var i,r,o,a=function(){var t=function(t,e){var n=t,i=l[e],r=null,o=0,a=null,s=[],c={},u=function(t,e){r=function(t){for(var e=new Array(t),n=0;n<t;n+=1){e[n]=new Array(t);for(var i=0;i<t;i+=1)e[n][i]=null}return e}(o=4*n+17),d(0,0),d(o-7,0),d(0,o-7),g(),m(),p(t,e),n>=7&&f(t),null==a&&(a=y(n,i,s)),h(a,e)},d=function(t,e){for(var n=-1;n<=7;n+=1)if(!(t+n<=-1||o<=t+n))for(var i=-1;i<=7;i+=1)e+i<=-1||o<=e+i||(r[t+n][e+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},m=function(){for(var t=8;t<o-8;t+=1)null==r[t][6]&&(r[t][6]=t%2==0);for(var e=8;e<o-8;e+=1)null==r[6][e]&&(r[6][e]=e%2==0)},g=function(){for(var t=v.getPatternPosition(n),e=0;e<t.length;e+=1)for(var i=0;i<t.length;i+=1){var o=t[e],a=t[i];if(null==r[o][a])for(var s=-2;s<=2;s+=1)for(var l=-2;l<=2;l+=1)r[o+s][a+l]=-2==s||2==s||-2==l||2==l||0==s&&0==l}},f=function(t){for(var e=v.getBCHTypeNumber(n),i=0;i<18;i+=1){var a=!t&&1==(e>>i&1);r[Math.floor(i/3)][i%3+o-8-3]=a}for(i=0;i<18;i+=1){a=!t&&1==(e>>i&1);r[i%3+o-8-3][Math.floor(i/3)]=a}},p=function(t,e){for(var n=i<<3|e,a=v.getBCHTypeInfo(n),s=0;s<15;s+=1){var l=!t&&1==(a>>s&1);s<6?r[s][8]=l:s<8?r[s+1][8]=l:r[o-15+s][8]=l}for(s=0;s<15;s+=1){l=!t&&1==(a>>s&1);s<8?r[8][o-s-1]=l:s<9?r[8][15-s-1+1]=l:r[8][15-s-1]=l}r[o-8][8]=!t},h=function(t,e){for(var n=-1,i=o-1,a=7,s=0,l=v.getMaskFunction(e),c=o-1;c>0;c-=2)for(6==c&&(c-=1);;){for(var u=0;u<2;u+=1)if(null==r[i][c-u]){var d=!1;s<t.length&&(d=1==(t[s]>>>a&1)),l(i,c-u)&&(d=!d),r[i][c-u]=d,-1==(a-=1)&&(s+=1,a=7)}if((i+=n)<0||o<=i){i-=n,n=-n;break}}},y=function(t,e,n){for(var i=C.getRSBlocks(t,e),r=E(),o=0;o<n.length;o+=1){var a=n[o];r.put(a.getMode(),4),r.put(a.getLength(),v.getLengthInBits(a.getMode(),t)),a.write(r)}var s=0;for(o=0;o<i.length;o+=1)s+=i[o].dataCount;if(r.getLengthInBits()>8*s)throw"code length overflow. ("+r.getLengthInBits()+">"+8*s+")";for(r.getLengthInBits()+4<=8*s&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*s||(r.put(236,8),r.getLengthInBits()>=8*s));)r.put(17,8);return function(t,e){for(var n=0,i=0,r=0,o=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s+=1){var l=e[s].dataCount,c=e[s].totalCount-l;i=Math.max(i,l),r=Math.max(r,c),o[s]=new Array(l);for(var u=0;u<o[s].length;u+=1)o[s][u]=255&t.getBuffer()[u+n];n+=l;var d=v.getErrorCorrectPolynomial(c),m=S(o[s],d.getLength()-1).mod(d);a[s]=new Array(d.getLength()-1);for(u=0;u<a[s].length;u+=1){var g=u+m.getLength()-a[s].length;a[s][u]=g>=0?m.getAt(g):0}}var f=0;for(u=0;u<e.length;u+=1)f+=e[u].totalCount;var p=new Array(f),h=0;for(u=0;u<i;u+=1)for(s=0;s<e.length;s+=1)u<o[s].length&&(p[h]=o[s][u],h+=1);for(u=0;u<r;u+=1)for(s=0;s<e.length;s+=1)u<a[s].length&&(p[h]=a[s][u],h+=1);return p}(r,i)};c.addData=function(t,e){var n=null;switch(e=e||"Byte"){case"Numeric":n=b(t);break;case"Alphanumeric":n=w(t);break;case"Byte":n=D(t);break;case"Kanji":n=_(t);break;default:throw"mode:"+e}s.push(n),a=null},c.isDark=function(t,e){if(t<0||o<=t||e<0||o<=e)throw t+","+e;return r[t][e]},c.getModuleCount=function(){return o},c.make=function(){if(n<1){for(var t=1;t<40;t++){for(var e=C.getRSBlocks(t,i),r=E(),o=0;o<s.length;o++){var a=s[o];r.put(a.getMode(),4),r.put(a.getLength(),v.getLengthInBits(a.getMode(),t)),a.write(r)}var l=0;for(o=0;o<e.length;o++)l+=e[o].dataCount;if(r.getLengthInBits()<=8*l)break}n=t}u(!1,function(){for(var t=0,e=0,n=0;n<8;n+=1){u(!0,n);var i=v.getLostPoint(c);(0==n||t>i)&&(t=i,e=n)}return e}())},c.createTableTag=function(t,e){t=t||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",n+='">',n+="<tbody>";for(var i=0;i<c.getModuleCount();i+=1){n+="<tr>";for(var r=0;r<c.getModuleCount();r+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+t+"px;",n+=" height: "+t+"px;",n+=" background-color: ",n+=c.isDark(i,r)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>"},c.createSvgTag=function(t,e,n,i){var r={};"object"==typeof arguments[0]&&(t=(r=arguments[0]).cellSize,e=r.margin,n=r.alt,i=r.title),t=t||2,e=void 0===e?4*t:e,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-title":null;var o,a,s,l,u=c.getModuleCount()*t+2*e,d="";for(l="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",d+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',d+=r.scalable?"":' width="'+u+'px" height="'+u+'px"',d+=' viewBox="0 0 '+u+" "+u+'" ',d+=' preserveAspectRatio="xMinYMin meet"',d+=i.text||n.text?' role="img" aria-labelledby="'+A([i.id,n.id].join(" ").trim())+'"':"",d+=">",d+=i.text?'<title id="'+A(i.id)+'">'+A(i.text)+"</title>":"",d+=n.text?'<description id="'+A(n.id)+'">'+A(n.text)+"</description>":"",d+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',d+='<path d="',a=0;a<c.getModuleCount();a+=1)for(s=a*t+e,o=0;o<c.getModuleCount();o+=1)c.isDark(a,o)&&(d+="M"+(o*t+e)+","+s+l);return d+='" stroke="transparent" fill="black"/>',d+="</svg>"},c.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var n=c.getModuleCount()*t+2*e,i=e,r=n-e;return T(n,n,(function(e,n){if(i<=e&&e<r&&i<=n&&n<r){var o=Math.floor((e-i)/t),a=Math.floor((n-i)/t);return c.isDark(a,o)?0:1}return 1}))},c.createImgTag=function(t,e,n){t=t||2,e=void 0===e?4*t:e;var i=c.getModuleCount()*t+2*e,r="";return r+="<img",r+=' src="',r+=c.createDataURL(t,e),r+='"',r+=' width="',r+=i,r+='"',r+=' height="',r+=i,r+='"',n&&(r+=' alt="',r+=A(n),r+='"'),r+="/>"};var A=function(t){for(var e="",n=0;n<t.length;n+=1){var i=t.charAt(n);switch(i){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=i}}return e};return c.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,n,i,r,o,a=1*c.getModuleCount()+2*t,s=t,l=a-t,u={"â–ˆâ–ˆ":"â–ˆ","â–ˆ ":"â–€"," â–ˆ":"â–„","  ":" "},d={"â–ˆâ–ˆ":"â–€","â–ˆ ":"â–€"," â–ˆ":" ","  ":" "},m="";for(e=0;e<a;e+=2){for(i=Math.floor((e-s)/1),r=Math.floor((e+1-s)/1),n=0;n<a;n+=1)o="â–ˆ",s<=n&&n<l&&s<=e&&e<l&&c.isDark(i,Math.floor((n-s)/1))&&(o=" "),s<=n&&n<l&&s<=e+1&&e+1<l&&c.isDark(r,Math.floor((n-s)/1))?o+=" ":o+="â–ˆ",m+=t<1&&e+1>=l?d[o]:u[o];m+="\n"}return a%2&&t>0?m.substring(0,m.length-a-1)+Array(a+1).join("â–€"):m.substring(0,m.length-1)}(e);t-=1,e=void 0===e?2*t:e;var n,i,r,o,a=c.getModuleCount()*t+2*e,s=e,l=a-e,u=Array(t+1).join("â–ˆâ–ˆ"),d=Array(t+1).join("  "),m="",g="";for(n=0;n<a;n+=1){for(r=Math.floor((n-s)/t),g="",i=0;i<a;i+=1)o=1,s<=i&&i<l&&s<=n&&n<l&&c.isDark(r,Math.floor((i-s)/t))&&(o=0),g+=o?u:d;for(r=0;r<t;r+=1)m+=g+"\n"}return m.substring(0,m.length-1)},c.renderTo2dContext=function(t,e){e=e||2;for(var n=c.getModuleCount(),i=0;i<n;i++)for(var r=0;r<n;r++)t.fillStyle=c.isDark(i,r)?"black":"white",t.fillRect(i*e,r*e,e,e)},c};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],n=0;n<t.length;n+=1){var i=t.charCodeAt(n);e.push(255&i)}return e}}).default,t.createStringToBytes=function(t,e){var n=function(){for(var n=L(t),i=function(){var t=n.read();if(-1==t)throw"eof";return t},r=0,o={};;){var a=n.read();if(-1==a)break;var s=i(),l=i()<<8|i();o[String.fromCharCode(a<<8|s)]=l,r+=1}if(r!=e)throw r+" != "+e;return o}(),i="?".charCodeAt(0);return function(t){for(var e=[],r=0;r<t.length;r+=1){var o=t.charCodeAt(r);if(o<128)e.push(o);else{var a=n[t.charAt(r)];"number"==typeof a?(255&a)==a?e.push(a):(e.push(a>>>8),e.push(255&a)):e.push(i)}}return e}};var e,n,i,r=1,o=2,a=4,s=8,l={L:1,M:0,Q:3,H:2},c=0,u=1,d=2,m=3,g=4,f=5,p=6,h=7,v=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(n={}).getBCHTypeInfo=function(t){for(var e=t<<10;i(e)-i(1335)>=0;)e^=1335<<i(e)-i(1335);return 21522^(t<<10|e)},n.getBCHTypeNumber=function(t){for(var e=t<<12;i(e)-i(7973)>=0;)e^=7973<<i(e)-i(7973);return t<<12|e},n.getPatternPosition=function(t){return e[t-1]},n.getMaskFunction=function(t){switch(t){case c:return function(t,e){return(t+e)%2==0};case u:return function(t,e){return t%2==0};case d:return function(t,e){return e%3==0};case m:return function(t,e){return(t+e)%3==0};case g:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case f:return function(t,e){return t*e%2+t*e%3==0};case p:return function(t,e){return(t*e%2+t*e%3)%2==0};case h:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},n.getErrorCorrectPolynomial=function(t){for(var e=S([1],0),n=0;n<t;n+=1)e=e.multiply(S([1,y.gexp(n)],0));return e},n.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case r:return 10;case o:return 9;case a:case s:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case r:return 12;case o:return 11;case a:return 16;case s:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case r:return 14;case o:return 13;case a:return 16;case s:return 12;default:throw"mode:"+t}}},n.getLostPoint=function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i+=1)for(var r=0;r<e;r+=1){for(var o=0,a=t.isDark(i,r),s=-1;s<=1;s+=1)if(!(i+s<0||e<=i+s))for(var l=-1;l<=1;l+=1)r+l<0||e<=r+l||0==s&&0==l||a==t.isDark(i+s,r+l)&&(o+=1);o>5&&(n+=3+o-5)}for(i=0;i<e-1;i+=1)for(r=0;r<e-1;r+=1){var c=0;t.isDark(i,r)&&(c+=1),t.isDark(i+1,r)&&(c+=1),t.isDark(i,r+1)&&(c+=1),t.isDark(i+1,r+1)&&(c+=1),0!=c&&4!=c||(n+=3)}for(i=0;i<e;i+=1)for(r=0;r<e-6;r+=1)t.isDark(i,r)&&!t.isDark(i,r+1)&&t.isDark(i,r+2)&&t.isDark(i,r+3)&&t.isDark(i,r+4)&&!t.isDark(i,r+5)&&t.isDark(i,r+6)&&(n+=40);for(r=0;r<e;r+=1)for(i=0;i<e-6;i+=1)t.isDark(i,r)&&!t.isDark(i+1,r)&&t.isDark(i+2,r)&&t.isDark(i+3,r)&&t.isDark(i+4,r)&&!t.isDark(i+5,r)&&t.isDark(i+6,r)&&(n+=40);var u=0;for(r=0;r<e;r+=1)for(i=0;i<e;i+=1)t.isDark(i,r)&&(u+=1);return n+=Math.abs(100*u/e/e-50)/5*10},n),y=function(){for(var t=new Array(256),e=new Array(256),n=0;n<8;n+=1)t[n]=1<<n;for(n=8;n<256;n+=1)t[n]=t[n-4]^t[n-5]^t[n-6]^t[n-8];for(n=0;n<255;n+=1)e[t[n]]=n;var i={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return i}();function S(t,e){if(void 0===t.length)throw t.length+"/"+e;var n=function(){for(var n=0;n<t.length&&0==t[n];)n+=1;for(var i=new Array(t.length-n+e),r=0;r<t.length-n;r+=1)i[r]=t[r+n];return i}(),i={getAt:function(t){return n[t]},getLength:function(){return n.length},multiply:function(t){for(var e=new Array(i.getLength()+t.getLength()-1),n=0;n<i.getLength();n+=1)for(var r=0;r<t.getLength();r+=1)e[n+r]^=y.gexp(y.glog(i.getAt(n))+y.glog(t.getAt(r)));return S(e,0)},mod:function(t){if(i.getLength()-t.getLength()<0)return i;for(var e=y.glog(i.getAt(0))-y.glog(t.getAt(0)),n=new Array(i.getLength()),r=0;r<i.getLength();r+=1)n[r]=i.getAt(r);for(r=0;r<t.getLength();r+=1)n[r]^=y.gexp(y.glog(t.getAt(r))+e);return S(n,0).mod(t)}};return i}var C=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var n={};return n.totalCount=t,n.dataCount=e,n},n={};return n.getRSBlocks=function(n,i){var r=function(e,n){switch(n){case l.L:return t[4*(e-1)+0];case l.M:return t[4*(e-1)+1];case l.Q:return t[4*(e-1)+2];case l.H:return t[4*(e-1)+3];default:return}}(n,i);if(void 0===r)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+i;for(var o=r.length/3,a=[],s=0;s<o;s+=1)for(var c=r[3*s+0],u=r[3*s+1],d=r[3*s+2],m=0;m<c;m+=1)a.push(e(u,d));return a},n}(),E=function(){var t=[],e=0,n={getBuffer:function(){return t},getAt:function(e){var n=Math.floor(e/8);return 1==(t[n]>>>7-e%8&1)},put:function(t,e){for(var i=0;i<e;i+=1)n.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return e},putBit:function(n){var i=Math.floor(e/8);t.length<=i&&t.push(0),n&&(t[i]|=128>>>e%8),e+=1}};return n},b=function(t){var e=r,n=t,i={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,i=0;i+2<e.length;)t.put(o(e.substring(i,i+3)),10),i+=3;i<e.length&&(e.length-i==1?t.put(o(e.substring(i,i+1)),4):e.length-i==2&&t.put(o(e.substring(i,i+2)),7))}},o=function(t){for(var e=0,n=0;n<t.length;n+=1)e=10*e+a(t.charAt(n));return e},a=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return i},w=function(t){var e=o,n=t,i={getMode:function(){return e},getLength:function(t){return n.length},write:function(t){for(var e=n,i=0;i+1<e.length;)t.put(45*r(e.charAt(i))+r(e.charAt(i+1)),11),i+=2;i<e.length&&t.put(r(e.charAt(i)),6)}},r=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return i},D=function(e){var n=a,i=t.stringToBytes(e),r={getMode:function(){return n},getLength:function(t){return i.length},write:function(t){for(var e=0;e<i.length;e+=1)t.put(i[e],8)}};return r},_=function(e){var n=s,i=t.stringToBytesFuncs.SJIS;if(!i)throw"sjis not supported.";!function(t,e){var n=i("å‹");if(2!=n.length||38726!=(n[0]<<8|n[1]))throw"sjis not supported."}();var r=i(e),o={getMode:function(){return n},getLength:function(t){return~~(r.length/2)},write:function(t){for(var e=r,n=0;n+1<e.length;){var i=(255&e[n])<<8|255&e[n+1];if(33088<=i&&i<=40956)i-=33088;else{if(!(57408<=i&&i<=60351))throw"illegal char at "+(n+1)+"/"+i;i-=49472}i=192*(i>>>8&255)+(255&i),t.put(i,13),n+=2}if(n<e.length)throw"illegal char at "+(n+1)}};return o},A=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,n,i){n=n||0,i=i||t.length;for(var r=0;r<i;r+=1)e.writeByte(t[r+n])},writeString:function(t){for(var n=0;n<t.length;n+=1)e.writeByte(t.charCodeAt(n))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var n=0;n<t.length;n+=1)n>0&&(e+=","),e+=t[n];return e+="]"}};return e},L=function(t){var e=t,n=0,i=0,r=0,o={read:function(){for(;r<8;){if(n>=e.length){if(0==r)return-1;throw"unexpected end of file./"+r}var t=e.charAt(n);if(n+=1,"="==t)return r=0,-1;t.match(/^\s$/)||(i=i<<6|a(t.charCodeAt(0)),r+=6)}var o=i>>>r-8&255;return r-=8,o}},a=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return o},T=function(t,e,n){for(var i=function(t,e){var n=t,i=e,r=new Array(t*e),o={setPixel:function(t,e,i){r[e*n+t]=i},write:function(t){t.writeString("GIF87a"),t.writeShort(n),t.writeShort(i),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(n),t.writeShort(i),t.writeByte(0);var e=a(2);t.writeByte(2);for(var r=0;e.length-r>255;)t.writeByte(255),t.writeBytes(e,r,255),r+=255;t.writeByte(e.length-r),t.writeBytes(e,r,e.length-r),t.writeByte(0),t.writeString(";")}},a=function(t){for(var e=1<<t,n=1+(1<<t),i=t+1,o=s(),a=0;a<e;a+=1)o.add(String.fromCharCode(a));o.add(String.fromCharCode(e)),o.add(String.fromCharCode(n));var l=A(),c=function(t){var e=t,n=0,i=0,r={write:function(t,r){if(t>>>r!=0)throw"length over";for(;n+r>=8;)e.writeByte(255&(t<<n|i)),r-=8-n,t>>>=8-n,i=0,n=0;i|=t<<n,n+=r},flush:function(){n>0&&e.writeByte(i)}};return r}(l);c.write(e,i);var u=0,d=String.fromCharCode(r[u]);for(u+=1;u<r.length;){var m=String.fromCharCode(r[u]);u+=1,o.contains(d+m)?d+=m:(c.write(o.indexOf(d),i),o.size()<4095&&(o.size()==1<<i&&(i+=1),o.add(d+m)),d=m)}return c.write(o.indexOf(d),i),c.write(n,i),c.flush(),l.toByteArray()},s=function(){var t={},e=0,n={add:function(i){if(n.contains(i))throw"dup key:"+i;t[i]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return n};return o}(t,e),r=0;r<e;r+=1)for(var o=0;o<t;o+=1)i.setPixel(o,r,n(o,r));var a=A();i.write(a);for(var s=function(){var t=0,e=0,n=0,i="",r={},o=function(t){i+=String.fromCharCode(a(63&t))},a=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return r.writeByte=function(i){for(t=t<<8|255&i,e+=8,n+=1;e>=6;)o(t>>>e-6),e-=6},r.flush=function(){if(e>0&&(o(t<<6-e),t=0,e=0),n%3!=0)for(var r=3-n%3,a=0;a<r;a+=1)i+="="},r.toString=function(){return i},r}(),l=a.toByteArray(),c=0;c<l.length;c+=1)s.writeByte(l[c]);return s.flush(),"data:image/gif;base64,"+s};return t}();a.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}(t)},r=[],void 0===(o="function"==typeof(i=function(){return a})?i.apply(e,r):i)||(t.exports=o)},,,,,,function(t,e,n){"use strict";n.r(e),n.d(e,"audicode",(function(){return p})),n.d(e,"AUDICODE_STORE_ID",(function(){return u.a})),n.d(e,"ave2cloud",(function(){return S})),n.d(e,"aveApi",(function(){return k})),n.d(e,"aveDom",(function(){return L})),n.d(e,"carlineMapping",(function(){return j.a})),n.d(e,"cart",(function(){return K})),n.d(e,"CONFIGURATION_STORE_ID",(function(){return J.a})),n.d(e,"container",(function(){return at.a})),n.d(e,"domState",(function(){return lt})),n.d(e,"dpuApi",(function(){return l.a})),n.d(e,"dpuConflict",(function(){return ct.a})),n.d(e,"dpuController",(function(){return h.a})),n.d(e,"dpuModel",(function(){return ut.a})),n.d(e,"dpuSearch",(function(){return pt})),n.d(e,"dpuTransfer",(function(){return ht.a})),n.d(e,"equipmentSearch",(function(){return At})),n.d(e,"expertmode",(function(){return Tt})),n.d(e,"formCore",(function(){return Yt})),n.d(e,"formField",(function(){return Pt})),n.d(e,"formGroup",(function(){return zt})),n.d(e,"formItem",(function(){return Bt})),n.d(e,"formSelect",(function(){return Kt})),n.d(e,"formSimple",(function(){return Zt})),n.d(e,"hiddenVersionItems",(function(){return ee})),n.d(e,"infobox",(function(){return ie})),n.d(e,"inlinerendering",(function(){return se})),n.d(e,"inlinerenderingAoz",(function(){return oe})),n.d(e,"lastConfiguration",(function(){return ce})),n.d(e,"loadingIndicator",(function(){return Se})),n.d(e,"mediaLibrary",(function(){return de})),n.d(e,"pattern",(function(){return Fe})),n.d(e,"patternAudicode",(function(){return we})),n.d(e,"patternCarlineId",(function(){return _e})),n.d(e,"patternConfiguration",(function(){return Le})),n.d(e,"patternLanguage",(function(){return ke})),n.d(e,"patternLeadsource",(function(){return xe})),n.d(e,"patternPartnerId",(function(){return Oe})),n.d(e,"patternPrString",(function(){return je})),n.d(e,"patternVehicleId",(function(){return Be})),n.d(e,"pdfServiceLink",(function(){return Qe})),n.d(e,"preconfigurationTeaser",(function(){return Ve})),n.d(e,"preconfsTeaser",(function(){return We})),n.d(e,"recommendations",(function(){return $e})),n.d(e,"renderinginjector",(function(){return Ze})),n.d(e,"scsAttributesInitial",(function(){return en})),n.d(e,"scsMatching",(function(){return an})),n.d(e,"scsMatchingBasket",(function(){return rn})),n.d(e,"setFlagsSearch",(function(){return un})),n.d(e,"startlayer",(function(){return sn.a})),n.d(e,"summaryTechdata",(function(){return mn})),n.d(e,"tooltip",(function(){return Sn})),n.d(e,"userConfigurations",(function(){return Cn.a})),n.d(e,"USERDATA_STORE_ID",(function(){return d})),n.d(e,"visializer",(function(){return bn})),n.d(e,"vtp",(function(){return Dn})),n.d(e,"wallet",(function(){return In})),n.d(e,"EngineDisclaimerLayerElement",(function(){return xn})),n.d(e,"yourPayment",(function(){return On})),n.d(e,"zipDownload",(function(){return Rn}));var r=n(0),o=n(70),a=n.n(o),s=n(1),l=n(2),c=n(4),u=n(14);const d="dbadUserdataStore";class m{constructor(){return m.instance||(this._initStore(),m.instance=this),m.instance}_initStore(){const t={update:this._update,logout:this._logout};c.stateRegistry.addStore(d,{audicodes:null,loggedIn:null,csrfToken:null},t)}_update(t,e){return{...t,...e}}_logout(t){return{...t,audicodes:null,loggedIn:!1,csrfToken:null}}}const g=new m;Object.freeze(g);const f={},p={__:f};f.audicode=null,f.eventBus=null,f.selectors={audicodeLink:".nm-j-audicode-link"},f.clickCallback=function(t){t.preventDefault();const e=s.dom.closest(t.target,f.selectors.audicodeLink);if("_blank"===e.getAttribute("target")){const t=window.open("","_blank");f.clickAudicodeLink(e,t)}else f.clickAudicodeLink(e,window)},f.addEvents=function(){f.eventBus.addListener(r.appEvents.CONFIG_UPDATE,f.deleteAudicode),f.eventBus.addListener(r.appEvents.LAYER_LOADED,f.onLayerLoaded),f.eventBus.addListener(r.appEvents.LAYER_LOADED,f.removeAudiCodeHref),f.eventBus.addListener(r.appEvents.PAGE_LOADED,f.removeAudiCodeHref),f.legacyEventBus.on("click",f.selectors.audicodeLink,f.clickCallback)},f.removeEvents=function(){f.eventBus.removeListener(r.appEvents.CONFIG_UPDATE,f.deleteAudicode),f.eventBus.removeListener(r.appEvents.LAYER_LOADED,f.onLayerLoaded),f.eventBus.removeListener(r.appEvents.LAYER_LOADED,f.removeAudiCodeHref),f.eventBus.removeListener(r.appEvents.PAGE_LOADED,f.removeAudiCodeHref),f.legacyEventBus.off("click",f.selectors.audicodeLink,f.clickCallback)},f.deleteAudicode=function(){f.audicode=null,c.stateRegistry.triggerAction(u.a,"invalidate"),f.eventBus.emit(r.appEvents.AUDICODE_DELETED)},f.loadAudiCodeRequest=async function(t){const e=l.a.getDpuUrl()+"audicode?"+new URLSearchParams({context:l.a.getContext(),subsession:l.a.getSubsessionID()||"",ids:t||l.a.getPrString()}).toString();return fetch(e,{credentials:"include"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).catch(t=>console.log("Error fetching AudiCode - server responded with: ",t))},f.hasAudicode=function(t){return!!t&&!!t.header&&200===t.header.statuscode&&t.audicode&&!!t.audicode.id},p.loadAudiCode=function(){return new Promise((function(t,e){f.audicode&&f.prString&&f.prString===l.a.getPrString()?(f.updateAudicodeStore(),t(f.audicode)):(f.audicode=null,f.loadAudiCodeRequest().then((function(n){f.hasAudicode(n)?(f.audicode=n.audicode.id,f.updateAudicodeStore(),n.header.subsession&&l.a.setSubsessionID(n.header.subsession),f.prString=l.a.getPrString(),f.eventBus.emit(r.appEvents.AUDICODE_SUCCESS),t(f.audicode)):(f.eventBus.emit(r.appEvents.AUDICODE_FAILED),e(new TypeError("load AudiCode failed")))}),(function(t){console.error(t),f.eventBus.emit(r.appEvents.AUDICODE_FAILED),e(new TypeError("load AudiCode error: "+t.message))})))}))},f.isAudicodeFieldOnPage=function(){return s.dom.isElement(".nm-j-audicode")},p.getAudicode=function(){return f.audicode},f.onLayerLoaded=function(){if(f.isAudicodeFieldOnPage()){const t=f.getAudicodeFromUrl();t?(f.audicode=t,f.updateAudicodeStore(),f.updateAudicodeDomElements(),f.removeAudicodeFromUrl()):p.loadAudiCode().then(f.updateAudicodeDomElements).catch((function(t){f.error(t)}))}},f.getAudicodeFromUrl=()=>new URL(window.location.href).searchParams.get("audicode"),f.removeAudicodeFromUrl=()=>{const t=new URL(window.location.href);t.searchParams.delete("audicode"),window.history.replaceState({},document.title,t.href)},f.updateAudicodeStore=()=>{c.stateRegistry.triggerAction(u.a,"update",{audicode:f.audicode})},f.updateAudicodeDomElements=function(){f.audicode&&(f.generateQrCode(),s.dom.getElementsArray(".nm-j-audicode").forEach(t=>t.innerHTML=f.audicode),s.dom.getElementsArray(".nm-j-audicode-show").forEach(t=>t.classList.remove("nm-j-audicode-failure","nm-j-audicode-loading")),c.stateRegistry.triggerAction(d,"update",{currentAudicode:f.audicode}))},f.generateQrCode=function(){const t=s.dom.getElement(".nm-j-audicode-qrcode");let e,n;s.dom.isElement(t)&&(t.innerHTML="",e=t.getAttribute("data-qr-url"),n=new a.a(4,"L"),n.addData(e+f.audicode),n.make(),t.innerHTML=n.createSvgTag(4,0))},f.clickAudicodeLink=function(t,e){null===f.audicode?p.loadAudiCode().then((function(){f.setAudiCodeUrlAsLocation(t,e)})).catch((function(t){f.error(t)})):f.setAudiCodeUrlAsLocation(t,e)},f.setAudiCodeUrlAsLocation=function(t,e){let n;n=t.getAttribute("data-link-pattern"),n=n.replace("{{=audicode}}",f.audicode),e.location.href=n},f.removeAudiCodeHref=function(){document.querySelectorAll(f.selectors.audicodeLink).forEach(t=>{t.removeAttribute("href")})},f.error=function(t){s.dom.getElement(".nm-j-audicode-show").classList.add("nm-j-audicode-failure"),console.log(t)},p.initialize=function(t){f.eventBus=t,f.legacyEventBus=s.dom.getEventDelegate("body"),f.removeAudiCodeHref(),f.addEvents()};var h=n(7);class v extends r.ModalLayerContentBase{constructor(t={}){super(),this._closeLayer=this._closeLayer.bind(this);const e=t.dataset.configuration["audicode-rescue-info"];this.data={data:t.dataset,whatIsChanged:this._getIsWhatChanged(t.dataset.rescueMessages),pdfLink:this._getPdfLink(e)}}static get type(){return"AudicodeRescueLayerElement"}static async getContent(t){return new v(t)}connectedCallback(){this._render(),this.addEvents(),h.a.resetAudicodeRescueInfo()}addEvents(){[...this.querySelectorAll(".j-close")].map(t=>t.addEventListener("click",this._closeLayer))}_getIsWhatChanged(t){return t.join(", ")}_getPdfLink(t){return SETUPS.get("scope.nemo.audicode.not_valid_pdflink")?SETUPS.get("nemo.pdf.url")+"/audicode/"+t.audicode:""}_closeLayer(t){t&&(t.preventDefault(),t.stopPropagation()),this._triggerClose()}_render(){this.innerHTML=s.template.render('\n{{?!!it.data.configuration.extColorCode && !!it.data.configuration.extColorCode.selected}}\n\t{{var selected = it.data.configuration.extColorCode.selected;}}\n\t{{var backgroundcolor = \'extcolor--\' + selected;}}\n\t{{var textcolor = \'extcolor-text--\' + selected;}}\n{{??}}\n\t{{var selected = "";}}\n\t{{var backgroundcolor = "";}}\n\t{{var textcolor = "";}}\n{{?}}\n<div class="rescue-audicode">\n\t<div class="rescue-audi__close">\n\t\t<div class="nm-layer__close-button j-close" style="display: inline-flex;">\n\t\t\t<svg class="nm-layer__close-button-icon">\n\t\t\t\t<use xlink:href="{{=SETUPS.get(\'coreci.url.assets\')}}/icons/svg/cancel-newci-large.svg#audi-icon-cancel-newci-large"></use>\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\t<div class="{{=textcolor}}">\n\t\t<div class="rescue-audicode__text-container {{=backgroundcolor}}">\n\t\t\t<p class="rescue-audicode__audicode audi-copy-s">{{=window.i18n[\'audicode.rescue.your_audicode\']}} {{=it.data.configuration[\'audicode-rescue-info\'].audicode}}</p>\n\t\t\t<h3 class="rescue-audicode__carline audi-headline-order-3">{{=it.data.configuration.carlineName}}</h3>\n\t\t\t<p class="rescue-audicode__description audi-copy-s">{{=it.data.configuration.description}}</p>\n\t\t\t<p class="rescue-audicode__price audi-copy-m">{{=it.data.configuration.prices.total}}</p>\n\t\t</div>\n\t\t<div class="rescue-audicode__image-container">\n\t\t\t<div class="rescue-audicode__image-background {{=backgroundcolor}}"></div>\n\t\t\t<div class="rescue-audicode__image-picture">\n                {{?!!it.data.images && it.data.images[\'exterior\'] && it.data.images[\'exterior\'][\'flyout\']}}\n                    <picture>\n                        <source media="(max-width: 427px)" srcset="{{=SETUPS.get(\'nemo.url.mediaservice\')}}{{=it.data.images[\'exterior\'][\'flyout\']}}?imwidth=470">\n                        <img class="rescue-audicode__image" src="{{=SETUPS.get(\'nemo.url.mediaservice\')}}{{=it.data.images[\'exterior\'][\'flyout\']}}?imwidth=654">\n                    </picture>\n                {{??}}\n                    <img class="rescue-audicode__image" src="{{=SETUPS.get(\'nemo.url.assets\')+"/img/fallback/fb-audicode-flyout.png"}}" alt="Fallback Image">\n                {{?}}\n            </div>\n\t\t</div>\n\t</div>\n\n\t<div class="rescue-audicode__text-options-container">\n\t\t<p class="rescue-audicode__options_text audi-copy-m">{{=window.i18n[\'audicode.rescue.cant_load_audicode\']}}</p>\n\t\t<p class="rescue-audicode__options-changed audi-copy-s">\n\t\t\t{{=window.i18n[\'audicode.rescue.alternative_configuration\']}}<br/>\n\t\t\t{{=it.whatIsChanged}}\n\t\t</p>\n\n\t\t<a href="#" class="rescue-audicode__options-load-configuration audi-link-m audi-link--arrow j-close">{{=window.i18n[\'audicode.rescue.load_alternative_configuration\']}}</a><br />\n\t\t{{?it.pdfLink}}\n\t\t\t<a href="{{=it.pdfLink}}" class="rescue-audicode__options-pdf audi-link-m audi-link--arrow">{{=window.i18n[\'audicode.rescue.pdf\']}}</a>\n\t\t{{?}}\n\n\t\t{{? !SETUPS.get(\'scope.nemo.hide.consumption-entries\')}}\n\t\t\t<div class="rescue-audicode__disclaimer-entries audi-copy-s">\n\t\t\t\t{{? it.data.configuration.techdata && (it.data.configuration.techdata[\'consumption-combined\'] || it.data.configuration.techdata[\'carbon-dioxide-emissions\'] || it.data.configuration.techdata[\'efficiency-class\'])}}\n\t\t\t\t\t{{? it.data.configuration.techdata[\'consumption-combined\']}}\n\t\t\t\t\t\t<dl class="rescue-audicode__disclaimer">\n\t\t\t\t\t\t\t<dt class="rescue-audicode__disclaimer-label">{{=window.i18n[\'nemo.ui.consumption-combined\']}}*:</dt>\n\t\t\t\t\t\t\t<dd class="rescue-audicode__disclaimer-value">{{=it.data.configuration.techdata[\'consumption-combined\']}}</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? it.data.configuration.techdata[\'carbon-dioxide-emissions\']}}\n\t\t\t\t\t\t<dl class="rescue-audicode__disclaimer">\n\t\t\t\t\t\t\t<dt class="rescue-audicode__disclaimer-label">{{=window.i18n[\'nemo.ui.emission-combined\']}}*:</dt>\n\t\t\t\t\t\t\t<dd class="rescue-audicode__disclaimer-value">{{=it.data.configuration.techdata[\'carbon-dioxide-emissions\']}}</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? !SETUPS.get(\'scope.nemo.hide.eec-entry\')}}\n\t\t\t\t\t\t{{? it.data.configuration.techdata[\'efficiency-class\']}}\n\t\t\t\t\t\t\t<dl class="rescue-audicode__disclaimer">\n\t\t\t\t\t\t\t\t<dt class="rescue-audicode__disclaimer-label">{{=window.i18n[\'nemo.ui.efficiency-class\']}}:</dt>\n\t\t\t\t\t\t\t\t<dd class="rescue-audicode__disclaimer-value">{{=it.data.configuration.techdata[\'efficiency-class\']}}</dd>\n\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t{{?}}\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t{{?}}\n\n\t</div>\n</div>',this.data)}}r.modalLayer.registerLayerType(v),void 0===window.customElements.get("audi-audicode-rescue-layer-element")&&window.customElements.define("audi-audicode-rescue-layer-element",v);const y={},S={__:y};y.isAve2CloudAvailable=!1,y.containerId="avecanvas";const C=()=>{if(console.log("AVE2Cloud updateStreamResolution"),y.controllerFactory){const t=document.getElementById(y.containerId);y.controllerFactory.getUIAndApiController(e=>{e.updateSize(null,t.clientHeight)})}},E=()=>{window.addEventListener("resize",C)},b=()=>{console.log("AVE2Cloud closeLayerHandler"),y.controllerFactory&&y.controllerFactory.getUIAndApiController(t=>{t.close()}),window.removeEventListener("resize",C)},w=()=>{y.controllerFactory=new Ave2CloudApplication.ControllerFactory,y.controllerFactory.getUIAndApiController((t,e)=>{e.getFreeInstances().then(t=>{t.freeInstances>=1?(y.isAve2CloudAvailable=!0,console.log("AVE2Cloud: freeInstances: ",t.freeInstances)):console.log("AVE2Cloud: No free sessions")}).catch(t=>{console.error(t,"getFreeInstances")})})},D=()=>{console.log("AVE2Cloud connectToStream");const t=document.getElementById(y.containerId);t.classList.add("ave2cloud-container");const e={connectionParameters:{protocol:document.location.protocol.indexOf("https")>-1?"https":"http",customer:SETUPS.get("ave3d.customer")||"audi",environment:SETUPS.get("ave3d.env")||"live"},car:{manufacturer:"audi",model:l.a.getCarline(),year:l.a.getModelYear()},consumeMouseScrollEvents:!0,resolution:{x:t.clientWidth,y:t.clientHeight},setupCamera:"MRV1",setupPrCodes:l.a.getAveString().split(","),market:SETUPS.get("ave2cloud.market"),service:"web"};console.log("AVE2Cloud webSiteCar",JSON.stringify(e)),y.controllerFactory.getUIAndApiController((n,i)=>{n.connect(e,y.containerId),n.on(t=>{console.log(t,"view-event"),"AVEConnected"===t&&i.loadCar(e)}),i.on(e=>{console.log(e.message,"api-event"),"LoadCarFinish"===e.message&&(n.updateSize(null,t.clientHeight),t.classList.add("ave2cloud-container--ready"))})})},_=()=>{y.eventBus.on(r.appEvents.CARINFO_LOAD_COMPLETE,w),y.eventBus.on(r.appEvents.CONFIG_UPDATE,w),y.eventBus.on("AVE2CLOUD.CONTAINER.READY",D),y.eventBus.on(r.appEvents.RENDERINGLAYER_LOADED,E),y.eventBus.on("jslayer.close",b)};S.isAve2CloudAvailable=()=>y.isAve2CloudAvailable,S.isAve2CloudEnabled=()=>SETUPS.get("ave2cloud.enabled"),S.initialize=t=>{if(y.eventBus=t,S.isAve2CloudEnabled()){console.log("AVE2Cloud initialize");const t=SETUPS.get("ave2cloud.url");s.jsLoader.loadURL(t).then(_)}};const A={},L={__:A};window.i18n=window.i18n||{},A.optionMappings={Trunk:window.i18n["rendering-layer.option-trunk"],Doors:window.i18n["rendering-layer.option-doors"],MMI:window.i18n["rendering-layer.option-mmi"],RTTVoid:window.i18n["rendering-layer.option-env-grey"],WhiteVoid:window.i18n["rendering-layer.option-env-white"],Tunnel_Env:window.i18n["rendering-layer.option-Tunnel_Env"],Iceland_Void:window.i18n["rendering-layer.option-Iceland_Void"],SoftTop:window.i18n["rendering-layer.option-SoftTop"]},A.oDefaults={sClassHidden:"nm-hidden",sClassActive:"nm-active",sClassSelectorClosed:"nm-icon-expand-white",sClassSelectorOpen:"nm-icon-collapse-white",sSelectorOptionsSelectorWrapper:".nm-ave-animation-selector-wrapper",sSelectorOptionsSelector:".nm-ave-animation-selector",sSelectorActive3dContainer:".nm-md-ave-container",sSelectorStreamWrapper:"#streamWrapper"},L.renderAnimationControls=function(t){var e,n,i="",r=Object.keys(A.optionMappings);for(e=0,n=r.length;e<n;e++)t.indexOf(r[e])>-1&&(i+=A.renderAnimationOption(r[e],A.optionMappings[r[e]]));return i},L.renderEnvironmentControls=function(t){var e,n,i="",r=Object.keys(A.optionMappings);for(e=0,n=r.length;e<n;e++)t.indexOf(r[e])>-1&&(i+=A.renderEnvironmentOption(r[e],A.optionMappings[r[e]]));return i},L.enableOptions=function(){s.dom.getElement(A.oDefaults.sSelectorOptionsSelector).classList.remove(A.oDefaults.sClassHidden),s.dom.getEventDelegate("body").off("click",A.oDefaults.sSelectorOptionsSelectorWrapper,A.handlerAnimationSelectorClick),s.dom.getEventDelegate("body").on("click",A.oDefaults.sSelectorOptionsSelectorWrapper,A.handlerAnimationSelectorClick)},A.renderAnimationOption=function(t,e){return'<li class="nm-avectrl-animation animation-option nm-el-lbl nm-el-lbl-01 nm-at-lbl-b" data-animation="'+t+'">'+e+"</li>"},A.renderEnvironmentOption=function(t,e){return'<li class="nm-avectrl-environment animation-option nm-el-lbl nm-el-lbl-01 nm-at-lbl-b" data-environment="'+t+'">'+e+"</li>"},A.handlerAnimationSelectorClick=function(t){var e=s.dom.getElement(A.oDefaults.sSelectorOptionsSelector),n=s.dom.getElement(A.oDefaults.sSelectorOptionsSelectorWrapper);t.preventDefault(),e.classList.contains(A.oDefaults.sClassSelectorClosed)?(e.classList.remove(A.oDefaults.sClassSelectorClosed),e.classList.add(A.oDefaults.sClassSelectorOpen),n.classList.add("active")):(e.classList.remove(A.oDefaults.sClassSelectorOpen),e.classList.add(A.oDefaults.sClassSelectorClosed),n.classList.remove("active"))},A.stopWheel=function(t){var e;(e=t||window.event)&&e.preventDefault&&e.preventDefault(),e&&(e.returnValue=!1)},A.catchScrollWheel=function(){document.addEventListener("mousewheel",A.stopWheel),document.addEventListener("DOMMouseScroll",A.stopWheel)},A.releaseScrollWheel=function(){document.removeEventListener("mousewheel",A.stopWheel),document.removeEventListener("DOMMouseScroll",A.stopWheel)},L.activateAveCanvas=function(t){console.log("ave-dom: activate ave canvas");var e=document.getElementById(t);if(s.dom.isElement(e)){var n=document.createElement("div");n.innerHTML=s.template.render('<div class="nm-ave-animation-selector-wrapper">\n\t<div class="nm-ave-animation-selector nm-el-btn nm-el-btn-01 nm-icon-settings nm-icon-expand-white nm-hidden">\n\t\t<div class="options-text">{{=window.i18n[\'rendering-layer.options\']}}</div>\n\t</div>\n\t<ul class="nm-ave-animation-selection">\n\t\t<li class="nm-button-close">\n\t\t\t<svg class="nm-icon-cancel">\n\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/cancel.svg#nm-icon-cancel"}}></use>\n\t\t\t</svg>\n\t\t</li>\n\t</ul>\n</div>',{}),e.insertBefore(n.firstChild,e.firstChild),s.dom.getEventDelegate("body").on("mouseover","#"+t,A.catchScrollWheel),s.dom.getEventDelegate("body").on("mouseout","#"+t,A.releaseScrollWheel)}},L.resizeStreamWrapper=function(){console.log("resizeStream");var t=s.dom.getElement(A.oDefaults.sSelectorStreamWrapper);s.dom.isElement(t)&&(t.style.width="100%",t.style.height="100%",t.style.position="absolute")},L.moveAveCanvas=function(t,e){var n=document.getElementById(t),i=document.getElementById(e),r=s.dom.getElement(A.oDefaults.sSelectorOptionsSelectorWrapper,n);console.log("ave-dom: move ave canvas"),s.dom.isElement(n)&&s.dom.isElement(r)&&s.dom.isElement(i)&&(n.classList.remove(A.oDefaults.sClassActive),i.insertBefore(r,i.firstChild),s.dom.getEventDelegate("body").on("mouseover","#"+e,A.catchScrollWheel),s.dom.getEventDelegate("body").on("mouseout","#"+e,A.releaseScrollWheel))},L.deactivateAveCanvas=function(t){console.info("ave-dom: deactivate ave canvas");var e=document.getElementById(t);if(s.dom.isElement(e)){for(;e.hasChildNodes();)e.removeChild(e.firstChild);s.dom.getEventDelegate("body").off("mouseover","#"+t,A.catchScrollWheel),s.dom.getEventDelegate("body").off("mouseout","#"+t,A.releaseScrollWheel)}};const T={},k={__:T};function I(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}T.oDefaults={sSelectorAnimationListSelector:".nm-ave-animation-selection"},T.debugEnabled=!0,T.zlLoaded=!1,T.zlValidated=!1,T.zlboltURL="",T.cameraMappings={closeup_lights:"FrontRightShare",closeup_wheels:"Rims",dashboard:"Interior",exterior:"MRVSide",exterior_back:"MRV4",exterior_front:"MRV1",exterior_straight_back:"MRV5",exterior_straight_front:"MRV6",interior:"InteriorSide_L0L",rearseat:"Interior_Rear_View"},T.defaultCamera="MRV1",T.zlGetCustomer=function(){const t=SETUPS.get("ave3d.customer");return T.zlLoaded||T.debug("zlbolt not yet loaded"),T.debug("zlbolt customer = "+t),t},T.zlGetEnv=function(){const t=SETUPS.get("ave3d.env");return T.zlLoaded||T.debug("zlbolt not yet loaded"),T.debug("zlbolt env = "+t),t},T.zlValidate=function(){if("undefined"!=typeof zlbolt&&!1===T.zlValidated){const t=T.buildUpValidateObject();zlbolt.validate(t,(function(t,e){e&&"valid"===e.status?(T.zlValidated=!0,T.eventBus.emit(r.appEvents.AVE_AVAILABLE)):e&&e.reason?T.debug("zl validation failed: "+e.reason):T.debug("zl validation failed")}))}else T.debug("failed zlbolt.validate")},T.zlSetReady=function(){T.debug("zlbolt loaded"),T.zlLoaded=!0,T.zlValidate()},T.prepareZLboltURL=function(){const t=SETUPS.get("ave3d.url");T.debug("zlbolt url = "+t),T.zlboltURL=t},T.zlSetAveString=function(t){T.zlLoaded?zlbolt.setPrCodes(t,(function(t){T.debug("set prcodes with msg: ",t)})):T.debug("zlbolt not yet loaded")},T.zlDisconnect=function(t,e){if(T.zlLoaded&&"undefined"!=typeof zlbolt&&!0===T.isConnected){T.debug("disconnect from zlbolt");try{zlbolt.disconnect((function(){t(e)}))}catch(n){T.debug("zl exception on disconnect: "+n),t(e)}T.isConnected=!1}else t(e)},T.zlActivateCamera=function(t){const e=T.cameraMappings[t];zlbolt.switchCamera(e,(function(t){T.debug("switched camera to "+e+" with result",t)}))},T.zlSetConnectCallbacks=function(t,e){zlbolt.isSupported((function(n,i){if(n||!i)return T.debug("zl this browser is not supported"),!1;zlbolt.connect(T.buildUpConnectObject(t,e),(function(t){t?(T.debug("zlbolt connect exited in error state: ",t),T.isConnected=!1):(T.debug("zlbolt connected"),T.isConnected=!0)}))})),zlbolt.onStreamReady=function(){!0===T.streamActive&&T.debug("stream already active - possible side effect"),T.streamActive=!0,T.isConnected=!0,T.eventBus.on(r.appEvents.CONFIG_UPDATE,T.handlerConfigUpdated),T.zlBuildOptionsControl(),zlbolt.enableMouseTracking(),window.addEventListener("resize",L.resizeStreamWrapper),T.dispatchStreamReadyEvent(),L.resizeStreamWrapper()},zlbolt.onMouseUp=function(t){T.debug("mouse up with x:"+t.x+" and y:"+t.y)},zlbolt.onError=function(t){T.debug("zlbolt Error: ",t)},zlbolt.onStreamDisconnect=function(){T.debug("zlbolt StreamDisconnect"),T.eventBus.off(r.appEvents.CONFIG_UPDATE,T.handlerConfigUpdated),window.removeEventListener("resize",L.resizeStreamWrapper),T.streamActive=!1},zlbolt.onClose=function(){T.debug("zlbolt stream close"),T.streamActive=!1}},T.zlConnect=function(t,e){return T.zlLoaded?"undefined"==typeof zlbolt?(T.debug("failed zlConnect"),!1):(T.debug("zlbolt StreamReady"),void T.zlSetConnectCallbacks(t,e)):(T.debug("zlbolt not yet loaded"),!1)},T.zlBuildOptionsControl=function(){T.debug("build options control"),zlbolt.enumerateAnimations((function(t){const e=s.dom.getElement(T.oDefaults.sSelectorAnimationListSelector),n=document.createElement("div");if(s.dom.isElement(e))for(n.innerHTML=L.renderAnimationControls(t.animations);n.firstChild;)e.appendChild(n.firstChild);s.dom.getEventDelegate("body").on("click",".nm-avectrl-animation",T.zlTriggerAnimation)})),zlbolt.enumerateEnvironments((function(t){const e=s.dom.getElement(T.oDefaults.sSelectorAnimationListSelector),n=document.createElement("div");if(s.dom.isElement(e)&&t.environments.length>1){for(n.innerHTML=L.renderEnvironmentControls(t.environments);n.firstChild;)e.appendChild(n.firstChild);s.dom.getEventDelegate("body").on("click",".nm-avectrl-environment",T.zlTriggerEnvironmentChange)}})),L.enableOptions()},T.zlTriggerAnimation=function(t){const e=s.dom.closest(t.target,".nm-avectrl-animation").getAttribute("data-animation");T.debug("trigger animation "+e),zlbolt.triggerAnimation(e,(function(t){T.debug("triggered "+e+" with result",t)}))},T.zlTriggerEnvironmentChange=function(t){const e=s.dom.closest(t.target,".nm-avectrl-environment").getAttribute("data-environment");T.debug("trigger environment change "+e),zlbolt.switchEnvironment(e,(function(t){T.debug("triggered "+e+" with result",t)}))},T.handlerConfigUpdated=function(){T.zlSetAveString(l.a.getAveString().split(","))},T.mapViewPerspeciveToCamera=function(t){return t in T.cameraMappings?T.cameraMappings[t]:(T.debug("falling back to default camera from "+t),T.defaultCamera)},T.getActiveProtocol=function(){return document.location.protocol.indexOf("https")>-1?"https":"http"},T.buildUpValidateObject=function(){return{connectionParameters:{protocol:T.getActiveProtocol(),customer:T.zlGetCustomer(),environment:T.zlGetEnv()},car:{manufacturer:"audi",model:l.a.getCarline(),year:l.a.getModelYear()},consumeMouseScrollEvents:!0}},T.buildUpConnectObject=function(t,e){const n=l.a.getAveString();let i=T.buildUpValidateObject();return i.resolution={x:1112,y:668},i.parent=t,i.setupCamera=T.mapViewPerspeciveToCamera(e),n&&(i.setupPrCodes=n.split(",")),i},T.dispatchStreamReadyEvent=function(){T.eventBus.emit(r.appEvents.AVE_STREAM_READY);const t=new CustomEvent("ave-stream-ready-tracking",{});document.dispatchEvent(t)},T.debug=function(t){T.debugEnabled&&console.log("ave-api: "+t)},k.isActiveCarline=function(){return"1"===SETUPS.get("scope.ave3d")&&"true"===SETUPS.get("ave3d.aveEnabled")},k.showPerspective=function(t){T.zlActivateCamera(t)},k.isAveAvailable=function(){return T.zlValidated},k.deactivate=function(t){T.zlDisconnect(L.deactivateAveCanvas,t)},k.activateAVE=function(t,e){L.activateAveCanvas(t),T.zlConnect(t,e)},k.moveAVE=function(t,e,n){T.debug("moving from "+t+" to "+e),zlbolt.moveStream(e),L.moveAveCanvas(t,e),void 0!==n&&!1!==n&&T.zlActivateCamera(n)},k.initialize=function(t){T.eventBus=t,k.isActiveCarline()&&(T.prepareZLboltURL(),s.jsLoader.loadURL(T.zlboltURL).then(T.zlSetReady))},Object.setPrototypeOf(I.prototype,HTMLElement.prototype),Object.setPrototypeOf(I,HTMLElement);class x extends I{constructor(){super()}connectedCallback(){this.basketContainer=this.querySelector(".nm-basket-container"),this.footerCheck=this.parentNode.querySelector(".nm-basket-scroll-check-bottom"),this.topCheck=[...document.querySelectorAll(".nm-navigation-scroll-check")].pop(),this.contentContainer=this.parentNode.querySelector(".nm-content"),this.isStickyBottom=!1,this.addEvents(),this.setupPageForBasket(),this.observerTopScrollPosition=this.observeTopScrollPosition(),this.observerBottomScrollPosition=this.observeBottomScrollPosition(),this.observerMatchingWidget=this.observeMatchingWidget()}disconnectedCallback(){this.removeEvents(),this.observerTopScrollPosition.disconnect(),this.observerBottomScrollPosition.disconnect(),this.observerMatchingWidget.disconnect()}addEvents(){this.basketContainer.addEventListener("transitionend",s.dom.throttle(()=>this.setupPageForBasket(),500)),window.addEventListener("resize",()=>this.setupPageForBasket())}removeEvents(){this.basketContainer.removeEventListener("transitionend",s.dom.throttle(()=>this.setupPageForBasket(),500)),window.removeEventListener("resize",()=>this.setupPageForBasket())}setupPageForBasket(){const t=this.getBasketHeight();this.contentContainer.style.minHeight=t+"px",this.footerCheck.style.bottom=t+"px",this.isStickable=window.innerHeight>t,this.checkBottomPosition()}observeBottomScrollPosition(){const t=new IntersectionObserver(t=>t.forEach(t=>this.checkBottomPosition(t)),{threshold:[0,1]});return t.observe(this.footerCheck),t}observeTopScrollPosition(){const t=new IntersectionObserver(t=>t.forEach(t=>this.checkTopPosition(t)),{threshold:[0,1]});return t.observe(this.topCheck),t}observeMatchingWidget(){const t=new MutationObserver(()=>{this.setupPageForBasket()});return t.observe(this,{childList:!0,subtree:!0}),t}checkTopPosition(t){const e=t||{boundingClientRect:this.topCheck.getBoundingClientRect(),isIntersecting:!1};this.isStickyTop=(this.isStickable||!this.isFullBasketShown)&&!e.isIntersecting&&e.boundingClientRect.top.toFixed(0)<=0}checkBottomPosition(t){const e=t||{boundingClientRect:this.footerCheck.getBoundingClientRect(),isIntersecting:!1};this.isStickyBottom=this.isStickable&&this.isFullBasketShown&&!e.isIntersecting&&e.boundingClientRect.top.toFixed(0)<=0}getBasketHeight(){this.classList.add("nm-basket-superwrap-hidden-measure");const t=this.basketContainer.clientHeight;return this.classList.remove("nm-basket-superwrap-hidden-measure"),t+this.getBasketOffset()}getBasketOffset(){const t=this.isFullBasketShown?54:0,e=document.querySelector(".nm-nav-wrap"),n=e?e.clientHeight:0,i=document.querySelector(".nm-module-current-consumption");return t+n+(i?i.clientHeight:0)}set isStickyBottom(t){t?this.classList.add("nm-basket-sticky-bottom"):this.classList.remove("nm-basket-sticky-bottom")}set isStickyTop(t){t?this.classList.add("nm-basket-sticky-top"):this.classList.remove("nm-basket-sticky-top"),t&&!this.isFullBasketShown?this.style.top=this.getBasketOffset()+"px":this.style.top=""}get isStickyTop(){return this.classList.contains("nm-basket-sticky-top")}set isStickable(t){this.setAttribute("data-is-stickable",t)}get isStickable(){return"true"===this.getAttribute("data-is-stickable")}get isFullBasketShown(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)>=1100}}function P(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-basket")||window.customElements.define("audi-configurator-basket",x),Object.setPrototypeOf(P.prototype,HTMLElement.prototype),Object.setPrototypeOf(P,HTMLElement);class O extends P{constructor(){super()}connectedCallback(){this.isAudicodeParamInUrl()?this.injectCompareElement():p.loadAudiCode().then(t=>{this.updateURL(t)}).then(()=>{this.injectCompareElement()})}isAudicodeParamInUrl(){return new URL(window.location.href).searchParams.has("ac")}updateURL(t){const e=new URL(window.location.href);e.searchParams.set("ac",t),window.history.replaceState({path:e.href},"",e.href)}injectCompareElement(){const t=document.createElement("car-compare");this.appendChild(t)}}void 0===window.customElements.get("audi-configurator-car-compare")&&window.customElements.define("audi-configurator-car-compare",O);var j=n(19);const R={selectedItemID:null},B={__:R};R.oDefaults={selectorCarstoreDeleteSection:".nm-j-carstore-delete-section",selectorAbortButton:".nm-j-abort-button",selectorDeleteButton:".nm-j-delete-button",selectorCarDetails:".nm-j-carstore-item-details",selectorForm:".nm-j-carstore-modify",selectorCarstoreItem:".nm-module-carstore .nm-j-carstore-item",selectorCarstoreList:".nm-j-carstore-list"},R.loadAgents=function(t){t.forEach(t=>{(new Image).src=t})},R.addEvents=function(){R.legacyEventBus.on("submit",R.oDefaults.selectorForm,R.handleFormSubmit),R.eventBus.on(r.appEvents.FORM_FINISHED,R.handleFormFinished),R.eventBus.on(r.appEvents.FORM_ERROR,R.handlePossibleLoginStateChange),R.eventBus.on(r.appEvents.MYAUDI_LOGIN,R.list),R.eventBus.on(r.appEvents.LAYER_LOADED,R.list)},R.triggerLoginStateEvent=function(t){if(t){const t=l.a.getVisitorId();t?R.eventBus.emit(r.appEvents.MYAUDI_LOGIN,t):R.eventBus.emit(r.appEvents.MYAUDI_LOGIN)}else R.eventBus.emit(r.appEvents.MYAUDI_LOGOUT);R.updateLoginState()},R.handlePossibleLoginStateChange=function(t){t&&t.response&&t.response.header&&t.response.header["logged-in"]&&t.response.header.subsession&&l.a.setLogin(t.response.header["logged-in"],t.response.header.subsession).then(R.triggerLoginStateEvent).catch(t=>{R.triggerErrorLayer(t,"error.message.LOGIN_FAILED")})},R.updateLoginState=function(){const t=s.dom.getElement("body");l.a.isLoggedIn()?t.classList.add("nm-logged-in"):t.classList.remove("nm-logged-in")},R.handleFormSubmit=function(t){t.preventDefault();R.selectedItemID=this.getAttribute("data-form-id");const e=s.dom.getElement("#carstore-select-"+R.selectedItemID),n=e&&e.options?e.options[e.selectedIndex].value:"none";"configuration-delete"===n?R.deleteCarstoreItem():"configuration-load"===n&&R.loadCarstoreItem()},R.renderCarstoreList=function(t){const e=s.dom.getElement(R.oDefaults.selectorCarstoreList);e.innerHTML=R.renderListTemplate(t.carstore),e.classList.remove("nm-loader")},R.renderListTemplate=function(t){return t.list?(t.altImage=l.a.getAltImagePath("selection-compare","none"),s.template.render('\n<div class="nm-module nm-module-carstore nm-carstore" data-module="carstore">\n\t<div class="nm-3col">\n\t\t<h2 class="nm-headline-medium nm-carstore-headline">{{=window.i18n[\'carstore-layer.saved-slots\']}}</h2>\n\t\t<p class="nm-text-large">{{=window.i18n[\'carstore-layer.manage-slots\']}}</p>\n\t\t<ul class="nm-carstore-saved-items">\n\t\t\t{{~ it.list :value }}\n\t\t\t\t<li class="nm-carstore-item nm-j-carstore-item" data-item-position="{{=value.position}}">\n\t\t\t\t\t<span class="nm-carstore-item-position nm-headline-teaser">{{=value.position}}</span>\n\t\t\t\t\t<img class="nm-carstore-item-image" src="{{? !!value[\'exterior-image\']}}{{=value[\'exterior-image\']}}?alt={{?}}{{=it.altImage}}" alt="{{=value.name}}" />\n\t\t\t\t\t<div class="nm-carstore-item-content">\n\t\t\t\t\t\t<div class="nm-carstore-item-details nm-j-carstore-item-details">\n\t\t\t\t\t\t\t{{? !!value.name}}\n\t\t\t\t\t\t\t\t<strong class="nm-carstore-detail nm-headline-teaser">{{=value.name}}</strong>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? !!value.shoppingCartName}}\n\t\t\t\t\t\t\t\t<p class="nm-carstore-detail nm-text-block">{{=value.shoppingCartName}}<br />\n\t\t\t\t\t\t\t\t\t{{? !!value.powersAndUnits}}\n\t\t\t\t\t\t\t\t\t\t{{=value.powersAndUnits}}\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? !!value.price && value.valid !== false}}\n\t\t\t\t\t\t\t\t<strong class="nm-carstore-detail nm-price nm-headline-teaser">{{=value.price}}</strong>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? !!value.audicode}}\n\t\t\t\t\t\t\t\t<p class="nm-carstore-detail nm-audicode nm-text-block">{{=window.i18n[\'audicode-label\']}}: {{=value.audicode}}</p>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<form class="nm-carstore-modify-section nm-j-carstore-modify" data-form-id="{{=value.position}}" action="#">\n\t\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t\t<select id="carstore-select-{{=value.position}}" class="nm-carstore-modify-select nm-j-carstore-modify-select">\n\t\t\t\t\t\t\t\t\t{{? value.valid !== false}}\n\t\t\t\t\t\t\t\t\t\t<option value="configuration-load">{{=window.i18n[\'carstore-layer.load-slot\']}}</option>\n\t\t\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t\t\t<option>{{=window.i18n[\'carstore-layer.invalid-slot\']}}</option>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t<option value="configuration-delete">{{=window.i18n[\'delete-configuration-label\']}}</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t<input type="hidden" name="carstore-position" value="{{=value.position}}">\n\t\t\t\t\t\t\t\t<button class="nm-el-btn nm-el-btn-04 nm-el-btn-ast nm-j-carstore-submit" type="submit">submit</button>\n\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t\t<div class="nm-carstore-delete-section nm-j-carstore-delete-section nm-hidden">\n\t\t\t\t\t\t\t<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=window.i18n[\'carstore-layer.delete-slot\']}}</strong>\n\t\t\t\t\t\t\t<p class="nm-el-pg nm-el-pg-03">{{=window.i18n[\'carstore-layer.delete-dialog\']}}</p>\n\t\t\t\t\t\t\t<div class="nm-modify-buttons">\n\t\t\t\t\t\t\t\t<a class="nm-carstore-button nm-el-btn nm-el-btn-01 nm-j-abort-button" href="#">{{=window.i18n[\'abort-label\']}}</a> \n\t\t\t\t\t\t\t\t<a class="nm-carstore-button nm-el-btn nm-el-btn-01 nm-el-btn-ast nm-j-delete-button" href="#">{{=window.i18n[\'delete-label\']}}</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t</ul>\n\t</div>\n</div>',t)):t.statuscode&&800===t.statuscode?s.template.render("\n\t<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.error-loading-slots']}}</p>\n",{}):s.template.render("\n\t<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.no-slots-available']}}</p>\n",{})},R.handleFormFinished=function(t){"login"===t.id?R.handleLoginFormFinished(t):"carstore"===t.id&&R.handleSaveFormFinished()},R.handleLoginFormFinished=function(t){R.loadAgents(t.response.login.agents.standard),R.loadAgents(t.response.login.agents.secure),R.handlePossibleLoginStateChange(t)},R.handleSaveFormFinished=function(){const t=s.dom.getElement(".nm-carstore-save .nm-j-carstore-save");t.classList.remove("nm-j-carstore-save"),t.classList.add("nm-j-carstore-list"),t.innerHTML="",R.list("carstore")},R.list=function(t){R.updateLoginState(),l.a.isLoggedIn()&&R.isCarstoreListOpen()&&(R.showLoader(),h.a.listCarstoreItems().then((function(e){if(R.renderCarstoreList(e),t&&"carstore"===t){const t=s.dom.getElement(".nm-j-audicode").innerText;R.eventBus.emit(r.appEvents.CONFIG_SAVED,t)}})).catch((function(t){R.triggerErrorLayer(t,"carstore-layer.error-loading-slots")})).then((function(){R.hideLoader()})))},R.isCarstoreListOpen=function(){return s.dom.getElementsArray(R.oDefaults.selectorCarstoreList).length>0},R.showLoader=function(){s.dom.getElementsArray(R.oDefaults.selectorCarstoreList).forEach(t=>{t.innerHTML="",t.classList.add("nm-loader")})},R.hideLoader=function(){s.dom.getElementsArray(R.oDefaults.selectorCarstoreList).forEach(t=>{t.classList.remove("nm-loader")})},R.deleteCarstoreItem=function(){R.toggleDeleteSectionVisibiblity(!0),R.addDeleteButtonEvents()},R.handleDeleteAbort=function(t){return t.preventDefault(),R.toggleDeleteSectionVisibiblity(!1),R.removeDeleteButtonEvents(),R.selectedItemID=null,!1},R.handleDeleteSubmit=function(t){return t.preventDefault(),R.selectedItemID&&h.a.deleteCarstoreItem(R.selectedItemID).then((function(t){R.list(t)})).catch((function(t){R.triggerErrorLayer(t,"carstore-layer.error-deleting-slot")})),R.removeDeleteButtonEvents(),R.selectedItemID=null,!1},R.toggleDeleteSectionVisibiblity=function(t=!0){const e=R.oDefaults.selectorCarstoreItem+"[data-item-position='"+R.selectedItemID+"'] ";s.dom.getElement(e+R.oDefaults.selectorCarstoreDeleteSection).classList.toggle("nm-hidden",!t),s.dom.getElement(e+R.oDefaults.selectorForm).classList.toggle("nm-hidden",t),s.dom.getElement(e+R.oDefaults.selectorCarDetails).classList.toggle("nm-hidden",t)},R.addDeleteButtonEvents=function(){const t=R.oDefaults.selectorCarstoreItem+"[data-item-position='"+R.selectedItemID+"'] ";R.legacyEventBus.on("click",t+R.oDefaults.selectorAbortButton,R.handleDeleteAbort),R.legacyEventBus.on("click",t+R.oDefaults.selectorDeleteButton,R.handleDeleteSubmit)},R.removeDeleteButtonEvents=function(){const t=R.oDefaults.selectorCarstoreItem+"[data-item-position='"+R.selectedItemID+"'] ";R.legacyEventBus.off("click",t+R.oDefaults.selectorAbortButton,R.handleDeleteAbort),R.legacyEventBus.off("click",t+R.oDefaults.selectorDeleteButton,R.handleDeleteSubmit)},R.loadCarstoreItem=function(){return h.a.loadCarstoreItem(R.selectedItemID).catch((function(t){R.triggerErrorLayer(t,"carstore-layer.error-loading-car")})).then((function(){r.router.open("page",l.a.getCurrentCarlineUrl()),setTimeout((function(){const t=document.createEvent("HTMLEvents");t.initEvent("click",!0,!1);s.dom.getElement(".nm-j-layer-close-button").dispatchEvent(t)}),100)})),!1},R.triggerErrorLayer=function(t,e){console.error(e,t);const n=l.a.getErrorMessage(t);R.eventBus.emit(r.appEvents.ERROR,[window.i18n[e],n])},B.initialize=function(t){R.eventBus=t,R.legacyEventBus=s.dom.getEventDelegate("body"),R.addEvents()};class M{constructor(){return M.instance||(this._init(),M.instance=this),M.instance}_init(){this.csrfToken=null,this._getCsrfToken=this._getCsrfToken.bind(this),this._requestAudicodeOperation=this._requestAudicodeOperation.bind(this),c.stateRegistry.subscribeToStore(d,this._getCsrfToken)}_getCsrfToken(t){t&&t.csrfToken&&(this.csrfToken=t.csrfToken)}async _requestAudicodeOperation(t,e){const n=SETUPS.get("myaudi.uds.url")+"carstore/"+e,i={credentials:"include",headers:{"X-CSRF-Token":this.csrfToken},method:t};return fetch(n,i).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(t=>{c.stateRegistry.triggerAction(d,"update",{audicodes:t})}).catch(t=>console.log("CarstoreApi ERROR - audicode - ",t))}async deleteAudicode(t){return this._requestAudicodeOperation("DELETE",t)}async saveAudicode(t){return this._requestAudicodeOperation("PATCH",t)}async getAudicodeList(){const t=SETUPS.get("myaudi.uds.url")+"carstore/listAudicodes",e={credentials:"include",headers:{"X-CSRF-Token":this.csrfToken}};return fetch(t,e).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(t=>{c.stateRegistry.triggerAction(d,"update",{audicodes:t})}).catch(t=>console.log("CarstoreApi ERROR - listAudicodes - ",t))}}var F=new M;function U(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(U.prototype,HTMLElement.prototype),Object.setPrototypeOf(U,HTMLElement);class z extends U{constructor(){super(),this.audicode=null,this.handleDeleteClick=this.handleDeleteClick.bind(this)}connectedCallback(){this.audicode=this.getAttribute("data-audicode"),this.deleteButton=this.querySelector(".j-carstore-delete"),this.deleteButton.addEventListener("click",this.handleDeleteClick)}disconnectedCallback(){this.deleteButton&&this.deleteButton.removeEventListener("click",this.handleSaveClick)}handleDeleteClick(t){t.preventDefault(),F.deleteAudicode(this.audicode)}}void 0===window.customElements.get("audi-carstore-delete-audicode")&&window.customElements.define("audi-carstore-delete-audicode",z);n(20);var N=n(31);function Q(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(Q.prototype,HTMLElement.prototype),Object.setPrototypeOf(Q,HTMLElement);class H extends Q{constructor(){super(),this.currentConfigurations={},this.audicodeList=null,this.stateController=this.stateController.bind(this),this.renderList=this.renderList.bind(this),this.hasAudicodeListChanged=this.hasAudicodeListChanged.bind(this),this.handleListAudicodesResponse=this.handleListAudicodesResponse.bind(this)}connectedCallback(){c.stateRegistry.subscribeToStore(d,this.stateController),this.isToBeInitialized=!0}async renderList(t){if(this.currentConfigurations=t.configurations,this.wrapper=this.querySelector(".carstore-list__wrapper"),!this.wrapper)return;const e=Object.keys(this.currentConfigurations);let n="";if(0===e.length)n+=s.template.render("\n\t<p class=\"audi-copy-m carstore-list__error-message\">{{=window.i18n['carstore-layer.no-slots-available']}}</p>\n");else for(const t of e)n+=await this.renderListItem(t);this.wrapper.innerHTML=n}async renderListItem(t){let e=this.currentConfigurations[t];const n=await Object(N.a)(e.configuration).then(t=>{if(!t)throw new Error;return t}),i=await n,r=Object.assign(e,{images:i},{mediaservice:SETUPS.get("nemo.url.mediaservice")}),o=e.error?'\n\t<div class="carstore-list-item carstore-list-item--fail">\n\t\t<div class="carstore-list-item__image-container">\n\t\t\t<img class="carstore-list-item__image carstore-list-item__image--fail" src={{=SETUPS.get(\'nemo.url.assets\')+"/img/fallback/fb-carstore.png"}} alt="" />\n\t\t</div>\n\t\t<p class="audi-copy-m carstore-list__error-message">\n\t\t\t<span class="carstore-list__error-message-text">{{=it.error.message}}</span>\n\t\t\t<span class="carstore-list__error-message-text">{{=window.i18n[\'audicode-label\']}}: {{=it.audicode}}</span>\n\t\t</p>\n\t\t<form class="carstore-list-item__form">\n\t\t\t<legend class="carstore-list-item__legend">{{=window.i18n[\'delete-configuration-label\']}}</legend>\n\t\t\t<fieldset>\n\t\t\t\t<audi-carstore-delete-audicode data-audicode="{{=it.audicode}}">\n\t\t\t\t\t<button class="audi-button carstore-list-item__button carstore-list-item__button--delete j-carstore-delete" type="submit">\n\t\t\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'delete-label\']}}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</audi-carstore-delete-audicode>\n\t\t\t</fieldset>\n\t\t</form>\n\t</div>\n':'\n<audi-configurator-carstore-list-item class="carstore-list-item" data-module="carstore-list-item" data-audicode="{{=it.audicode.id}}">\n\t<div class="carstore-list-item__image-container">\n\t\t{{? !!it.images && !!it.images.exterior_front && !!it.images.exterior_front[\'flyout\']}}\n\t\t\t<img class="carstore-list-item__image" src="{{=it.mediaservice}}{{=it.images[\'exterior_front\'][\'flyout\']}}" alt="{{=it.configuration.carlineName}}" />\n\t\t{{??}}\n\t\t\t<img class="carstore-list-item__image carstore-list-item__image--fail" src={{=SETUPS.get(\'nemo.url.assets\')+"/img/fallback/fb-carstore.png"}} alt="" />\n\t\t{{?}}\n\t</div>\n\t<div class="carstore-list-item__description">\n\t\t{{? !!it.configuration.carlineName}}\n\t\t\t<div class="audi-headline-order-3 carstore-list-item__carline">{{=it.configuration.carlineName}}</div>\n\t\t{{?}}\n\t\t{{? !!it.configuration.description}}\n\t\t\t<div class="audi-copy-s carstore-list-item__engine">{{=it.configuration.description}}</div>\n\t\t{{?}}\n\t\t{{? !!it.configuration.prices.total}}\n\t\t\t<div class="audi-copy-m carstore-list-item__price">{{=it.configuration.prices.total}}</div>\n\t\t{{?}}\n\t</div>\n\t<form action="#" class="carstore-list-item__form">\n\t\t<legend class="carstore-list-item__legend">{{=window.i18n[\'carstore-layer.manage-slots\']}}</legend>\n\t\t<fieldset class="carstore-list-item__form-administration">\n\t\t\t<div class="audi-dropdown carstore-list-item__form-select-wrapper">\n\t\t\t\t<select name="carstore-list-item__form-select" class="audi-dropdown-select carstore-list-item__form-select">\n\t\t\t\t\t<option value="configuration-load">{{=window.i18n[\'carstore-layer.load-slot\']}}</option>\n\t\t\t\t\t<option value="configuration-delete">{{=window.i18n[\'delete-configuration-label\']}}</option>\n\t\t\t\t</select>\n\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t{{? !!it.audicode.id}}\n\t\t\t\t<div class="audi-copy-s carstore-list-item__audicode">{{=window.i18n[\'audicode-label\']}}: {{=it.audicode.id}}</div>\n\t\t\t{{?}}\n\t\t\t<button class="audi-button carstore-list-item__button carstore-list-item__button--submit j-carstore-submit">\n\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'carstore-layer.continue-label\']}}</span>\n\t\t\t</button>\n\t\t</fieldset>\n\t\t<fieldset class="carstore-list-item__form-dialogue">\n\t\t\t<audi-carstore-delete-audicode data-audicode="{{=it.audicode.id}}">\n\t\t\t\t<button class="audi-button carstore-list-item__button carstore-list-item__button--delete j-carstore-delete" type="submit">\n\t\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'delete-label\']}}</span>\n\t\t\t\t</button>\n\t\t\t\t<button class="audi-button audi-button--ghost carstore-list-item__button carstore-list-item__button--cancel j-carstore-cancel" type="reset">\n\t\t\t\t<span class="audi-button__text">{{=window.i18n[\'abort-label\']}}</span>\n\t\t\t</audi-carstore-delete-audicode>\n\t\t\t</button>\n\t\t</fieldset>\n\t</form>\n</audi-configurator-carstore-list-item>\n';return s.template.render(o,r)}disconnectedCallback(){c.stateRegistry.unsubscribeFromStore(d,this.stateController)}createHeadlines(){this.innerHTML=s.template.render('\n\t<h2 class="audi-headline-order-2 carstore-list__headline">{{=window.i18n[\'carstore-layer.saved-slots\']}}</h2>\n\t<p class="audi-copy-m carstore-list__intro-text">{{=window.i18n[\'carstore-layer.manage-slots\']}}</p>\n\t<div class="carstore-list__wrapper"></div>\n')}stateController(t){if(!t.loggedIn)return this.innerHTML="",this.audicodeList=null,void(this.currentConfigurations={});t.loggedIn&&(this.isToBeInitialized||null===t.audicodes&&null===this.audicodeList)&&(this.createHeadlines(),F.getAudicodeList(),this.isToBeInitialized=!1),t.audicodes!==this.audicodeList&&this.handleListAudicodesResponse(t.audicodes),t.configurations&&t.configurations!==this.currentConfigurations&&this.renderList(t)}async handleListAudicodesResponse(t){const e=this.filterAudicodesToLoad(t);let n={};if(e){const t=e.map(t=>ut.a.loadConfigurationByAudiCodeStateless(t).catch(e=>({audicode:t,error:e}))),i=await Promise.all(t);for(const t of i)t.error?n[t.audicode]={audicode:t.audicode,error:t.error}:n[t.audicode.id]={audicode:t.audicode,configuration:t.configuration}}this.audicodeList=t;const i=this.mergeConfigurations(t,n,this.currentConfigurations);c.stateRegistry.triggerAction(d,"update",{configurations:i})}mergeConfigurations(t,e,n){let i={};return t.forEach(t=>{i[t]=e[t]||n[t]}),i}filterAudicodesToLoad(t){return t?t.filter(t=>!this.currentConfigurations[t]):null}hasAudicodeListChanged(t,e){return!e||t.length!==e.length||!t.every(t=>e.includes(t))}}function V(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}void 0===window.customElements.get("audi-carstore-list")&&window.customElements.define("audi-carstore-list",H),Object.setPrototypeOf(V.prototype,HTMLElement.prototype),Object.setPrototypeOf(V,HTMLElement);class q extends V{constructor(){super(),this.handleSubmitClick=this.handleSubmitClick.bind(this),this.handleCancelClick=this.handleCancelClick.bind(this)}connectedCallback(){this.audicode=this.getAttribute("data-audicode"),this.form=this.querySelector("form"),this.formSelect=this.querySelector(".carstore-list-item__form-select"),this.submitButton=this.querySelector(".j-carstore-submit"),this.cancelButton=this.querySelector(".j-carstore-cancel"),this.addEvents()}addEvents(){this.submitButton&&this.submitButton.addEventListener("click",this.handleSubmitClick),this.cancelButton&&this.cancelButton.addEventListener("click",this.handleCancelClick)}handleSubmitClick(t){t.preventDefault(),"configuration-delete"===this.formSelect.value?this.classList.toggle("carstore-list-item--show-dialogue"):"configuration-load"===this.formSelect.value&&(window.location.href=window.i18n["audicode.direct-url"]+this.audicode)}handleCancelClick(){this.classList.remove("carstore-list-item--show-dialogue")}}function W(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}void 0===window.customElements.get("audi-configurator-carstore-list-item")&&window.customElements.define("audi-configurator-carstore-list-item",q),Object.setPrototypeOf(W.prototype,HTMLElement.prototype),Object.setPrototypeOf(W,HTMLElement);class G extends W{constructor(){super(),this.updateVisibility=this.updateVisibility.bind(this),this.handleSaveClick=this.handleSaveClick.bind(this)}connectedCallback(){c.stateRegistry.subscribeToStore(d,this.updateVisibility),this.button=this.querySelector("button"),this.button.addEventListener("click",this.handleSaveClick)}disconnectedCallback(){c.stateRegistry.unsubscribeFromStore(d,this.updateVisibility)}updateVisibility(t){const e=t.currentAudicode;this.setAttribute("data-audicode",e),e&&null!==t.audicodes&&!t.audicodes.includes(e)?this.classList.remove("nm-hidden"):this.classList.add("nm-hidden")}handleSaveClick(){const t=this.getAttribute("data-audicode");t&&F.saveAudicode(t)}}void 0===window.customElements.get("audi-carstore-save-audicode")&&window.customElements.define("audi-carstore-save-audicode",G);const Y={},K={__:Y};let X=!1;Y.oDefaults={sSelectorCart:".nm-basket",sSelectorSnippetText:".nm-j-configurator-text-"},Y.updateAndAnimatePrice=function(t,e){t.stop(!0,!0).animate({opacity:"0.01"},250,"easeInSine",(function(){jQuery(this).text(e)})).delay(400).animate({opacity:"1"},300,"easeOutSine")},Y.hidePriceAndRate=function(t){var e,n,i={price:{},rate:{}};for(e in i)i.hasOwnProperty(e)&&""===(n=t.find([Y.oDefaults.sSelectorSnippetText,e].join(""))).text()&&n.closest("div").addClass("nm-hidden")},Y.hideRateIfUnavailable=function(t){var e;t.prices&&(void 0===(e=t.prices.totalRateRaw)||0===parseFloat(e)?jQuery("body").addClass("nm-no-rate"):jQuery("body").removeClass("nm-no-rate"))},Y.updatePrice=function(t,e,n){var i,r,o=e.price;for(i in e)if(e.hasOwnProperty(i)){if(r=t.find([Y.oDefaults.sSelectorSnippetText,i].join("")),"price"===i&&o&&n&&n.data&&n.data.animate){Y.updateAndAnimatePrice(r,o);continue}r.text(e[i])}},Y.updateCartText=function(t){var e,n=jQuery(Y.oDefaults.sSelectorCart);if(l.a.isConfigurable()){if(!(e=l.a.getConfiguration()))return;Y.updatePrice(n,e,t),Y.hideRateIfUnavailable(e)}else Y.hidePriceAndRate(n)},Y.updateEngineLinks=function(){var t,e;l.a.isConfigurable()&&(t=jQuery("[data-link-pattern]"),e=l.a.getMotorcode(),t.each((function(){var t=jQuery(this),n=t.attr("data-link-pattern");n&&n.match(/{{=it.model}}/g)&&(n=n.replace(/{{=it.model}}/,e),t.attr("href",n))})))},Y.updateSummaryStatus=function(t){"summary"===t||"onepage_configurator"===t?jQuery("body").addClass("nm-is-summary"):jQuery("body").removeClass("nm-is-summary")},Y.updateBasketBodyClass=function(t,e){var n=jQuery(".nm-basket").length>0,i="nemo"===t.attr("data-type");n&&i&&!("home"===e)?jQuery("body").addClass("nm-has-basket"):jQuery("body").removeClass("nm-has-basket")},Y.updateClasses=function(t){var e,n;n=(e=void 0!==t&&void 0!==t.domElement?jQuery(t.domElement).find(".nm-content"):jQuery(".nm-content")).attr("data-template"),Y.updateSummaryStatus(n),Y.updateBasketBodyClass(e,n)},Y.handlerAnimated=function(){Y.updateCartText({data:{animate:!0}}),Y.updateEngineLinks()},Y.handlerNotAnimated=function(){Y.updateCartText({data:{animate:!1}}),Y.updateEngineLinks()},Y.addEvents=function(){Y.eventBus.on(r.appEvents.CONFIG_UPDATE,Y.handlerAnimated),Y.eventBus.on(r.appEvents.LAYER_LOADED,Y.handlerNotAnimated),Y.eventBus.on(r.appEvents.CONFIG_START,Y.handlerNotAnimated),Y.eventBus.on(r.appEvents.PAGE_LOADED,Y.handlerNotAnimated),Y.eventBus.on(r.appEvents.PAGE_LOADED,Y.updateEngineLinks),Y.eventBus.on(r.appEvents.PAGE_LOADED,Y.updateClasses)},K.dispose=function(){Y.eventBus.off(r.appEvents.CONFIG_UPDATE,Y.handlerAnimated),Y.eventBus.off(r.appEvents.LAYER_LOADED,Y.handlerNotAnimated),Y.eventBus.off(r.appEvents.CONFIG_START,Y.handlerNotAnimated),Y.eventBus.off(r.appEvents.PAGE_LOADED,Y.updateEngineLinks),Y.eventBus.off(r.appEvents.PAGE_LOADED,Y.updateClasses)},Y.initialize=function(){X||(Y.addEvents(),X=!0,Y.updateClasses())},K.initialize=function(t){Y.eventBus=t,Y.initialize()};n(68);var J=n(15);function Z(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(Z.prototype,HTMLElement.prototype),Object.setPrototypeOf(Z,HTMLElement);class tt extends Z{constructor(){super()}connectedCallback(){this.changeEngineButton=this.querySelector(".nm-engine-compare__button-change"),this.addEvents()}disconnectedCallback(){this.removeEvents()}addEvents(){this.changeEngineButton.addEventListener("click",t=>this.showSearchWidget(t))}removeEvents(){this.changeEngineButton.removeEventListener("click",t=>this.showSearchWidget(t))}showSearchWidget(t){t.preventDefault();[...document.querySelectorAll(".nm-engine-compare__widget")].forEach(t=>{t.contains(this)&&t.classList.add("nm-engine-compare__widget--show-search")})}}function et(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-enginecompare-controls")||window.customElements.define("audi-configurator-enginecompare-controls",tt),Object.setPrototypeOf(et.prototype,HTMLElement.prototype),Object.setPrototypeOf(et,HTMLElement);class nt extends et{constructor(){super()}connectedCallback(){this.fuelDropdown=this.querySelector('.nm-engine-compare__dropdown[data-compare-type="fuel"]'),this.engineDropdown=this.querySelector('.nm-engine-compare__dropdown[data-compare-type="engine"]'),this.trimlineSelect=this.querySelector('.nm-engine-compare__select[data-compare-type="trimline"]'),this.fuelSelect=this.querySelector('.nm-engine-compare__select[data-compare-type="fuel"]'),this.engineSelect=this.querySelector(".nm-engine-compare__select[data-compare-type=engine]"),this.fuelOptions=this.querySelectorAll('.nm-engine-compare__select[data-compare-type="fuel"] option'),this.engineOptions=this.querySelectorAll('.nm-engine-compare__select[data-compare-type="engine"] option'),this.hasTrimline=null!==this.trimlineSelect,this.selectedFuel=this.fuelSelect.value,this.selectedEngine=this.engineSelect.value,this.updateFuelAndEngineOptions(),this.addEvents()}disconnectedCallback(){this.removeEvents()}addEvents(){this.hasTrimline&&this.trimlineSelect.addEventListener("change",()=>{this.updateFuelAndEngineOptions()}),this.fuelSelect.addEventListener("change",()=>{this.updateEngineOptions()})}removeEvents(){this.hasTrimline&&this.trimlineSelect.removeEventListener("change",()=>{this.updateFuelAndEngineOptions()}),this.fuelSelect.removeEventListener("change",()=>{this.updateEngineOptions()})}updateFuelAndEngineOptions(){this.updateFuelOptions(),this.updateEngineOptions()}updateFuelOptions(){this.hasTrimline&&(this.selectedTrimline=this.trimlineSelect.value,this.fuelSelect.innerHTML="",[...this.fuelOptions].forEach(t=>{this.isValidOptionForSelectedTrimline(t)&&(t.selected=t.value===this.selectedFuel,this.fuelSelect.add(t))}),this.setDropdownReadonly(this.fuelDropdown,1===this.fuelSelect.length))}updateEngineOptions(){this.hasTrimline&&(this.selectedTrimline=this.trimlineSelect.value),this.selectedFuel=this.fuelSelect.value,this.engineSelect.innerHTML="",[...this.engineOptions].forEach(t=>{this.isValidOptionForSelectedTrimlineAndFuel(t)&&(t.selected=t.value===this.selectedEngine,this.engineSelect.add(t))}),this.setDropdownReadonly(this.engineDropdown,1===this.engineSelect.length)}isValidOptionForSelectedTrimlineAndFuel(t){return this.isValidOptionForSelectedTrimline(t)&&this.isValidOptionForSelectedFuel(t)}isValidOptionForSelectedTrimline(t){return!this.hasTrimline||t.getAttribute("data-trimline")===this.selectedTrimline}isValidOptionForSelectedFuel(t){return t.getAttribute("data-fuel")===this.selectedFuel}setDropdownReadonly(t,e){e?t.classList.add("nm-form-readonly"):t.classList.remove("nm-form-readonly")}}window.customElements.get("audi-configurator-enginecompare-filter")||window.customElements.define("audi-configurator-enginecompare-filter",nt);var it=n(8);function rt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(rt.prototype,HTMLElement.prototype),Object.setPrototypeOf(rt,HTMLElement);class ot extends rt{constructor(){super()}connectedCallback(){this.form=this.querySelector(".nm-engine-compare__form"),this.addEvents()}disconnectedCallback(){this.removeEvents()}addEvents(){this.form.addEventListener("submit",t=>{this.submitForm(t)})}removeEvents(){this.form.removeEventListener("submit",t=>{this.submitForm(t)})}submitForm(t){t.preventDefault();const e=this.form.getAttribute("data-link-pattern");if(e){const t=it.doT.template(e)({motorcodes:this.getSelectedEngines()});r.router.open("layer",t)}}getSelectedEngines(){return[...this.querySelectorAll('.nm-engine-compare__select[data-compare-type="engine"]')].map(t=>t.value)}}window.customElements.get("audi-configurator-enginecompare-form")||window.customElements.define("audi-configurator-enginecompare-form",ot);var at=n(69);const st={},lt={__:st};st.$stage=null,st.oDefaults={sStageID:"#nm-id-stage",sSelectorCarPriceRate:".nm-car-price-rate",sSelectorRenderImage:".nm-j-configurator-renderimage",sSelectorConfigurationSummary:".nm-j-configuration-summary",sSelectorQuantityPicker:".nm-quantity",sSelectorSnippetText:".nm-j-configurator-text-",sSelectorSnippetTextContainer:".nm-j-configurator-container-text-",sSelectorSnippetTextEec:".nm-j-configurator-text-eec-",selectorModelText:".js-configurator-model-text-",selectorModelImage:".js-configurator-model-image",selectorEecImage:".nm-j-configurator-image-eec",selectorTechdata:".nm-j-configurator-techdata-"},st.textReplaceKeys=["bpm","carlineName","count","description","eec-co2emission","eec-consumption","eec-consumptioninner","eec-efficiency","eec-electricitycost","eec-energycost","eec-yearlytaxcost","financeGlobalDisclaimer","financeParameters","financeProductDisclaimer","financeProductName","modelPrice","nettoBase","nettoOptions","optionsPrice","pa","packageDescription","price","pricenm-price","rate","rotrprice","rotrRate","servicePackage","subname","taxableBenefit1","taxableBenefit2","taxTotal","totalRate","totalWithCharges","vat"],st.addEvents=function(){st.eventBus.on(r.appEvents.UPDATE_VIEW_STATE,st.handleViewStateUpdates),st.eventBus.on(r.appEvents.CONFIG_UPDATE,st.updateAllDomItems),st.eventBus.on(r.appEvents.PAGE_LOADED,st.handlePageLoaded),st.eventBus.on(r.appEvents.LAYER_LOADED,st.updateAllDomItems),st.eventBus.on(r.appEvents.TRIGGER_DOM_UPDATE,st.handleConflictAndTransferResolves),st.eventBus.on(r.appEvents.CONFIG_SEND,st.hideRenderImages),document.addEventListener("FOOTNOTES_RENDERED",st.handleFootnotesRendered)},st.handleFootnotesRendered=()=>{st.updateEffiencyClass(),st.updateTechdata(),st.updateFinancialFootnote()},st.updateFinancialFootnote=()=>{const t=l.a.getConfiguration();t&&t.financeParameters&&st.setDOMText(jQuery(".audi-footnotes"),t)},st.removeEvents=function(){st.eventBus.off(r.appEvents.UPDATE_VIEW_STATE,st.handleViewStateUpdates),st.eventBus.off(r.appEvents.CONFIG_UPDATE,st.updateAllDomItems),st.eventBus.off(r.appEvents.PAGE_LOADED,st.handlePageLoaded),st.eventBus.off(r.appEvents.LAYER_LOADED,st.updateAllDomItems),st.eventBus.off(r.appEvents.TRIGGER_DOM_UPDATE,st.handleConflictAndTransferResolves),st.eventBus.off(r.appEvents.CONFIG_SEND,st.hideRenderImages)},st.updateDomStatusItems=function(t){(t||jQuery("body")).find(".nm-j-configurator-item").each((function(){var t=jQuery(this),e=t.attr("data-configurator-id"),n=l.a.getItem(e);if(t.hasClass("nm-j-configurator-no-update"))return!0;e&&n&&n.status&&(st.setDOMStatusCode(t,n.status),n.message&&n.message[0].text&&""!==n.message[0].text&&st.setDebugOutput(t,n.message[0].text))}))},st.handlePageLoaded=function(t){let e=jQuery("body");t&&"domElement"in t&&(e=jQuery(t.domElement)),st.updateDomStatusItems(e),st.updateDomTextItems(e),st.updateDomTextPrices(),st.updateDomTextSummary(),st.updateDomRenderImages(),st.updateModeChangeItems(),st.updateEffiencyClass(),st.updateTechdata(),st.updateFinancialFootnote(),st.updateEnergyEfficiencyImage(),st.eventBus.emit(r.appEvents.DOM_UPDATED)},st.setDOMStatusCode=function(t,e){var n,i;e&&(i=(n=t.get(0)).className)!==(i=i.replace(/nm-j-configurator-status_[01]{5}/,["nm-j-configurator-status_",e].join("")))&&(n.className=i)},st.setDebugOutput=function(t,e){var n=e;n&&(n=" ("+n+")",(1===t.find(".nm-debug-item").length?jQuery(t.find(".nm-debug-item")[0]):t).attr("data-message",n))},st.handleConflictAndTransferResolves=function(){st.updateAllDomItems()},st.handleViewStateUpdates=function(t){var e;t&&t.domElement&&t.domElement.length&&(e=t.domElement),st.updateDomRenderImages(e)},st.updateAllDomItems=function(){st.updateDomStatusItems(),st.updateDomTextItems(),st.updateDomTextPrices(),st.updateDomTextSummary(),st.updateDomRenderImages(),st.updateModeChangeItems(),st.updateEffiencyClass(),st.updateTechdata(),st.updateFinancialFootnote(),st.updateEnergyEfficiencyImage(),st.eventBus.emit(r.appEvents.DOM_UPDATED)},st.updateDomTextPrices=function(){const t=l.a.getConfiguration();if(t&&t.prices){const e=jQuery("body");st.setDOMText(e,t.prices),st.setConfigDataContainersVisibility(e,t.prices)}},st.updateModeChangeItems=function(){var t,e,n,i,r,o;e="nm-mode-"+(t=l.a.getPriceRateMode()),jQuery("body").removeClass("nm-mode-rate nm-mode-price"),jQuery("body").addClass(e),(o=jQuery(".nm-engine-list a[data-module-maw-criteria=price]")).length>0&&(n="rate"===t?"Preis":"Rate",i="rate"===t?"Rate":"Preis",r=o.html(),o.html(r.replace(n,i))),jQuery(".nm-price-rate-switch, .j-rate-switch").each((function(){this.checked="rate"===t}))},st.updateDomTextItems=function(t){(t||jQuery("body")).find(".nm-j-configurator-item").each((function(){var t=jQuery(this),e=t.attr("data-configurator-id"),n=l.a.getItem(e);n&&st.setDOMText(t,n)}))},st.setDOMText=function(t,e){st.textReplaceKeys.filter(t=>e.hasOwnProperty(t)).forEach(n=>{"price"===n?t.find(st.oDefaults.sSelectorSnippetText+n).html(e.priceWithFees||e[n]):t.find(st.oDefaults.sSelectorSnippetText+n).html(e[n])})},st.setConfigDataContainersVisibility=function(t,e){st.textReplaceKeys.forEach(n=>{const i=t.find(st.oDefaults.sSelectorSnippetTextContainer+n);i&&(e.hasOwnProperty(n)&&""!==e[n]&&null!==e[n]?i.removeClass("nm-hidden"):i.addClass("nm-hidden"))})},st.hideRenderImages=function(){jQuery(st.oDefaults.sSelectorRenderImage).each((function(){jQuery(this).addClass("nm-fade-out")}))},st.updateDomRenderImages=function(t){var e,n,i,r=l.a.getConfigurationAssets();r&&(e=t||jQuery("body"),jQuery(st.oDefaults.sSelectorRenderImage,e).each((function(){var t,e,o,a,s=jQuery(this);n=s.attr("data-renderimage-type"),i=s.attr("data-renderimage-view"),a=s.attr("data-resize-param"),n&&i&&(t=r[i])&&t[n]?(e=l.a.getRenderUrl()+t[n],0!==t[n].indexOf("/preview/")&&(o=l.a.getAltImagePath(i,n))&&(e+="?alt="+o),a&&(e+=-1!==e.indexOf("?")?"&":"?",e+=a),s.is("img")?e!==s.attr("src")?s.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-out").delay(300).on("load",(function(t){jQuery(t.target).removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in")})).attr("src",e):s.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in"):s.is("source")?s.attr("srcset",e):s.attr("data-url")!==e&&(s.attr("data-url",e),s.css("backgroundImage","url("+e+")"))):s.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in")})))},st.updateTechdata=function(){const t=l.a.getConfiguration();t&&t.techdata&&Object.entries(t.techdata).forEach(t=>{st.updateTechdataEntry(t[0],t[1])})},st.updateTechdataEntry=function(t,e){[...document.querySelectorAll(st.oDefaults.selectorTechdata+t)].forEach(t=>{t.innerHTML=e})},st.updateEffiencyClass=function(){const t=l.a.getConfiguration(),e=document.querySelectorAll(".nm-j-configurator-techdata-efficiency-class");t&&t.eec&&t.eec.efficiency&&e.length>0&&[...e].forEach(e=>{e.innerHTML=t.eec.efficiency,e.classList.remove("nm-hidden"),e.hasAttribute("data-has-techdata-container")&&st.updateTechdataContainerVisibility(e)})},st.updateTechdataContainerVisibility=function(t){const e=s.dom.closest(t,".nm-j-configurator-techdata-container");e&&e.classList.remove("nm-hidden")},st.updateDomTextSummary=function(){let t=l.a.getMotorcode(),e=l.a.getItem(t),n=l.a.getModelsInfo(t),i=l.a.getConfiguration();i||console.warn("updateDomTextSummary: no configuration available!");let r,o,a=i&&i.eec?i.eec:{};i&&st.setDOMText(jQuery(st.oDefaults.sSelectorConfigurationSummary),i);let s=jQuery("[data-template='summary']");if(e=jQuery.extend(n,e),a&&!a.efficiency&&e&&e["energy-efficiency-category"]&&(a.efficiency=e["energy-efficiency-category"]),s.length){if(i&&i.description&&s.find(".nm-j-configurator-text-description").html(i.description),e)for(r in r="",e)e.hasOwnProperty(r)&&("image"===r?s.find(st.oDefaults.selectorModelImage).attr("src",e[r]):s.find([st.oDefaults.selectorModelText,r].join("")).html(e[r]));if(a){for(r in r="",a)a.hasOwnProperty(r)&&s.find([st.oDefaults.sSelectorSnippetTextEec,r].join("")).html(a[r]);a.efficiency&&a["efficiency-images"]&&(o=a["efficiency-images"].eec_image,s.find(st.oDefaults.selectorEecImage).attr("src",o))}}if(l.a.isConfigurable()){const t=[...document.querySelectorAll(st.oDefaults.sSelectorCarPriceRate)],e="nm-hidden",n=!!l.a.getConfigurationCarPriceRate();n?t.forEach(t=>{t.classList.remove(e)}):t.forEach(t=>{t.classList.add(e)}),st.toggleFinancingFootnoteVisibility(n)}},st.toggleFinancingFootnoteVisibility=t=>{const e=document.querySelector(".nm-footnote-finance"),n=SETUPS.get("nemo.footnote-engine.active");e&&!n&&(t?e.classList.remove("nm-hidden"):e.classList.add("nm-hidden"))},st.updateEnergyEfficiencyImage=function(){const t=l.a.getConfiguration();if(document.querySelector('[data-template="summary"]')&&t&&t.eec&&t.eec["efficiency-images"]&&t.eec["efficiency-images"].eec_character){[...document.querySelectorAll(".nm-j-configurator-efficiency-class-image")].forEach(e=>{e.src=t.eec["efficiency-images"].eec_character})}},lt.initialize=function(t){st.eventBus=t,st.$stage=jQuery(st.oDefaults.sStageID),l.a.isConfigurable()&&st.addEvents(),document.cookie.indexOf("myAudi=")>-1&&jQuery("body").addClass("nm-logged-in")};var ct=n(45),ut=n(3),dt=n(5);const mt='<div class="nm-su-result">\n\t{{?!!it.audicode}}\n\t\t{{?!!it.configuration}}\n\t\t<div class="nm-su-result-wrap">\n\t\t\t<div class="nm-su-result-audicode clearfix">\n\t\t\t\t{{? SETUPS.get(\'scope.nemo.audicode.externallink\')}}\n\t\t\t\t\t{{var target = "target=\'blank\'";}}\n\t\t\t\t\t{{var link = \'/\' + it.audicode;}}\n\t\t\t\t{{??}}\n\t\t\t\t\t{{var target = "";}}\n\t\t\t\t\t{{var link = "#";}}\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.success===false}}\n\t\t\t\t\t{{?it[\'vtp-audicode\'] && it[\'other-url\']}}\n\t\t\t\t\t<div class="nm-su-vtp">\n\t\t\t\t\t\t<a href="{{=it[\'other-url\']}}" class="nm-link-cta audi-j-quick-search-result-tracking" {{=target}}>\n\t\t\t\t\t\t\t<span class="nm-su-result-audicode-label">{{=window.i18n[\'search-layer.your-audicode\']}}</span>&nbsp;\n\t\t\t\t\t\t\t <strong>{{=it.audicode}}</strong>\n\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="nm-su-vtp-image"></div>\n\t\t\t\t\t\t<div class="nm-su-vtp-description">\n\t\t\t\t\t\t\t<span class="nm-headline-teaser">\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.available-cars\']}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div class="nm-description nm-label-info">\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.available-cars-info\']}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a href="{{=it[\'other-url\']}}" class="nm-el-btn nm-el-btn-01 nm-el-btn-ast audi-j-quick-search-result-tracking" {{=target}}>\n\t\t\t\t\t\t\t\t<span>{{=window.i18n[\'search-layer.your-car\']}}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<div class="nm-text-list">\n\t\t\t\t\t\t\t\t<span class="nm-text-list-bold">\n\t\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.label.disclaimer\']}}:\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.vtp-warning\']}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{{??}}\n\t\t\t\t\t\t<strong class="nm-headline-teaser">{{=it.message}}</strong>\n\t\t\t\t\t{{?}}\n\t\t\t\t{{??}}\n\t\t\t\t\t<a href="{{=link}}" class="nm-link-cta nm-j-audicode-accept audi-j-quick-search-result-tracking" {{=target}}>\n\t\t\t\t\t\t<span class="nm-su-result-audicode-label">{{=window.i18n[\'search-layer.your-audicode\']}}</span>&nbsp;\n\t\t\t\t\t\t<strong>{{=it.audicode}}</strong>\n\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\t<img class="nm-su-result-audicode-image" src="{{=it.mediaservice}}{{=it.configuration.images[\'exterior_front\'][\'flyout\']}}"/>\n\t\t\t\t\t<div class="nm-su-result-audicode-description">\n\t\t\t\t\t\t<span class="nm-headline-teaser">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.carlineName}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class="nm-description nm-label-info">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.description}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<strong class="nm-headline-teaser nm-su-result-audicode-price">\n\t\t\t\t\t\t\t{{=it.configuration.configuration.price}}\n\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t<a href="{{=link}}" {{=target}} class="nm-j-audicode-accept nm-el-btn nm-el-btn-01 nm-el-btn-ast audi-j-quick-search-result-tracking">{{=window.i18n[\'search-layer.load-configuration\']}}</a>\n\t\t\t\t\t\t<div class="nm-text-list">\n\t\t\t\t\t\t\t<span class="nm-text-list-bold">\n\t\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.label.disclaimer\']}}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{{=window.i18n[\'search-layer.configuration-overwrite-warning\']}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{? !SETUPS.get(\'scope.nemo.hide.consumption-entries\')}}\n\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata && (it.configuration.configuration.techdata[\'consumption-combined\'] || it.configuration.configuration.techdata[\'carbon-dioxide-emissions\'] || it.configuration.configuration.techdata[\'efficiency-class\'])}}\n\t\t\t\t\t\t\t\t<dl class="nm-su-result-audicode-consumption-entries clearfix audi-copy-s">\n\t\t\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata[\'consumption-combined\']}}\n\t\t\t\t\t\t\t\t\t\t<dt class="nm-su-result-audicode-consumption-label">{{=window.i18n[\'nemo.ui.consumption-combined\']}}*:</dt>\n\t\t\t\t\t\t\t\t\t\t<dd class="nm-su-result-audicode-consumption-value">{{=it.configuration.configuration.techdata[\'consumption-combined\']}}</dd>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata[\'carbon-dioxide-emissions\']}}\n\t\t\t\t\t\t\t\t\t\t<dt class="nm-su-result-audicode-consumption-label">{{=window.i18n[\'nemo.ui.emission-combined\']}}*:</dt>\n\t\t\t\t\t\t\t\t\t\t<dd class="nm-su-result-audicode-consumption-value">{{=it.configuration.configuration.techdata[\'carbon-dioxide-emissions\']}}</dd>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{? !SETUPS.get(\'scope.nemo.hide.eec-entry\')}}\n\t\t\t\t\t\t\t\t\t\t{{? it.configuration.configuration.techdata[\'efficiency-class\']}}\n\t\t\t\t\t\t\t\t\t\t\t<dt class="nm-su-result-audicode-consumption-label">{{=window.i18n[\'nemo.ui.efficiency-class\']}}:</dt>\n\t\t\t\t\t\t\t\t\t\t\t<dd class="nm-su-result-audicode-consumption-value">{{=it.configuration.configuration.techdata[\'efficiency-class\']}}</dd>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t</div>\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t</div>\n\t\t{{??}}\n\t\t\t<div class="nm-su-result-audicode">\n\t\t\t\t<strong class="nm-headline-teaser">\n\t\t\t\t\t{{=window.i18n[\'search-layer.audicode-loading\']}}\n\t\t\t\t</strong>\n\t\t\t\t<div class="nm-j-audicode-loading nm-loading">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{{?}}\n\t{{?}}\n\t{{?!it.audicode}}\n\t\t<div class="nm-su-result-wrap">\n\t\t\t{{?it.search.length}}\n\t\t\t\t<ul class="nm-su-result-list-group">\n\t\t\t\t\t{{~ it.search :entry }}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<h2 class="nm-su-result-list-item-headline">\n\t\t\t\t\t\t\t\t<span class="nm-label-text-bold">{{=entry.value.carlineName}}\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="nm-label-text-bold">{{=entry.key}}</span>\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t<ul class="nm-su-result-list">\n\t\t\t\t\t\t\t\t{{~ entry.value.items :item }}\n\t\t\t\t\t\t\t\t\t<li class="nm-j-configurator-item nm-j-configurator-status_{{=item.status}} clearfix"\n\t\t\t\t\t\t\t\t\tdata-configurator-id="{{=item.id}}">\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-image">\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.image}}\n\t\t\t\t\t\t\t\t\t\t\t\t<img src="{{=item.image}}" alt="{{=item.name}}" class="nm-image" />\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-content">\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-j-configurator-name nm-text-list-bold">\n\t\t\t\t\t\t\t\t\t\t\t\t{{=item.name}}\n\t\t\t\t\t\t\t\t\t\t\t\t{{? !!item.nonrenderable && item.nonrenderable == true }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-text-list"><br />{{=window.i18n[\'configuration.not-rendable-message\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.description}}\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-description nm-text-list">\n\t\t\t\t\t\t\t\t\t\t\t\t{{= item.description || \'\'}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-info">\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-add clearfix">\n\t\t\t\t\t\t\t\t\t\t\t\t{{?!!item.url}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a class="nm-info nm-layerLink" href="{{=item.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-conflict-icon" title="#I18N("nemo.ui.common.conflict" "Konflikt")"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-price nm-text-list">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{? !!item.price}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-j-configurator-text-price">{{=item.price}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-add-btn">\n\t\t\t\t\t\t\t\t\t\t\t\t<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-at-btn-state01">{{=window.i18n[\'search-layer.add-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-at-btn-state02">{{=window.i18n[\'search-layer.item-included\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-at-btn-state03">{{=window.i18n[\'search-layer.remove-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{{~}}\n\t\t\t\t</ul>\n\t\t\t{{?}}\n\t\t\t<div class="nm-su-sitesearch-list">\n\t\t\t\t{{?it.modelSearch.length}}\n\t\t\t\t\t<ul class="nm-su-modelsearch-group">\n\t\t\t\t\t\t{{~it.modelSearch :modelItem}}\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a class="nm-link-basic audi-j-quick-search-result-tracking" href="{{=modelItem.url}}">\n\t\t\t\t\t\t\t\t<span>{{=modelItem.name}}</span>\n\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.siteMapSearch.length}}\n\t\t\t\t\t<ul class="nm-su-sitemapsearch-group">\n\t\t\t\t\t\t{{~it.siteMapSearch :siteMapItem}}\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\tvar itemName = siteMapItem.name;\n\t\t\t\t\t\t\t\tvar replacedName = itemName.replace( \'[rhombus]\', \'<span class="nm-icon-rhombus"></span>\' );\n\t\t\t\t\t\t\t\treplacedName = replacedName.replace( \':plus\', \'<span class="nm-brand-plus">:plus</span>\' );\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-link-basic audi-j-quick-search-result-tracking" href="{{=siteMapItem.url}}">\n\t\t\t\t\t\t\t\t\t<span>{{=replacedName}}</span>\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t\t{{?it.footerSearch.length}}\n\t\t\t\t\t<ul class="nm-su-footersearch-group">\n\t\t\t\t\t\t{{~it.footerSearch :footerItem}}\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a class="nm-link-basic audi-j-quick-search-result-tracking" href="{{=footerItem.url}}">\n\t\t\t\t\t\t\t\t<span>{{=footerItem.name}}</span>\n\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t{{?}}\n\t\t\t</div>\n\t\t\t/*Proposals*/\n\t\t\t<ul class="nm-su-result-list-group">\n\t\t\t\t{{?it.searchListProposals.length}}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<ul class="nm-su-result-list nm-su-proposal-list">\n\t\t\t\t\t\t\t{{~it.searchListProposals :proposalItem}}\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="{{=proposalItem.Url}}" x-cq-linkchecker="valid" class="nm-su-proposol-item{{?proposalItem.Type=="Layer"}} nm-layerLink{{?}} audi-j-quick-search-result-tracking">\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-image">\n\t\t\t\t\t\t\t\t\t\t\t{{? !!proposalItem.ImageUrl}}\n\t\t\t\t\t\t\t\t\t\t\t\t<img src="{{=proposalItem.ImageUrl}}" alt="{{=proposalItem.Headline}}" class="nm-image" />\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="nm-su-proposal-list-content">\n\t\t\t\t\t\t\t\t\t\t\t<strong class="nm-text-list-bold">{{=proposalItem.Headline}}</strong>\n\t\t\t\t\t\t\t\t\t\t\t<div class="nm-su-result-list-description nm-text-list">{{=proposalItem.Description}}</div>\n\t\t\t\t\t\t\t\t\t\t\t<span class="nm-link-basic" >\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{{=window.i18n[\'discover-now\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t{{~}}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t{{?}}\n\t\t\t</ul>\n\t\t</div>\n\t\t{{?!!it.gsaSearchUrl}}\n\t\t\t<div class="nm-su-gsa">\n\t\t\t\t<a class="nm-j-tracking-search-submit nm-link-basic" href="{{=it.gsaSearchUrl}}">\n\t\t\t\t\t<span>{{=window.i18n[\'search-layer.search-audi-web\']}} &quot;<span class="nm-highlight">{{=it.searchString}}</span>&quot; {{=window.i18n[\'search-layer.search-for\']}}</span>\n\t\t\t\t\t<svg class="nm-icon-arrow">\n\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t{{?}}\n\t{{?}}\n</div>',gt=".nm-header-overlay-container .nm-navigation-header-search-overlay.nm-header-overlay-is-open",ft={},pt={__:ft};ft.mobileBreakpoint=750,ft.searchLayerOpen=!1,ft.searcListProposalsArr=null,ft.audicodeActivated=!1,ft.oDefaults={sAcceptAudicodeButton:".nm-j-audicode-accept"},ft.loadSearchListProposals=async function(){const t=SETUPS.get("nemo.url.searchproposals");return fetch(t,{credentials:"include"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(t=>{ft.searcListProposalsArr=t&&t.Proposals?t.Proposals:[]}).catch(t=>console.log("Error fetching search proposals - server responded with: ",t))},ft.searchResultListProposals=function(t){var e,n=[];return t&&(e=t.toLowerCase(),ft.searcListProposalsArr&&ft.searcListProposalsArr.length&&jQuery.each(ft.searcListProposalsArr,(function(t,i){if(!i.Search)return!0;i.Search.indexOf(e)>-1&&n.push(i)}))),n},ft.addEvents=function(){var t="click";ft.legacyEventBus.on("keyup",".nm-su .nm-su-input",ft.onOpenSearchLayer),ft.legacyEventBus.on("paste",".nm-su .nm-su-input",ft.onOpenSearchLayerDelayed),ft.legacyEventBus.on("click",".nm-su .nm-su-input",ft.onOpenSearchLayer),ft.legacyEventBus.on("click",".nm-su .nm-su-submit",ft.onOpenSearchLayer),ft.legacyEventBus.on("click",".nm-su .nm-su-reset",ft.resetSearch),ft.legacyEventBus.on("submit",".nm-su form",ft.formSubmit),ft.eventBus.on(r.appEvents.MENUFLYOUT_OPEN,ft.clearSearch),ft.eventBus.on(r.appEvents.MENUFLYOUT_CLOSE,ft.emptySearchResults),void 0!==document.documentElement.ontouchstart&&(t="touchstart"),ft.legacyEventBus.on(t,ft.onClickOutsideOfSearchLayer)},ft.removeEvents=function(){var t="click";ft.legacyEventBus.off("keyup",".nm-su .nm-su-input",ft.onOpenSearchLayer),ft.legacyEventBus.off("paste",".nm-su .nm-su-input",ft.onOpenSearchLayerDelayed),ft.legacyEventBus.off("click",".nm-su .nm-su-input",ft.onOpenSearchLayer),ft.legacyEventBus.off("click",".nm-su .nm-su-submit",ft.onOpenSearchLayer),ft.legacyEventBus.off("click",".nm-su .nm-su-reset",ft.resetSearch),ft.legacyEventBus.off("submit",".nm-su form",ft.formSubmit),ft.eventBus.off(r.appEvents.MENUFLYOUT_OPEN,ft.clearSearch),ft.eventBus.off(r.appEvents.MENUFLYOUT_CLOSE,ft.emptySearchResults),void 0!==document.documentElement.ontouchstart&&(t="touchstart"),ft.legacyEventBus.off(t,ft.onClickOutsideOfSearchLayer)},ft.emptySearchResults=function(){jQuery(".nm-su-result-container").empty()},ft.resetSearch=function(){jQuery(gt).find("input.nm-su-input").focus(),ft.emptySearchResults(),jQuery(gt).find("input.nm-su-input").keyup()},ft.clearSearch=function(t){void 0!==t.item&&(jQuery(gt).find("input.nm-su-input").val(""),jQuery(gt).find("input.nm-su-input").focus())},ft.formSubmit=function(t){var e,n;return t&&"function"==typeof t.preventDefault&&t.preventDefault(),ft.loadedConfiguration?(ft.acceptLoadedConfiguration(),!1):(jQuery(".nm-j-audicode-loading").length||(e=ft.readSearchStringFromInput()).length<=0||(n=ft.buildSearchResultsPageUrl(e))&&ft.performSearch(n,e),!1)},ft.performSearch=function(t,e){const n=ft.generateTrackingPayload(t,e),i=new CustomEvent("CUSTOM_TRACKING_EVENT",n);document.dispatchEvent(i),document.location=t},ft.generateTrackingPayload=function(t,e){let n="button";document.activeElement.classList.contains("nm-su-input")&&(n="other");return{detail:{eventInfo:{eventAction:"internal_link",eventName:"main search - submit"},attributes:{componentName:"main search",label:"",currentURL:window.location.href,targetURL:t,clickID:"",elementName:n,value:e,pos:""}}}},ft.readSearchStringFromInput=function(){var t=jQuery(".nm-su .nm-su-input").val();return t=t.replace(/^\s+/g,"").replace(/</g,"").replace(/>/g,"")},ft.onOpenSearchLayerDelayed=function(){var t=this;setTimeout((function(){jQuery(t).keyup()}),50)},ft.preventEvent=function(){return!1},ft.removeStopWordsFromSearchString=function(t){var e,n=t;return l.a.getSearchStopWords()&&(e=new RegExp("\\b(?:i|"+l.a.getSearchStopWords()+")\\b\\s*","gi"),n=n.replace(e,"")),n},ft.detectAndStoreAudiCode=function(t,e){return 8===e.length&&-1!==e.search(/[Aa]{1}[a-zA-Z0-9]{7}/)?(t.audicode=e.toUpperCase(),ft.legacyEventBus.off("submit",".nm-su form",ft.formSubmit),ft.legacyEventBus.off("submit",".nm-su form",ft.preventEvent),ft.legacyEventBus.on("submit",".nm-su form",ft.preventEvent)):(ft.legacyEventBus.off("submit",".nm-su form",ft.preventEvent),ft.legacyEventBus.off("submit",".nm-su form",ft.formSubmit),ft.legacyEventBus.on("submit",".nm-su form",ft.formSubmit)),t},ft.handleAudiCodeInput=function(t,e){var n=SETUPS.get("nemo.search.audicodestopwords");return e.audicode&&!e.search.length&&n&&-1===n.indexOf(t)?ft.triggerAudicodeLoad(e.audicode):e.audicode=null,e.searchString=t||ft.readSearchStringFromInput(),e.siteMapSearch=l.a.searchNavigation(t,"siteMap"),e.modelSearch=l.a.searchNavigation(t,"model"),e.footerSearch=l.a.searchNavigation(t,"footer"),e.gsaSearchUrl=ft.buildSearchResultsPageUrl(t),e.searchListProposals=ft.searchResultListProposals(t),e},ft.generateResultList=function(t){var e,n={},i=t;return ft.searchLayerOpen=!0,n=ft.detectAndStoreAudiCode(n,i),-1!==i.indexOf("|")&&(n.prstring=i),-1!==i.search(/^([a-z0-9]+)=((true)|(false))$/)&&(e=/^([a-z0-9]+)=((true)|(false))$/.exec(i),dt.state.triggerModeChange(e[1],e[2])),-1!==i.search(/dpu_extra=(.*)/)&&(e=/^dpu_extra=(.*)/.exec(i),h.a.setDpuExtra(e[1])),i=ft.removeStopWordsFromSearchString(i),n.search=SETUPS.get("showEquipmentsWithinSearchLayerContext")&&i&&i.length>1?l.a.search(i,!0):[],n=ft.handleAudiCodeInput(i,n)},ft.handleSearch=function(t,e,n,i){var o,a=ft.generateResultList(n),l=e!==n||"click"===t.type;n.length>1&&l?(o=s.template.render(mt,a),i.empty().html(o),ft.eventBus.emit(r.appEvents.SEARCH_OPEN,a)):n.length<=1&&ft.closeSearchLayer()},ft.handleSmallViewportSubmit=function(t,e){var n,i=e;jQuery(window).width()<ft.mobileBreakpoint&&jQuery(t.target).hasClass("nm-su-submit")&&(jQuery(".nm-j-audicode-loading").length?ft.audicodeActivated&&ft.acceptLoadedConfiguration():(i=ft.readSearchStringFromInput(),null!==(n=ft.buildSearchResultsPageUrl(i))&&(document.location=n)))},ft.isExitConditionFulfilled=function(t){if(ft.audicodeActivated){if(13===t.keyCode&&jQuery(".nm-j-audicode-accept").is(":visible"))return ft.acceptLoadedConfiguration(),!0}else ft.loadedConfiguration=null;return 16===t.keyCode||13===t.keyCode},ft.onOpenSearchLayer=function(t){let e,n,i,r;ft.isExitConditionFulfilled(t)||(ft.searchForm=jQuery(t.target).parents("form"),e=jQuery(this).closest(".nm-su"),n=e.find(".nm-su-result-container"),i=ft.readSearchStringFromInput(),r=e.data("current")||"",r!==i&&(ft.audicodeActivated=!1,ft.loadedConfiguration=null),e.data("current",i),ft.handleSearch(t,r,i,n),ft.setFlyoutHeight(n),ft.handleSmallViewportSubmit(t,i))},ft.buildSearchResultsPageUrl=function(t){let e=l.a.getSearchResultsPageUrl();const n=SETUPS.get("nemo.newSiteSearch.enabled")?"?q=":"#search=";return e?(e+=n+encodeURIComponent(t.toLowerCase()),e):null},ft.onClickOutsideOfSearchLayer=function(t){let e=t.target;ft.searchLayerOpen&&ft.isClickedTargetOutsideSearchLayer(e)&&ft.isClickedTargetOutsideSearchSearchInputField(e)&&ft.isClickedTargetOutsideAnyOtherLayer(e)&&ft.closeSearchLayer()},ft.isClickedTargetOutsideSearchLayer=function(t){return s.dom.isElementOutsideOfElementWithSelector(t,".nm-su-result-container")},ft.isClickedTargetOutsideSearchSearchInputField=function(t){return s.dom.isElementOutsideOfElementWithSelector(t,"div.nm-su")},ft.isClickedTargetOutsideAnyOtherLayer=function(t){return s.dom.isElementOutsideOfElementWithSelector(t,".nm-layer-wrapper")},ft.closeSearchLayer=function(){setTimeout((function(){ft.searchLayerOpen=!1,jQuery(".nm-su-result-container").empty(),ft.eventBus.emit(r.appEvents.SEARCH_CLOSE)}),100)},ft.triggerAudicodeLoad=async function(t){h.a.loadConfigurationByAudiCode(t).then((function(t){ut.a.adoptConfiguration(t).then(()=>{const e=l.a.getCarImages();ft.onAudiCodeLoaded({...t,images:e})})}),(function(e){e.message=e.message||window.i18n["standard-audicode-error"],e.audicode=t,ft.showAudiCodeLoadError(e)}))},ft.showAudiCodeLoadError=function(t){var e,n=jQuery(".nm-su-result-container");if(t.message=l.a.getErrorMessage(t),"AUDICODE_CONF_NOT_VALID"===t.id&&SETUPS.get("scope.nemo.audicode.not_valid_pdflink")){t.pdflink=SETUPS.get("nemo.pdf.url")+"/audicode/"+t.audicode;const e="search-layer.audicode-pdf";t.pdflabel=window.i18n&&window.i18n[e]?window.i18n[e]:"PDF anzeigen"}e=s.template.render('<div class="nm-su-result-audicode-wrap">\n\t<div class="nm-su-result-audicode">\n\t\t<h2 class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b">{{=window.i18n[\'search-layer.audicode.error\']}}: </h2>\n\t\t<div class="nm-error">\n\t\t\t<p class="nm-error-layer-message nm-el-pg nm-el-pg-03 nm-at-pg-indicator">{{=it.message}}</p>\n\t\t</div>\n\t\t{{?it.pdflink}}\n\t\t\t<a class="audi-link-s audi-link-s--arrow-front" href="{{=it.pdflink}}" target="_blank">\n\t\t\t\t<span class="audi-link-s__text">{{=it.pdflabel}}</span>\n\t\t\t\t<svg class="audi-link-s__icon">\n\t\t\t\t\t<use xlink:href="{{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/print-small.svg#nm-icon-print-small"}}"></use>\n\t\t\t\t</svg>\n\t\t\t</a>\n\t\t{{?}}\n\t</div>\n</div>',t),console.error(t),ft.legacyEventBus.off("submit",".nm-su form",ft.preventEvent),ft.legacyEventBus.on("submit",".nm-su form",ft.formSubmit),n.empty().html(e),ft.setFlyoutHeight(n)},ft.handleAudiCodeError=function(t){let e={};t&&(e.message=t),ft.audicodeActivated=!1,ft.loadedConfiguration=void 0,ft.showAudiCodeLoadError(e)},ft.onAudiCodeLoaded=function(t){let e,n;ft.loadedConfiguration=t,ft.loadedConfiguration&&t.audicode&&ft.loadedConfiguration.audicode.id?(e=ft.loadedConfiguration.audicode.id.toUpperCase(),n=jQuery(".nm-su-input").filter((function(){return jQuery(this).val().toUpperCase()===e})),n&&1===n.length?(ft.audicodeActivated=!0,ft.showLoadedConfiguration(n)):ft.handleAudiCodeError()):ft.handleAudiCodeError(window.i18n["standard-audicode-error"],"ERROR loading Audicode")},ft.showLoadedConfiguration=function(t){const e=t.closest(".nm-su").find(".nm-su-result-container"),n={search:{},audicode:ft.loadedConfiguration.audicode.id,configuration:ft.loadedConfiguration,mediaservice:l.a.getRenderUrl(),success:!!ft.loadedConfiguration.audicode.success,"vtp-audicode":!!ft.loadedConfiguration.audicode["other-url"],"other-url":ft.loadedConfiguration.audicode["other-url"]?ft.loadedConfiguration.audicode["other-url"]:null,message:ft.loadedConfiguration.audicode.message},i=s.template.render(mt,n);e.one("click.accept.loaded.audicode",ft.oDefaults.sAcceptAudicodeButton,ft.acceptLoadedConfiguration),e.empty().html(i),ft.setFlyoutHeight(e)},ft.acceptLoadedConfiguration=function(t){let e=ft.loadedConfiguration&&ft.loadedConfiguration.audicode?ft.loadedConfiguration.audicode:null;if(t&&!SETUPS.get("scope.nemo.audicode.externallink")&&"function"==typeof t.preventDefault&&t.preventDefault(),t&&SETUPS.get("scope.nemo.audicode.externallink"))return!0;if(ft.eventBus.emit(r.appEvents.SEARCH_LOAD_AUDICODE,{audicode:e}),ft.loadedConfiguration.audicode["other-url"]){if(""!==ft.loadedConfiguration.audicode["other-url"]){if(SETUPS.get("scope.nemo.audicode.externallink"))return t.target.href=ft.loadedConfiguration.audicode["other-url"],!0;window.location=ft.loadedConfiguration.audicode["other-url"]}}else h.a.handleExternalConfiguration(ft.loadedConfiguration,{startType:"audicode-search"}),r.router.open("page",l.a.getCurrentCarlineUrl());ft.closeSearchLayer()},ft.setFlyoutHeight=function(t){jQuery(".nm-su").removeClass("noSrcollbars"),t.height()<410&&jQuery(".nm-su").addClass("noSrcollbars");let e=t.height()+150;jQuery(".nm-has-additional-logo").length>0&&(e+=30),jQuery(gt).height(e)},pt.initialize=function(t){ft.eventBus=t,ft.legacyEventBus=jQuery("body"),ft.addEvents(),ft.loadSearchListProposals()};var ht=n(44);function vt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(vt.prototype,HTMLElement.prototype),Object.setPrototypeOf(vt,HTMLElement);class yt extends vt{static get selectors(){return{container:".nm-module-summary-dynamic-recommendation",hidden:"nm-hidden"}}constructor(){super(),this.eventBus=r.signal.getEmitter(),dt.entryScroll.register("recommendations","summary-dynamic-recommendation")}connectedCallback(){this.moduleContainer=this.querySelector(yt.selectors.container),this.addEvents(),this.renderRecommendations()}disconnectedCallback(){this.removeEvents()}addEvents(){this.eventBus.on(r.appEvents.CONFIG_UPDATE,()=>{this.renderRecommendations()})}removeEvents(){this.eventBus.off(r.appEvents.CONFIG_UPDATE,()=>{this.renderRecommendations()})}renderRecommendations(){const t=this.getRecommendations();t.length>0?this.updateContent(this.renderTemplate(t),!0):this.updateContent()}getRecommendations(t=5){return l.a.getDynamicRecommendations().slice(0,t).map(t=>Object.assign({},t,l.a.getItem(t.id)))}renderTemplate(t){return s.template.render('\n<div class="audi-headline-order-3 nm-module-summary-dynamic-recommendation-headline-main">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose-headline\']}}\n</div>\n<p class="audi-copy-s nm-module-summary-dynamic-recommendation-paragraph">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose\']}}\n</p>\n\n\x3c!-- list --\x3e\n<div class="nm-module-summary-dynamic-recommendation-itemlist">\n\t\x3c!-- configurator item --\x3e\n\t{{~it :value}}\n\t\t{{##def.dataConfiguratorId :\n\t\t\t{{? value.id}}\n\t\t\t\tdata-configurator-id="{{=value.id}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t{{##def.dataConfiguratorGroup :\n\t\t\t{{? value.RadioGroup}}\n\t\t\t\tdata-configurator-group="{{=value.RadioGroup}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t<div class="nm-j-configurator-item nm-j-configurator-status_{{=value.status}}" {{#def.dataConfiguratorId}} {{#def.dataConfiguratorGroup}}>\n\t\t\t<div class="nm-module-summary-dynamic-recommendation-item">\n\n\t\t\t\t\x3c!-- checkbox --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-checkbox audi-checkbox nm-j-configurator-delegate-click">\n\t\t\t\t\t<span class="audi-checkbox">\n\t\t\t\t\t\t<span class="audi-checkbox-symbol nm-module-summary-dynamic-recommendation-checkbox-symbol">\n\t\t\t\t\t\t\t<svg class="nm-icon-select-small nm-module-summary-dynamic-recommendation-symbol">\n\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/select-small.svg#nm-icon-select-small"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- item text --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-itemtext">\n\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-itemname-text">{{=value.name}}</p>\n\t\t\t\t\t\x3c!-- non renderable sets a remark text --\x3e\n\t\t\t\t\t{{? value.nonrenderable}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text">\n\t\t\t\t\t\t\t{{=window.i18n[\'nemo.ui.common.note\']}}:\n\t\t\t\t\t\t\t{{=window.i18n[\'configuration.not-rendable-message\']}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? !value.RadioGroup}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text nm-j-configurator-text-packageDescription"></p>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image-offerrate-wrapper">\n\t\t\t\t\t\x3c!-- image or video --\x3e\n\t\t\t\t\t{{##def.videoClass :\n\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\tnm-module-summary-dynamic-recommendation-video\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t#}}\n\n\t\t\t\t\t{{? value.image}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image {{#def.videoClass}}">\n\t\t\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t\t\t<a class="nm-layerLink" href="{{=value.url}}">\n\t\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-offerrate-wrapper">\n\t\t\t\t\t\t<audi-configurator-offerrate data-rate="{{=parseInt(parseFloat(value.einbaurate) * 100, 10)}}" class="nm-offer-rate">\n\t\t\t\t\t\t\t<div class="nm-offer-rate-container">\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-text audi-copy-s"><span class="nm-offer-rate-value">0</span>%</div>\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-image">\n\t\t\t\t\t\t\t\t\t<svg class="nm-offer-rate-icon" viewbox="0 0 48 48">\n\t\t\t\t\t\t\t\t\t\t<path d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke-opacity="0.6" stroke="#333" fill="none" />\n\t\t\t\t\t\t\t\t\t\t<path class="nm-offer-rate-path" d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke="#f50537" stroke-width="3" fill="none" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</audi-configurator-offerrate>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-price-icons">\n\t\t\t\t\t\x3c!-- price --\x3e\n\t\t\t\t\t{{? value.Series || value.price}}\n\t\t\t\t\t\t<div class="audi-copy-m nm-module-summary-dynamic-recommendation-price nm-j-configurator-text-price">\n\t\t\t\t\t\t\t{{? value.Series}}\n\t\t\t\t\t\t\t\t{{=window.i18n[\'nemo.common.serie\']}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? value.price}}\n\t\t\t\t\t\t\t\t{{=value.price}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t\x3c!-- infolayer --\x3e\n\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-iconwrapper">\n\t\t\t\t\t\t\t<a class="nm-module-summary-dynamic-recommendation-iconlink nm-layerLink" href="{{=value.url}}" title="{{=window.i18n[\'more-information\']}}">\n\t\t\t\t\t\t\t\t<svg class="nm-icon-system-info-small nm-module-summary-dynamic-recommendation-icon-system-info-small">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-info-small.svg#nm-icon-system-info-small"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{{~}}\n</div>\n\n\x3c!-- legend --\x3e\n<div class="audi-copy-m nm-module-summary-dynamic-recommendation-legend-headline">\n\t{{=window.i18n[\'dynamic-recommendations.legend-headline\']}}\n</div>\n<div class="nm-module-summary-dynamic-recommendation-legend-wrapper">\n\t<svg class="nm-icon-offer-rate-small nm-module-summary-dynamic-recommendation-icon-offer-rate-small">\n\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/offer-rate-small.svg#nm-icon-offer-rate-small"}}></use>\n\t</svg>\n\t<p class="audi-copy-s">\n\t\t{{=window.i18n[\'dynamic-recommendations.legend-info\']}}\n\t</p>\n</div>',t)}updateContent(t="",e=!1){this.moduleContainer.innerHTML=t,e?this.classList.remove(yt.selectors.hidden):this.classList.add(yt.selectors.hidden)}}window.customElements.get("audi-configurator-dynamic-recommendation")||window.customElements.define("audi-configurator-dynamic-recommendation",yt);function St(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(St.prototype,HTMLElement.prototype),Object.setPrototypeOf(St,HTMLElement);class Ct extends St{static get selectors(){return{container:".nm-module-summary-dynamic-recommendation",hidden:"nm-hidden"}}constructor(){super(),this.eventBus=r.signal.getEmitter(),dt.entryScroll.register("recommendations","summary-dynamic-recommendation")}connectedCallback(){this.moduleContainer=this.querySelector(Ct.selectors.container),this.addEvents(),this.renderRecommendations()}disconnectedCallback(){this.removeEvents()}addEvents(){this.eventBus.on(r.appEvents.CONFIG_UPDATE,()=>{this.renderRecommendations()})}removeEvents(){this.eventBus.off(r.appEvents.CONFIG_UPDATE,()=>{this.renderRecommendations()})}async renderRecommendations(){const t=await this.getRecommendations();t.length>0?this.updateContent(this.renderTemplate(t),!0):this.updateContent()}getQueryParams(){const t=l.a.getContext();let e=l.a.getPrString();const n=this.getItemsToIgnore().join("");return t&&e?(e=l.a.replacePackagesInPrString(e),e=l.a.resolvePackagesInPrString(e),new URLSearchParams({context:t,ids:e,ignore:n})):null}getItemsFromData(t,e=5){return t.map(t=>{const e=l.a.getItem(t.id);return!e||this.shouldBeIgnored(e.status)?null:{...t,...e}}).filter(t=>null!==t).slice(0,e)}shouldBeIgnored(t){return["00000","00001","00010","00011","00100","00101","00110","00111","01000","01001","01010","01011","01100","01101","01110","01111","10000"].includes(t)}getItemsToIgnore(){const t=l.a.getItems();return t?Object.values(t).filter(t=>this.shouldBeIgnored(t.status)&&3===t.id.length).map(t=>t.id):[]}getRecommendationsBackendUrl(){const t=SETUPS.get("nemo.recommendationsBackendUrl"),e=this.getQueryParams();return e&&t?t+"?"+e.toString():null}async getRecommendations(){await s.polling.wait(l.a.isInitialized,5e3);const t=await this.fetchRecommendations();return t&&t.configuration&&t.configuration.recommendations?this.getItemsFromData(t.configuration.recommendations):[]}async fetchRecommendations(){const t=this.getRecommendationsBackendUrl();if(!t)return null;return fetch(t,{method:"GET"}).then(t=>t.json()).catch(t=>(console.error("Error:",t),null))}renderTemplate(t){return s.template.render('\n<div class="audi-headline-order-3 nm-module-summary-dynamic-recommendation-headline-main">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose-headline\']}}\n</div>\n<p class="audi-copy-s nm-module-summary-dynamic-recommendation-paragraph">\n\t{{=window.i18n[\'dynamic-recommendations.others-choose\']}}\n</p>\n\n\x3c!-- list --\x3e\n<div class="nm-module-summary-dynamic-recommendation-itemlist">\n\t\x3c!-- configurator item --\x3e\n\t{{~it :value}}\n\t\t{{##def.dataConfiguratorId :\n\t\t\t{{? value.id}}\n\t\t\t\tdata-configurator-id="{{=value.id}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t{{##def.dataConfiguratorGroup :\n\t\t\t{{? value.RadioGroup}}\n\t\t\t\tdata-configurator-group="{{=value.RadioGroup}}"\n\t\t\t{{?}}\n\t\t#}}\n\t\t<div class="nm-j-configurator-item nm-j-configurator-status_{{=value.status}}" {{#def.dataConfiguratorId}} {{#def.dataConfiguratorGroup}}>\n\t\t\t<div class="nm-module-summary-dynamic-recommendation-item">\n\n\t\t\t\t\x3c!-- checkbox --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-checkbox audi-checkbox nm-j-configurator-delegate-click">\n\t\t\t\t\t<span class="audi-checkbox">\n\t\t\t\t\t\t<span class="audi-checkbox-symbol nm-module-summary-dynamic-recommendation-checkbox-symbol">\n\t\t\t\t\t\t\t<svg class="nm-icon-select-small nm-module-summary-dynamic-recommendation-symbol">\n\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/select-small.svg#nm-icon-select-small"}}></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- item text --\x3e\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-itemtext">\n\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-itemname-text">{{=value.name}}</p>\n\t\t\t\t\t\x3c!-- non renderable sets a remark text --\x3e\n\t\t\t\t\t{{? value.nonrenderable}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text">\n\t\t\t\t\t\t\t{{=window.i18n[\'nemo.ui.common.note\']}}:\n\t\t\t\t\t\t\t{{=window.i18n[\'configuration.not-rendable-message\']}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t{{?}}\n\t\t\t\t\t{{? !value.RadioGroup}}\n\t\t\t\t\t\t<p class="audi-copy-m nm-module-summary-dynamic-recommendation-additional-text nm-j-configurator-text-packageDescription"></p>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image-offerrate-wrapper">\n\t\t\t\t\t\x3c!-- image or video --\x3e\n\t\t\t\t\t{{##def.videoClass :\n\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\tnm-module-summary-dynamic-recommendation-video\n\t\t\t\t\t\t{{?}}\n\t\t\t\t\t#}}\n\n\t\t\t\t\t{{? value.image}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-image {{#def.videoClass}}">\n\t\t\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t\t\t<a class="nm-layerLink" href="{{=value.url}}">\n\t\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{{??}}\n\t\t\t\t\t\t\t\t<img src="{{=value.image}}" alt="{{=value.name}}" />\n\t\t\t\t\t\t\t\t{{? value.video}}\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-large">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-large.svg#system-play-large"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t<svg class="nm-icon-play-large nm-module-summary-dynamic-recommendation-video-play-small">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-play-small.svg#system-play-small"}}></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-offerrate-wrapper">\n\t\t\t\t\t\t<audi-configurator-offerrate data-rate="{{=parseInt(parseFloat(value.einbaurate) * 100, 10)}}" class="nm-offer-rate">\n\t\t\t\t\t\t\t<div class="nm-offer-rate-container">\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-text audi-copy-s"><span class="nm-offer-rate-value">0</span>%</div>\n\t\t\t\t\t\t\t\t<div class="nm-offer-rate-image">\n\t\t\t\t\t\t\t\t\t<svg class="nm-offer-rate-icon" viewbox="0 0 48 48">\n\t\t\t\t\t\t\t\t\t\t<path d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke-opacity="0.6" stroke="#333" fill="none" />\n\t\t\t\t\t\t\t\t\t\t<path class="nm-offer-rate-path" d="M3,24a21,21 0 1,0 42,0a21,21 0 1,0 -42,0" stroke="#f50537" stroke-width="3" fill="none" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</audi-configurator-offerrate>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-price-icons">\n\t\t\t\t\t\x3c!-- price --\x3e\n\t\t\t\t\t{{? value.Series || value.price}}\n\t\t\t\t\t\t<div class="audi-copy-m nm-module-summary-dynamic-recommendation-price nm-j-configurator-text-price">\n\t\t\t\t\t\t\t{{? value.Series}}\n\t\t\t\t\t\t\t\t{{=window.i18n[\'nemo.common.serie\']}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t{{? value.price}}\n\t\t\t\t\t\t\t\t{{=value.price}}\n\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\n\t\t\t\t\t\x3c!-- infolayer --\x3e\n\t\t\t\t\t{{? value.url}}\n\t\t\t\t\t\t<div class="nm-module-summary-dynamic-recommendation-iconwrapper">\n\t\t\t\t\t\t\t<a class="nm-module-summary-dynamic-recommendation-iconlink nm-layerLink" href="{{=value.url}}" title="{{=window.i18n[\'more-information\']}}">\n\t\t\t\t\t\t\t\t<svg class="nm-icon-system-info-small nm-module-summary-dynamic-recommendation-icon-system-info-small">\n\t\t\t\t\t\t\t\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/system-info-small.svg#nm-icon-system-info-small"}}></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{?}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{{~}}\n</div>\n\n\x3c!-- legend --\x3e\n<div class="audi-copy-m nm-module-summary-dynamic-recommendation-legend-headline">\n\t{{=window.i18n[\'dynamic-recommendations.legend-headline\']}}\n</div>\n<div class="nm-module-summary-dynamic-recommendation-legend-wrapper">\n\t<svg class="nm-icon-offer-rate-small nm-module-summary-dynamic-recommendation-icon-offer-rate-small">\n\t\t<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/offer-rate-small.svg#nm-icon-offer-rate-small"}}></use>\n\t</svg>\n\t<p class="audi-copy-s">\n\t\t{{=window.i18n[\'dynamic-recommendations.legend-info\']}}\n\t</p>\n</div>',t)}updateContent(t="",e=!1){this.moduleContainer.innerHTML=t,e?this.classList.remove(Ct.selectors.hidden):this.classList.add(Ct.selectors.hidden)}}function Et(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-dynamic-recommendation-bff")||window.customElements.define("audi-configurator-dynamic-recommendation-bff",Ct),Object.setPrototypeOf(Et.prototype,HTMLElement.prototype),Object.setPrototypeOf(Et,HTMLElement);class bt extends Et{static get selectors(){return{radioFilter:".nm-module-engine-selection-filter-radio",selectFilter:".nm-module-engine-selection-filter-select",engineEntry:".nm-module-engine-selection-engine",engineSubList:".nm-module-engine-selection-engine-list",trimlineDetailLinks:".nm-module-engine-selection-trimline-layerlink-icon",enginesVisibleCount:".nm-j-enginesVisible",noResults:".nm-module-engine-selection-no-results",resetButton:".nm-module-engine-selection-no-results-reset",notHidden:":not(.nm-hidden)",hidden:"nm-hidden"}}get isInitialFiltersReset(){return"true"===this.dataset.resetFilters}get isConfigurationObserver(){return"false"===this.dataset.resetFilters}connectedCallback(){this.initElements(),this.addEvents(),this.initTrimlineFilter=this.initTrimlineFilter.bind(this),this.isConfigurationObserver&&c.stateRegistry.subscribeToStore(J.a,this.initTrimlineFilter)}disconnectedCallback(){this.removeEvents(),this.isConfigurationObserver&&c.stateRegistry.unsubscribeFromStore(J.a,this.initTrimlineFilter)}addEvents(){this.resetButton.addEventListener("click",()=>this.resetFilters()),[...this.radioFilters].forEach(t=>{t.addEventListener("change",()=>this.updateRadioFilterSelection(t))}),[...this.selectFilters].forEach(t=>{t.addEventListener("change",()=>this.updateFilters())})}removeEvents(){this.resetButton.removeEventListener("click",()=>this.resetFilters()),[...this.radioFilters].forEach(t=>{t.removeEventListener("change",()=>this.updateRadioFilterSelection(t))}),[...this.selectFilters].forEach(t=>{t.removeEventListener("change",()=>this.updateFilters())})}initElements(){this.engineEntries=this.querySelectorAll(bt.selectors.engineEntry),this.selectFilters=this.querySelectorAll(bt.selectors.selectFilter),this.radioFilters=this.querySelectorAll(bt.selectors.radioFilter),this.visibleCounter=this.querySelector(bt.selectors.enginesVisibleCount),this.noResultsBox=this.querySelector(bt.selectors.noResults),this.resetButton=this.querySelector(bt.selectors.resetButton),this.isInitialFiltersReset&&this.resetFilters()}resetFilters(){[...this.selectFilters].forEach(t=>t.value=""),[...this.radioFilters].forEach(t=>t.checked=!1),this.updateFilters()}initTrimlineFilter(t){const e=t.selectedTrimline;e&&([...this.selectFilters].forEach(t=>{t.value=e}),this.updateFilters())}updateRadioFilterSelection(t){const e=t.getAttribute("name");[...this.querySelectorAll(`${bt.selectors.radioFilter}[name="${e}"]`)].filter(e=>e!==t).forEach(t=>t.checked=!1),this.updateFilters()}updateFilters(){const t=this.getRadioFiltersValues().concat(this.getSelectFiltersValues());this.updateTrimlineDetailLink(t),this.filterEngineList(t)}updateTrimlineDetailLink(t){const e=t.filter(t=>"trimline"===t.name);if([...this.querySelectorAll(bt.selectors.trimlineDetailLinks)].forEach(t=>t.classList.add(bt.selectors.hidden)),e.length>0){const t=this.querySelector(`${bt.selectors.trimlineDetailLinks}[data-trimline="${e[0].value}"]`);t&&t.classList.remove(bt.selectors.hidden)}}getRadioFiltersValues(){return[...this.radioFilters].filter(t=>!0===t.checked).map(t=>this.getFilter(t))}getSelectFiltersValues(){return[...this.selectFilters].filter(t=>""!==t.value).map(t=>this.getFilter(t))}getFilter(t){return{name:t.getAttribute("name"),value:t.value}}filterEngineList(t){const e=t.reduce((t,e)=>`${t}[data-filter-${e.name}~="${e.value}"]`,bt.selectors.engineEntry);[...this.engineEntries].forEach(t=>t.classList.add(bt.selectors.hidden)),[...this.querySelectorAll(e)].forEach(t=>t.classList.remove(bt.selectors.hidden)),this.hideEmptyContainer(),this.updateVisibleEngineCounter()}hideEmptyContainer(){[...this.querySelectorAll(bt.selectors.engineSubList)].forEach(t=>{0===t.querySelectorAll(bt.selectors.engineEntry+bt.selectors.notHidden).length?t.classList.add(bt.selectors.hidden):t.classList.remove(bt.selectors.hidden)})}updateVisibleEngineCounter(){const t=this.querySelectorAll(bt.selectors.engineEntry+bt.selectors.notHidden).length;this.visibleCounter.innerHTML=t,0!==t?this.noResultsBox.classList.add(bt.selectors.hidden):this.noResultsBox.classList.remove(bt.selectors.hidden)}}function wt(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-engine-selection")||window.customElements.define("audi-configurator-engine-selection",bt),Object.setPrototypeOf(wt.prototype,HTMLElement.prototype),Object.setPrototypeOf(wt,HTMLElement);class Dt extends wt{constructor(){super()}connectedCallback(){document.body.classList.add("nm-has-current-consumption")}disconnectedCallback(){document.body.classList.remove("nm-has-current-consumption")}}window.customElements.get("audi-configurator-current-consumption")||window.customElements.define("audi-configurator-current-consumption",Dt);const _t={},At={__:_t,initialized:!1};_t.oDefaults={sSelectorLayerOuter:".nm-layer-equipment-search-layer",sSelectorSnippetText:".nm-j-configurator-text-",sSelectorFooter:".nm-equipment-search-footer__inner-wrapper",sSelectorResultsWrap:".nm-equipment-search-result-container",sSelectorSearchInput:".nm-equipment-search-input",sSelectorSearchForm:".nm-equipment-search-form form"},_t.searchListArr=[],_t.getAllItems=function(){var t,e,n,i,r,o=l.a.getFamilies();if(_t.searchListArr=[],o)for(t in o)if(t&&"equipment"===o[t].type&&(i={family:o[t]},e=l.a.getItemsByFamily(t))){for(n in i.items=[],e)n&&(r=l.a.getItem(n),i.items.push(r));_t.searchListArr.push(i)}return _t.searchListArr},_t.handleConfigUpdate=function(){var t,e,n,i,r=_t.getLayer();r&&(_t.updateFooterText(r),(t=_t.getAllItems())&&((e=_t.getSearchString()).length>1?(n=_t.validateSearchString(e),i=_t.parseResults(n.search),_t.populateResultList(i)):_t.populateResultList(t)))},_t.parseResults=function(t){var e,n=[];if(t)for(e in t)e&&t[e].value&&n.push(t[e].value);return n},_t.populateResultList=function(t){var e,n=_t.getResultsWrapContainer();if(t&&n){e=s.template.render('{{?it.length}}\n\t{{~ it :group }}\n\t\t{{? !!group.family}}\n\t\t\t{{? !!group.items}}\n\n\n\t\t\t/*hide groups where all elements have hidden status*/\n\t\t\t{{var $hideGroup = false;}}\n\t\t\t{{~ group.items :itemcheck }}\n\t\t\t\t{{? !!itemcheck.status && itemcheck.status == "00000"}}\n\t\t\t\t\t{{$hideGroup = true;}}\n\t\t\t\t{{?}}\n\t\t\t{{~}}\n\n\t\t\t{{? !$hideGroup}}\n\t\t\t<ul class="nm-equipment-search-result-group">\n\t\t\t\t<li>\n\t\t\t\t\t<div class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=group.family.name}}</div>\n\t\t\t\t\t<ul class="nm-equipment-search-result-list">\n\t\t\t\t\t{{~ group.items :item }}\n\t\t\t\t\t\t<li class="nm-j-configurator-item nm-j-configurator-status_{{=item.status}} clearfix"\n\t\t\t\t\t\tdata-configurator-id="{{=item.id}}">\n\t\t\t\t\t\t\t<div class="nm-equipment-search-result-item-wrap">\n\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-image">\n\t\t\t\t\t\t\t\t\t{{? !!item.image}}\n\t\t\t\t\t\t\t\t\t<img src="{{=item.image}}" alt="{{=item.name}}" class="nm-image" />\n\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-content-wrap">\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-desc">\n\t\t\t\t\t\t\t\t\t\t<p class="nm-j-configurator-name nm-el-lbl nm-el-lbl-01 nm-at-lbl-b">\n\t\t\t\t\t\t\t\t\t\t\t{{=item.name}}\n\t\t\t\t\t\t\t\t\t\t\t{{? !!item.nonrenderable && item.nonrenderable == true }}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="nm-el-pg nm-el-pg-04"><br />{{=window.i18n[\'configuration.not-rendable-message\']}}</span>\n\t\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t{{? !!item.description}}\n\t\t\t\t\t\t\t\t\t\t<p class="nm-equipment-search-result-description nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t\t\t\t\t\t{{= item.description || \'\'}}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t{{? SETUPS.get(\'scopes.nemo.SHOW_EU_TYRE_LABEL\') && item.family.includes(\'Raeder_Reifen\')}}\n\t\t\t\t\t\t\t\t\t\t\t{{ var randomId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15); }}\n\t\t\t\t\t\t\t\t\t\t\t<feature-app id="tyre-label-link:equipment-search:{{=randomId}}" base-url="https://fa-tyre-label-link.cdn.prod.arcade.apps.one.audi/v2.0.1/fh/" src="app.js" server-src="app.node.js" config=\'{"optionId": "{{=item.id}}"}\'></feature-app>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-icons">\n\t\t\t\t\t\t\t\t\t\t{{?!!item.url}}\n\t\t\t\t\t\t\t\t\t\t<a class="nm-info nm-layerLink" href="{{=item.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t\t<span class="nm-conflict-icon" title="#I18N("nemo.ui.common.conflict" "Konflikt")"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-price nm-el-lbl nm-el-lbl-01">\n\t\t\t\t\t\t\t\t\t\t{{? !!item.price}}\n\t\t\t\t\t\t\t\t\t\t<span class="nm-j-configurator-text-price">{{=item.price}}</span>\n\t\t\t\t\t\t\t\t\t\t{{?}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="nm-equipment-search-result-add-btn">\n\t\t\t\t\t\t\t\t\t\t<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n\t\t\t\t\t\t\t\t\t\t    <span class="nm-at-btn-state01">{{=window.i18n[\'search-layer.add-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t    <span class="nm-at-btn-state02">{{=window.i18n[\'search-layer.item-included\']}}</span>\n\t\t\t\t\t\t\t\t\t\t    <span class="nm-at-btn-state03">{{=window.i18n[\'search-layer.remove-item\']}}</span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{{~}}\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t{{?}}\n\t\t\t{{?}}\n\t\t{{?}}\n\t{{~}}\n{{?}}',t),n.innerHTML=e;const i=new CustomEvent("content:rendered",{detail:{element:n}});document.dispatchEvent(i)}},_t.getLayer=function(){return!!document.querySelector(_t.oDefaults.sSelectorLayerOuter)&&document.querySelector(_t.oDefaults.sSelectorLayerOuter)},_t.getResultsWrapContainer=function(){var t=document.querySelector(_t.oDefaults.sSelectorResultsWrap);if(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}return!1},_t.updateFooterText=function(t){let e=!1;const n=SETUPS.get("scope.nemo.hide_financing_rate")||!1;if(t)if(l.a.isConfigurable()&&l.a.getConfiguration()){const i=l.a.getConfiguration();for(const n in i)if(i[n]){"rate"===n&&(e=!0);const r=t.querySelector(_t.oDefaults.sSelectorFooter+" "+_t.oDefaults.sSelectorSnippetText+n);r&&(r.textContent=i[n])}t.querySelector(_t.oDefaults.sSelectorFooter+" > span").classList.remove("nm-hidden"),n||!e?t.querySelector(".nm-equipment-search-rate").classList.add("nm-hidden"):t.querySelector(".nm-equipment-search-rate").classList.remove("nm-hidden")}else t.querySelector(_t.oDefaults.sSelectorFooter+" > span").classList.add("nm-hidden")},_t.getSearchString=function(){var t=document.querySelector(_t.oDefaults.sSelectorSearchInput);return(t?t.value:"").replace(/^\s+/g,"").replace(/</g,"").replace(/>/g,"").replace(/:\/\//g,"").replace(/%3c/gi,"").replace(/\\/g,"").replace(/&quot/gi,"").replace(/&#/g,"").replace(/'/g,"").replace(/"/g,"").replace(/`/g,"")},_t.handleSearch=function(t){var e,n,i=_t.getSearchString(),r={},o=document.querySelector(_t.oDefaults.sSelectorSearchForm);if(o){if(n=(o.getAttribute("data-current")||"")!==i||"click"===t.type,t.preventDefault(),t.stopImmediatePropagation(),16===t.keyCode||13===t.keyCode)return;o.setAttribute("data-current",i),i.length>=2&&n?(r=_t.validateSearchString(i),e=_t.parseResults(r.search),_t.populateResultList(e)):0===i.length&&n&&_t.resetSearch()}},_t.searchDebounceHandler=s.dom.debounce(_t.handleSearch,300),_t.validateSearchString=function(t){var e,n=t,i={};return n&&0!==n.length?(-1!==n.indexOf("|")&&(i.prstring=n),l.a.getSearchStopWords()&&(e=new RegExp("\\b(?:i|"+l.a.getSearchStopWords()+")\\b\\s*","gi"),n=n.replace(e,"")),i.search=(!!n&&n.length)>1?l.a.search(n,!0):[],i.searchString=n||_t.getSearchString(),i):[]},_t.resetSearch=function(){_t.searchListArr&&_t.searchListArr.length&&_t.populateResultList(_t.searchListArr)},_t.generateLayerHtml=function(){return'<div class="nm-layer-wrapper nm-layer-wrapper-equipment-search-layer"><div class="nm-layer-equipment-search-layer nm-j-jslayer nm-layer nm-default-layer"></div></div>'},_t.handleLayerLoaded=function(){var t=s.template.render('\n<div class="nm-layer-toolbar">\n\t<div class="nm-layer__close-button nm-j-layer-close-button">\n\t\t<svg class="nm-layer__close-button-icon">\n\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/cancel-newci-large.svg#audi-icon-cancel-newci-large"}}></use>\n\t\t</svg>\n\t</div>\n</div>\n<div class="nm-layer-inner nm-equipment-search-layer-wrapper">\n\t<div class="nm-md-equipment-search">\n\t\t<header class="nm-equipment-search-header">\n\t\t\t<h2 class="nm-el-hdl nm-el-hdl-02">{{=window.i18n[\'nemo.ui.equipment-search.headline\']}}</h2>\n\n\t\t\t<div class="nm-equipment-search-form">\n\t\t\t\t<form action="#" method="GET">\n\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t<input name="q" class="nm-equipment-search-input" type="text" placeholder=\'{{=window.i18n["search-layer.equipment-search-input-placeholder"]}}\'/>\n\t\t\t\t\t\t<input type="reset" class="nm-equipment-search-reset" value="X" />\n\t\t\t\t\t</fieldset>\n\t\t\t\t</form>\n\t\t\t\t<div class="nm-equipment-search-result-container">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</header>\n\t\t<footer class="nm-equipment-search-footer">\n\t\t\t<div class="nm-equipment-search-footer__inner-wrapper">\n\t\t\t\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b"><span class="nm-j-configurator-text-carlineName"></span> <span class="nm-j-configurator-text-description nm-el-lbl nm-el-lbl-01"></span></span>\n\t\t\t\t<span class="nm-equipment-search-footer__text-price-rate"><span class="nm-j-configurator-text-price nm-el-hdl nm-el-hdl-04 nm-at-hdl-b"></span> <span class="nm-el-lbl nm-el-lbl-01 nm-equipment-search-rate">({{=window.i18n["nemo.ui.equipment-search.rate"]}} <span class="nm-j-configurator-text-rate"></span>)</span></span>\n\t\t\t</div>\n\t\t</footer>\n\t\t<main class="nm-equipment-search-main">\n\t\t</main>\n\t</div>\n</div>',null),e=(document.querySelector(".nm-layer-wrapper-equipment-search-layer"),document.querySelector(_t.oDefaults.sSelectorLayerOuter));e&&(e.innerHTML=t,_t.legacyEventBus.on("keyup",".nm-equipment-search-input",_t.searchDebounceHandler),_t.legacyEventBus.on("paste",".nm-equipment-search-input",_t.handleSearch),_t.legacyEventBus.on("click",".nm-equipment-search-submit",_t.searchDebounceHandler),_t.legacyEventBus.on("click",".nm-equipment-search-reset",_t.resetSearch),_t.legacyEventBus.on("submit",".nm-equipment-search-form form",_t.searchDebounceHandler)),_t.handleConfigUpdate()},_t.addEvents=function(){r.clientLayer.register("equipmentSearchlayer",_t.generateLayerHtml),_t.eventBus.on(r.appEvents.LAYER_LOADED,_t.handleLayerLoaded),_t.eventBus.on(r.appEvents.CONFIG_UPDATE,_t.handleConfigUpdate),At.initialized=!0},At.dispose=function(){var t=document.querySelector(".nm-layer-wrapper-equipment-search-layer");console.log("dispose esmd"),_t.legacyEventBus.off("keyup",".nm-equipment-search-input",_t.searchDebounceHandler),_t.legacyEventBus.off("paste",".nm-equipment-search-input",_t.handleSearch),_t.legacyEventBus.off("click",".nm-equipment-search-submit",_t.searchDebounceHandler),_t.legacyEventBus.off("click",".nm-equipment-search-reset",_t.resetSearch),_t.legacyEventBus.off("submit",".nm-equipment-search-form form",_t.searchDebounceHandler),_t.eventBus.off(r.appEvents.LAYER_LOADED,_t.handleLayerLoaded),_t.eventBus.off(r.appEvents.CONFIG_UPDATE,_t.handleConfigUpdate),t&&t.removeEventListener("scroll")},At.initialize=function(t){_t.eventBus=t,_t.legacyEventBus=jQuery("body"),_t.addEvents()};const Lt={},Tt={__:Lt};Lt.defaults={expertContainerSelector:".nm-mode-expert",selectorDelegateClick:"nm-toggle",toggleClass:"nm-toggle-open",optionsListHeadSelector:".nm-options-list-head, .nm-module-options-container-headline",optionsGroupListWrapperSelector:".nm-mode-expert-group-list-wrap",optionsGroupWrap:".nm-mode-expert-group-wrap",statusClassPrefix:"nm-j-configurator-status_",listClosedClass:"nm-closed",configurationItemSelector:'[class*="nm-j-configurator-status_"]',hiddenClass:"nm-hidden",counterWrapperSelector:".nm-module-options-container-selected-items",counterSelector:".nm-selected-items"},Lt.handleToggleClick=function(t){const e=s.dom.closest(t.target,"."+Lt.defaults.selectorDelegateClick),n=s.dom.closest(e,Lt.defaults.optionsGroupWrap),i=s.dom.getElementsArray(Lt.defaults.optionsGroupListWrapperSelector,n);e.classList.contains(Lt.defaults.toggleClass)?e.classList.remove(Lt.defaults.toggleClass):e.classList.add(Lt.defaults.toggleClass),i.forEach(Lt.toggleGroupList),Lt.eventBus.emit(r.appEvents.CONTENT_RESIZE)},Lt.toggleGroupList=function(t){t.classList.contains(Lt.defaults.listClosedClass)?t.classList.remove(Lt.defaults.listClosedClass):t.classList.add(Lt.defaults.listClosedClass)},Lt.getStatusCodeForItem=function(t){return t.className.indexOf(Lt.defaults.statusClassPrefix)<0?"":t.className.split(Lt.defaults.statusClassPrefix)[1].split(" ")[0]},Lt.isItemSelected=function(t){const e=Lt.getStatusCodeForItem(t);return/[0,1]{3}1[0,1]/.test(e)},Lt.isItemSelectedStandard=function(t){const e=Lt.getStatusCodeForItem(t);return/1001[0,1]/.test(e)},Lt.isItemSelectedAndNotStandard=function(t){const e=Lt.isItemSelected(t),n=Lt.isItemSelectedStandard(t);return e&&!n},Lt.getSelectedItemsCountFromList=function(t){return s.dom.getElementsArray(Lt.defaults.configurationItemSelector,t).reduce((t,e)=>Lt.isItemSelectedAndNotStandard(e)?t+1:t,0)},Lt.updateListCounter=function(t){const e=s.dom.getElement(Lt.defaults.counterSelector,t);if(!s.dom.isElement(e))return;const n=s.dom.closest(t,Lt.defaults.optionsGroupWrap),i=s.dom.closest(e,Lt.defaults.counterWrapperSelector),r=Lt.getSelectedItemsCountFromList(n);e.textContent=r,Lt.setTitleForCounter(i,e,r),Lt.toggleCounterVisibility(i,r)},Lt.toggleCounterVisibility=function(t,e){e>0?t.classList.remove(Lt.defaults.hiddenClass):t.classList.add(Lt.defaults.hiddenClass)},Lt.setTitleForCounter=function(t,e,n){let i="";n>0&&(i=n+" ",i+=1===n?e.getAttribute("data-text-selected-single"):e.getAttribute("data-text-selected-multi")),t.setAttribute("title",i)},Lt.updateLists=function(){const t=s.dom.getElementsArray(Lt.defaults.expertContainerSelector),e=s.dom.getElementsArray(Lt.defaults.optionsListHeadSelector);t.length<1||e.forEach(Lt.updateListCounter)},Lt.addEvents=function(){Lt.domEventDelegate.on("click",Lt.defaults.optionsListHeadSelector,Lt.handleToggleClick),Lt.eventBus.on(r.appEvents.DOM_UPDATED,Lt.updateLists),Lt.eventBus.on(r.appEvents.PAGE_LOADED,Lt.updateLists)},Tt.initialize=function(t){Lt.eventBus=t,Lt.domEventDelegate=s.dom.getEventDelegate("body"),Lt.addEvents(),Lt.updateLists()};const kt={},It={},xt={getTemplateFuncAsync:function(){var t,e,n=this.templateKey||null,i=function(){return""};if(null===n)return Promise.resolve(i);if(t=xt.getTemplateId(this,n),void 0===It[t]){if(r.dynamicDot.requiresDynamicDot())return new Promise((e,n)=>{r.dynamicDot.getTemplateFromBackend(t).then(n=>{It[t]=it.doT.template(n),e(It[t])}).catch(n=>{console.warn("Error reading dot-template with id: "+t,n),e(i)})});if(!(e=document.querySelector("#"+t))||!e.innerHTML)return Promise.resolve(i);It[t]=it.doT.template(e.innerHTML.trim())}return Promise.resolve(It[t])},sanitizeId:function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},getTemplateId:function(t,e){var n,i,r="nm-id-form-",o=t.form||t,a=o.customTemplateIds||{};if(e=e.toLowerCase(),void 0!==t.id){if(n=xt.sanitizeId(t.id),void 0!==(i=kt[o.id+"-"+n]))return i;if(void 0!==a[i=r+o.id+"-"+o.pageId+"-"+n+"-tpl"])return i;if(void 0!==a[i=r+o.id+"-"+n+"-tpl"])return i}return"Form"===t.formConstructorName&&void 0!==(i=kt[o.id+"-"+o.pageId])?i:(i=r+o.id+"-"+e+"-tpl",void 0!==kt[o.id+"-"+e]||void 0!==a[i=r+o.id+"-"+o.pageId+"-"+e+"-tpl"]||void 0!==a[i=r+o.id+"-"+e+"-tpl"]?i:i=r+e+"-tpl")},FormField:function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);return this.formConstructorName="FormField",this.domId=xt.sanitizeId(this.id),void 0===this.name&&(this.name=this.id),this.form=e,this.templateKey=this.type,this}};xt.FormField.prototype.initializeTemplatesAsync=function(){return new Promise(t=>{this.getTemplateFuncAsync().then(e=>{this.getString=e,this.registerChange(),t(e)})})},xt.FormField.prototype.getTemplateFuncAsync=xt.getTemplateFuncAsync,xt.FormField.prototype.registerChange=function(){var t,e,n=this,i=this.type.toLowerCase();if("radio"===i){t="#"+this.form.id,e='input[type="radio"][name="'+this.domId+'"]';const i='input[type="hidden"][name="'+this.domId+'"]';jQuery(t).on("change",e,(function(){jQuery(i).remove(),(n.auto_submit?n.form.autoSubmit:n.form.changed).apply(n.form,[n.action])}))}else"select"===i||"checkbox"===i?(t="#"+this.form.id,e="#"+this.domId,jQuery(t).on("change",e,(function(){(n.auto_submit?n.form.autoSubmit:n.form.changed).apply(n.form,[n.action])}))):(t="#"+this.form.id,e="#"+this.domId,jQuery(t).on("blur",e,(function(){(n.auto_submit?n.form.autoSubmit:n.form.changed).apply(n.form,[n.action])})))},xt.FormField.prototype.toString=function(){return this.getString(this)};const Pt=xt.FormField,Ot={},jt={},Rt={getTemplateFuncAsync:function(){var t,e,n=this.templateKey||null,i=function(){return""};if(null===n)return Promise.resolve(i);if(t=Rt.getTemplateId(this,n),void 0===jt[t]){if(r.dynamicDot.requiresDynamicDot())return new Promise((e,n)=>{r.dynamicDot.getTemplateFromBackend(t).then(n=>{jt[t]=it.doT.template(n),e(jt[t])}).catch(n=>{console.warn("Error reading dot-template with id: "+t,n),e(i)})});if(!(e=document.querySelector("#"+t))||!e.innerHTML)return Promise.resolve(i);jt[t]=it.doT.template(e.innerHTML.trim())}return Promise.resolve(jt[t])},sanitizeId:function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},getTemplateId:function(t,e){let n,i,r="nm-id-form-",o=t.form||t,a=o.customTemplateIds||{};o.pageId;if(e=e.toLowerCase(),void 0!==t.id){if(n=Rt.sanitizeId(t.id),i=Ot[o.id+"-"+n],void 0!==i)return i;if(i=r+o.id+"-"+o.pageId+"-"+n+"-tpl",void 0!==a[i])return i;if(i=r+o.id+"-"+n+"-tpl",void 0!==a[i])return i}return"Form"===t.formConstructorName&&(i=Ot[o.id+"-"+o.pageId],void 0!==i)?i:(i=r+o.id+"-"+e+"-tpl",void 0!==Ot[o.id+"-"+e]?i:(i=r+o.id+"-"+o.pageId+"-"+e+"-tpl",void 0!==a[i]?i:(i=r+o.id+"-"+e+"-tpl",void 0!==a[i]||(i=r+e+"-tpl"),i)))}};Rt.FormItem=function(t,e){return function(t,e){if(!t||!e)return!1;let n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(t,this),this.formConstructorName="FormItem",this.domId=Rt.sanitizeId(this.id),this.dataFields=t&&"fields"in t?t.fields:[],this.form=e,this.templateKey="item",this.fields=[],this.namedFields={},this},Rt.FormItem.prototype.initializeTemplatesAndFieldsAsync=function(){return new Promise(t=>{this.getTemplateFuncAsync().then(e=>{this.getString=e,this.processFieldsAsync().then(e=>{t(e)})})})},Rt.FormItem.prototype.getTemplateFuncAsync=Rt.getTemplateFuncAsync,Rt.FormItem.prototype.processFieldsAsync=function(){return new Promise(t=>{var e,n,i;if(void 0!==this.dataFields){1===this.dataFields.length&&void 0===this.dataFields[0].label&&(this.dataFields[0].label=this.name,delete this.name,this.info&&(this.dataFields[0].info=this.info,delete this.info));const r=[];for(e=0,n=this.dataFields.length;e<n;e++)i=new Pt(this.dataFields[e],this.form),r.push(i.initializeTemplatesAsync()),this.fields.push(i),this.namedFields[i.id]=i;Promise.allSettled(r).then(()=>{t(this.fields)})}else t(this.fields)})},Rt.FormItem.prototype.toString=function(){return this.getString(this)};const Bt=Rt.FormItem,Mt={},Ft={},Ut={getTemplateFuncAsync:function(){let t,e=this.templateKey||null,n=function(){return""};if(null===e)return Promise.resolve(n);let i=Ut.getTemplateId(this,e);if(void 0===Ft[i]){if(r.dynamicDot.requiresDynamicDot())return new Promise((t,e)=>{r.dynamicDot.getTemplateFromBackend(i).then(e=>{Ft[i]=it.doT.template(e),t(Ft[i])}).catch(e=>{console.error("Error reading dot-template with id: "+i,e),t(n)})});if(t=document.querySelector("#"+i),!t||!t.innerHTML)return Promise.resolve(n);Ft[i]=it.doT.template(t.innerHTML.trim())}return Promise.resolve(Ft[i])},sanitizeId:function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},getTemplateId:function(t,e){var n,i,r="nm-id-form-",o=t.form||t,a=o.customTemplateIds||{};o.pageId;if(e=e.toLowerCase(),void 0!==t.id){if(n=Ut.sanitizeId(t.id),void 0!==(i=Mt[o.id+"-"+n]))return i;if(void 0!==a[i=r+o.id+"-"+o.pageId+"-"+n+"-tpl"])return i;if(void 0!==a[i=r+o.id+"-"+n+"-tpl"])return i}return"Form"===t.formConstructorName&&void 0!==(i=Mt[o.id+"-"+o.pageId])?i:(i=r+o.id+"-"+e+"-tpl",void 0!==Mt[o.id+"-"+e]||void 0!==a[i=r+o.id+"-"+o.pageId+"-"+e+"-tpl"]||void 0!==a[i=r+o.id+"-"+e+"-tpl"]?i:i=r+e+"-tpl")},FormGroup:function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);return this.formConstructorName="FormGroup",this.form=e,this.domId=Ut.sanitizeId(this.id),this.templateKey="group",this.dataItems=t.items,this.items=[],this.namedItems={},this}};Ut.FormGroup.prototype.initializeGroupAsync=function(){return new Promise(t=>{this.processItemsAsync().then(e=>{this.getTemplateFuncAsync().then(e=>{this.getString=e,t(this.formGroup)})})})},Ut.FormGroup.prototype.getTemplateFuncAsync=Ut.getTemplateFuncAsync,Ut.FormGroup.prototype.processItemsAsync=function(){return new Promise(t=>{var e,n,i;if(this.dataItems){let r=[];for(e=0,n=this.dataItems.length;e<n;e++)i=new Bt(this.dataItems[e],this.form),r.push(i.initializeTemplatesAndFieldsAsync()),this.items.push(i),this.namedItems[i.id]=i;Promise.allSettled(r).then(()=>{t(this.items)})}else t(this.items)})},Ut.FormGroup.prototype.toString=function(){return this.getString(this)};const zt=Ut.FormGroup,Nt={};let Qt,Ht={},Vt={},qt={},Wt={};const Gt={},Yt={__:Gt};Gt.initFormAsync=function(t){return new Promise((e,n)=>{const i=t.attr("id"),r=Gt.getUrl("start",i);void 0!==Wt[i]?(Nt[i]=new Gt.Form(Wt[i],qt),Nt[i].initializeFormAsync().then(()=>{Nt[i].el.appendTo(t),e(Nt[i])})):fetch(r,{credentials:"include"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(n=>{const r=Yt.responseToObj(n);!1===r?(Gt.displayStandardError(i),e(i)):r.form?(Nt[i]=new Gt.Form(r,qt),Nt[i].initializeFormAsync().then(()=>{Nt[i].el.appendTo(t),e(Nt[i]),r.header&&r.header.subsession&&h.a.setSubsessionID(r.header.subsession)})):(Gt.displayStandardError(i),e(i))}).catch(t=>{Gt.displayStandardError(i),n(t)})})},Gt.bindEnablers=function(){jQuery("body .nm-form input[data-enables]").on("change",(function(t){var e,n,i,r,o;for(r=(e=(n=jQuery(t.target)).attr("data-enables").split(";")).length;r>-1;r--)e[r]=Gt.sanitizeId(e[r]);for(i="off"===(i=n.attr("data-active")||"off")?"on":"off",n.attr("data-active",i),r=e.length;r>-1;r--)e[r]&&(o="off"===i&&"disabled",jQuery("#nm-id-form-field-"+e[r]+" input").attr("disabled",o))}))},Gt.getCustomTemplateIds=function(t){var e={};return r.dynamicDot.requiresDynamicDot()?(e["nm-id-form-or_nls-vvega-nls-page-vvega-nls-foreword-tpl"]=!0,e["nm-id-form-tdrdeal-vvega-enquiry-dealer-page-form-tpl"]=!0,e["nm-id-form-or_nls-vvega-nls-page-vvega-nls-foreword-tpl"]=!0,e["nm-id-form-tdrdealerreq-vvega-probe-request-page-Item-VehicleConfigurationInterest-VehicleCarlineInterest-tpl"]=!0):jQuery(t).each((function(){e[jQuery(this).attr("id")]=!0})),e},Gt.blockForm=function(t){var e=jQuery("#"+t.id);e.find(".nm-form-shader").height(e.height()+"px").show()},Gt.handleFormAsync=function(t,e){return new Promise(n=>{var i={};let o=!0;!1===(t=Yt.responseToObj(t))?Gt.displayStandardError(e.id):t.form?(jQuery("#"+e.id).off("blur, click, change"),jQuery("#"+e.id+" button[data-button-action]").off("click"),o=!1,Nt[e.id]=new Gt.Form(t,qt),Nt[e.id].initializeFormAsync().then(()=>{jQuery("#"+t.form.id).html("").append(Nt[e.id].el),Gt.scrollToTop(e.id),n(Nt[e.id])})):t.success?(i.formHeadline=e.data.form.name,i.message=t.message,jQuery("#"+e.id).html(e.getSuccessString(i)),jQuery("#"+e.id).attr("data-form-is-finished",1),Gt.eventBus.emit(r.appEvents.FORM_FINISHED,{id:e.id}),t.configuration&&h.a.handleExternalConfiguration(t,{startType:null}),delete Nt[e.id]):(Gt.displayStandardError(e.id),delete Nt[e.id]),o&&(Gt.scrollToTop(e.id),n(e.id))})},Gt.scrollToTop=function(t){jQuery("#"+t).closest(".nm-layer-wrapper").length?jQuery(".nm-layer-wrapper").scrollTop(0):jQuery("body").scrollTop(0)},Gt.displayStandardError=function(t){var e=jQuery("#"+t),n=e.find(".nm-form-shader"),i=e.find(".nm-form-standard-error");n.hide(),e.html(i.html())},Gt.getUrl=function(t,e){var n=l.a.getPrString(),i=l.a.getContext(),r=l.a.getSubsessionID(),o=!!l.a.getCarline(),a=[];return i&&a.push("context="+i),r&&a.push("subsession="+r),("tdrdealerreq"===e&&o&&n||"tdrdealerreq"!==e&&n)&&a.push("ids="+encodeURIComponent(n)),a.push("action="+encodeURIComponent(t)),a.push("id="+encodeURIComponent(e)),Qt+"?"+a.join("&")},Gt.parseData=function(t){var e;try{e=JSON.parse(t)}catch(t){return!1}return e},Gt.getTemplateFuncAsync=function(){let t,e,n=this.templateKey||null,i=function(){return""};if(null===n)return Promise.resolve(i);if(t=Gt.getTemplateId(this,n),void 0===Vt[t]){if(r.dynamicDot.requiresDynamicDot())return new Promise((e,n)=>{r.dynamicDot.getTemplateFromBackend(t).then(n=>{Vt[t]=it.doT.template(n),e(Vt[t])}).catch(e=>{console.error("Error reading dot-template with id: "+t,e),n(e)})});if(e=document.querySelector("#"+t),!e||!e.innerHTML)return Promise.resolve(i);Vt[t]=it.doT.template(e.innerHTML.trim())}return Promise.resolve(Vt[t])},Gt.sanitizeId=function(t){return void 0!==t?t.replace(/[^a-z0-9_-]/gi,""):""},Gt.getTemplateId=function(t,e){var n,i,r="nm-id-form-",o=t.form||t,a=o.customTemplateIds||{};if(e=e.toLowerCase(),void 0!==t.id){if(n=Gt.sanitizeId(t.id),void 0!==(i=Ht[o.id+"-"+n]))return i;if(void 0!==a[i=r+o.id+"-"+o.pageId+"-"+n+"-tpl"])return i;if(void 0!==a[i=r+o.id+"-"+n+"-tpl"])return i}return"Form"===t.formConstructorName&&void 0!==(i=Ht[o.id+"-"+o.pageId])?i:(i=r+o.id+"-"+e+"-tpl",void 0!==Ht[o.id+"-"+e]||void 0!==a[i=r+o.id+"-"+o.pageId+"-"+e+"-tpl"]||void 0!==a[i=r+o.id+"-"+e+"-tpl"]?i:i=r+e+"-tpl")},Gt.Form=function(t,e){return this.formConstructorName="Form",this.data=t,this.id=t.form?t.form.id:void 0,this.domId=Gt.sanitizeId(this.id),this.customTemplateIds=e||{},this.templateKey="form",this.groups=[],this.fields=[],this.pageId=this.getPageId(),this.processSteps=this.getProcessSteps(),this.processStepName=this.getStepHeadline(),this},Gt.Form.prototype.initializeFormAsync=function(){return new Promise((t,e)=>{const n=[];n.push(this.processGroupsAsync()),n.push(this.getTemplateFuncAsync()),n.push(this.getSuccessTemplateFuncAsync()),Promise.all(n).then(e=>{const[n,i,r]=e;this.getString=i,this.getSuccessString=r,this.load(),t()}).catch(t=>{console.error("Error initializing form",t),e(t)})})},Gt.Form.prototype.getPageId=function(){var t;if(this.data&&this.data.pages)for(t=this.data.pages.length-1;t>-1;t--)if(!0===this.data.pages[t].active)return this.data.pages[t].id;return null},Gt.Form.prototype.getStepHeadline=function(){var t;if(this.data&&this.data.pages)for(t=this.data.pages.length-1;t>-1;t--)if(!0===this.data.pages[t].active)return this.data.pages[t].name;return null},Gt.Form.prototype.getProcessSteps=function(){var t;if(this.data&&this.data.pages)for(t=this.data.pages.length-1;t>-1;t--)if(!0===this.data.pages[t].active)return{step:t+1,maxSteps:this.data.pages.length};return null},Gt.Form.prototype.getSuccessTemplateFuncAsync=function(){var t,e="nm-id-form-success-tpl";if(void 0===Vt[e]){if(r.dynamicDot.requiresDynamicDot())return new Promise((t,n)=>{r.dynamicDot.getTemplateFromBackend(e).then(n=>{Vt[e]=it.doT.template(n),t(Vt[e])}).catch(t=>{console.error("Error reading dot-template with id: "+e,t),n(t)})});if(!(t=document.querySelector("#"+e))||!t.innerHTML)return Promise.resolve((function(){return""}));Vt[e]=it.doT.template(t.innerHTML.trim())}return Promise.resolve(Vt[e])},Gt.Form.prototype.getTemplateFuncAsync=Gt.getTemplateFuncAsync,Gt.Form.prototype.processGroupsAsync=function(){var t,e,n;return new Promise(i=>{if(this.data.form&&this.data.form.groups){const r=[];for(t=0,e=this.data.form.groups.length;t<e;t++)n=new zt(this.data.form.groups[t],this),r.push(n.initializeGroupAsync()),this.groups.push(n);Promise.allSettled(r).then(()=>{i(this.groups)})}else i(this.groups)})},Gt.Form.prototype.load=function(){var t,e;e={formHeadline:this.data.form.name,pageDisclaimers:this.data.form.disclaimers,pageHeadline:this.data.form.headline,pageDescription:this.data.form.description,pageError:this.data.form.error,groups:this.groups,pages:this.data.pages,id:this.data.form.id,actions:this.data.form.actions},void 0===(t=jQuery("#"+this.data.form.id)).attr("data-form-is-first-view")?t.attr("data-form-is-first-view",1):t.attr("data-form-is-first-view",0),void 0!==this.data.form.footnote&&(e.footnote=this.data.form.footnote),this.processSteps&&(t.attr("data-form-process-step",this.processSteps.step),t.attr("data-form-process-max",this.processSteps.maxSteps)),this.processStepName&&t.attr("data-form-process-name",this.processStepName),this.el=jQuery(this.getString(e));let n=this;window.setTimeout((function(){n.bindActions(),n.bindActionLinks(),n.preventSubmit(),Gt.eventBus.emit(r.appEvents.FORM_LOADED,{id:n.id,form:n})}),100)},Gt.Form.prototype.preventSubmit=function(){jQuery("#"+this.id+" form").on("submit",(function(t){return t.preventDefault(),!1}))},Gt.Form.prototype.bindActions=function(){var t=this;jQuery("#"+this.id+" button[data-button-action]").on("click",(function(e){var n,i,r;e.preventDefault(),i=(n=jQuery(e.target)).attr("data-button-action"),r=n.attr("data-form-id"),"cancel"===i&&n.addClass("nm-button-cancel"),r===t.id&&i&&(Gt.blockForm(t),t.serializeAndSend(i,t.id))}))},Gt.Form.prototype.bindActionLinks=function(){var t=this;jQuery("#"+this.id+" .nm-form-action-link").on("click",".nm-form-action-link",(function(e){e.preventDefault(),t.serializeAndSend(jQuery(this).attr("data-form-action"),t.id)}))},Gt.Form.prototype.disableButtons=function(){var t,e,n;if(this.data&&this.data.form&&this.data.form.actions)for(t=0,e=this.data.form.actions.length;t<e;t++)!0===(n=this.data.form.actions[t]).disable_on_change&&jQuery('button[data-button-action="'+n.action+'"]').hide()},Gt.Form.prototype.changed=function(){this.disableButtons()},Gt.Form.prototype.autoSubmit=function(t){var e=t||"submit";Gt.blockForm(this),this.serializeAndSend(e,this.id)},Gt.Form.prototype.serializeAndSend=function(t,e){var n,i,r=jQuery("#"+e+" form"),o=Gt.getUrl(t,e),a=r.serializeArray(),s=a.length,l=[],c=this,u=[];for(i=0;i<s;i+=1)-1!==a[i].name.indexOf("DateTime-")?(void 0===u[n=a[i].name.slice(9,a[i].name.length-2)]&&(u[n]=[]),u[n].push(a[i].value)):l.push(a[i]);for(var d in u)u.hasOwnProperty(d)&&"0"!==u[n][0]&&"0"!==u[n][1]&&"0"!==u[n][2]&&(n=u[n].reverse().join("-"),l.push({name:d,value:n}));const m=l.reduce((t,e,n)=>t+(n>0?"&":"")+e.name+"="+e.value,"");return fetch(o,{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:m,credentials:"include"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(t=>Gt.handleFormAsync(t,c)).catch(()=>{Gt.displayStandardError(c)})},Yt.responseToObj=function(t){if(!t)return!1;if("object"==typeof t)return t;try{return JSON.parse(t)}catch(t){return!1}},Yt.layerLoadHandler=function(t){jQuery(t).find(".nm-form").each((function(){Gt.initFormAsync(jQuery(this))}))},Yt.processNavHandler=function(t){var e,n=jQuery(t.target);t.preventDefault(),"true"===n.attr("data-selectable")&&(e=n.parents(".nm-form").attr("id"),Yt.getForm(e).serializeAndSend(n.attr("data-action"),e))},Yt.addInitData=function(t,e){Wt[t]=e},Yt.getForm=function(t){return Nt[t]},Gt.initialize=function(){var t;Qt=SETUPS.get("nemo.url.formapi"),Ht=SETUPS.get("nemo.form.templatemap"),qt=Gt.getCustomTemplateIds(".nm-custom-form-tpl"),Gt.eventBus.on(r.appEvents.LAYER_LOADED,(function(t){t&&t.element&&Yt.layerLoadHandler(t.element)})),jQuery("body .nm-process-navigation a").on("click",Yt.processNavHandler),Gt.bindEnablers(),(t=jQuery(".nm-layer-wrapper")).length&&Yt.layerLoadHandler(t)},Yt.initialize=function(t){Gt.eventBus=t,Gt.legacyEventBus=jQuery("body"),Gt.initialize()};const $t={},Kt={__:$t};$t.instance=!1,$t.oDefaults={sDropdownSelectionClass:"nm-at-select-default-val"},$t.addEvents=function(){$t.eventBus.on(r.appEvents.PAGE_LOADED,$t.onPageLoaded),$t.eventBus.on(r.appEvents.FORM_LOADED,$t.onFormLoaded),$t.handleSelectChanges()},$t.onPageLoaded=function(){$t.handleSelectChanges()},$t.onFormLoaded=function(){$t.handleSelectChanges()},$t.handleSelectChanges=function(t){var e=jQuery("select");jQuery.each(e,(function(){var t=jQuery(this);$t.legacyEventBus.on("change.select",$t.updateSelect),$t.setSelectState(t)}))},$t.updateSelect=function(t){var e=jQuery(t.target);$t.setSelectState(e)},$t.setSelectState=function(t){var e,n,i,r=t.find("option:selected");jQuery.each(r,(function(){n=jQuery(this),e=n.val(),i=void 0!==n.attr("data-is-default"),n.parent().toggleClass($t.oDefaults.sDropdownSelectionClass,e&&"*"===e||i)}))},$t.initialize=function(){$t.addEvents(),$t.handleSelectChanges()},Kt.initialize=function(t){$t.eventBus=t,$t.legacyEventBus=jQuery("body"),$t.initialize()};const Xt=".nm-j-simpleform",Jt={},Zt={__:Jt};Jt.scanSource=function(t){[...t.querySelectorAll(Xt)].forEach(t=>Jt.initForm(t))},Jt.initForm=function(t){const e=t.getAttribute("id"),n=t.querySelector("form");n.addEventListener("submit",t=>{t.preventDefault(),Jt.onSubmit(e,n)})},Jt.onSubmit=function(t,e){let n=Jt.serializeForm(e);if("audicode-input"===t){n.match(/audicode=([Aa]{1}[a-zA-Z0-9]{7})/i)&&(n="audicode="+n.match(/audicode=([Aa]{1}[a-zA-Z0-9]{7})/i)[1].toUpperCase())}Jt.call(t,n)},Jt.serializeForm=function(t){return[...new FormData(t)].reduce((t,e)=>(t?t+"&":"")+e[0]+"="+e[1],"")},Jt.getUrl=function(t){const e=[],n=l.a.getContext();n&&e.push("context="+n);const i=l.a.getSubsessionID();i&&e.push("subsession="+i);const r=l.a.getPrString();r&&e.push("ids="+encodeURIComponent(r));let o=SETUPS.get("nemo.url.form."+t);return o+=-1===o.indexOf("?")?"?":"&",o+e.join("&")},Jt.call=async function(t,e){const n=document.getElementById(t);n.classList.add("nm-j-simpleform-loading"),n.classList.remove("nm-j-simpleform-error","nm-j-simpleform-success");const i=n.getAttribute("data-dpu-form-id")||t,r=Jt.getUrl(i),o=r+(r.indexOf("?")<0?"?":"&")+e;return await fetch(o,{credentials:"include"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(e=>{Jt.handleSuccess(e,t,i)}).catch(t=>console.log("Error fetching simple-form request - server responded with: ",t))},Jt.handleSuccess=function(t,e,n){const i=document.getElementById(e);let o=Yt.responseToObj(t);if(!o||!o[n])return Jt.handleFail(o,e,n);2===Math.floor(o[n].statuscode/100)?([...i.querySelectorAll(".nm-error")].forEach(t=>t.innerHTML=""),o[n].message&&[...i.querySelectorAll(".nm-success")].forEach(t=>t.innerHTML=o[n].message),i.classList.remove("nm-j-simpleform-error"),i.classList.add("nm-j-simpleform-success"),Jt.eventBus.trigger(r.appEvents.FORM_FINISHED,{id:e,response:o}),i.setAttribute("data-form-is-finished","1"),"audicode-input"===e&&(r.router.open("page",l.a.getCurrentCarlineUrl()),document.querySelector(".nm-j-layer-close-button").click())):(Jt.handleFail(o,e,n),Jt.eventBus.emit(r.appEvents.FORM_ERROR,{id:e,response:o})),i.classList.remove("nm-j-simpleform-loading")},Jt.handleFail=function(t,e,n){const i=document.getElementById(e),r=Jt.isDefaultErrorWithDpuMessage(t,e,n)?t[n].message:Jt.getFormErrorMessage(t),o=i.querySelectorAll(".nm-error");o&&[...o].forEach(t=>t.innerHTML=r),i.classList.add("nm-j-simpleform-error"),i.classList.remove("nm-j-simpleform-success","nm-j-simpleform-loading"),console.log("form/simple.handleFail",r)},Jt.isDefaultErrorWithDpuMessage=function(t,e,n){return!!(t&&t.header.error&&"DEFAULT"===t.header.error.id&&n&&t[n]&&t[n].message)},Jt.getFormErrorMessage=function(t){return t.login&&!t.login.success?l.a.getErrorMessage("LOGIN_FAILED"):l.a.getErrorMessage(t.header.error)},Jt.addEvents=function(){Jt.eventBus.on(r.appEvents.LAYER_LOADED,(function(t){t&&t.element&&Jt.scanSource(t.element)})),Jt.scanSource(document)},Zt.initialize=function(t){Jt.eventBus=t,Jt.addEvents()};const te={},ee={__:te};te.addEvents=function(){te.eventBus.on(r.appEvents.VERSION_LOAD_COMPLETE,te.setHiddenItemsFromVersionResponse),te.eventBus.on(r.appEvents.PAGE_LOADED,te.setHiddenItemsFromVersionResponse),te.eventBus.on(r.appEvents.LAYER_LOADED,te.setHiddenItemsFromVersionResponse)},te.setHiddenItemsFromVersionResponse=function(t){var e,n,i=t&&t.domElement?t.domElement:document,r=s.dom.getElementsArray(".nm-j-configurator-item",i),o=l.a.getHiddenItemIDsFromVersion();if(o&&null!==o)for(e=0;e<o.length;e++)for(n=0;n<r.length;n++)o[e]===r[n].getAttribute("data-configurator-id")&&r[n].setAttribute("data-visibility","hidden")},ee.initialize=function(t){te.eventBus=t,te.addEvents()};const ne={},ie={__:ne};ne.oDefaults={sSelectorDelegateClick:".nm-infobox",sSelectorInfoboxContainer:".nm-infobox-container",sToggleClass:"nm-infobox-show"},ne.clickedElement=null,ne.handleOutsideClick=function(t){var e=s.dom.getElement(ne.oDefaults.sSelectorInfoboxContainer,ne.clickedElement);e.classList.contains(ne.oDefaults.sToggleClass)&&s.dom.isElementOutsideOfElementWithSelector(t.target,ne.oDefaults.sSelectorDelegateClick)&&(ne.domEventDelegate.off("click",ne.handleOutsideClick),ne.closeInfoBox(e),ne.clickedElement=null)},ne.handleToggleClick=function(){var t=s.dom.getElement(ne.oDefaults.sSelectorInfoboxContainer,this);ne.clickedElement=this,t.classList.contains(ne.oDefaults.sToggleClass)?ne.closeInfoBox(t):(t.classList.add(ne.oDefaults.sToggleClass),ne.registerOutsideClickEvent())},ne.registerOutsideClickEvent=function(){ne.domEventDelegate.on("click","*",ne.handleOutsideClick)},ne.closeInfoBox=function(t){t.classList.remove(ne.oDefaults.sToggleClass)},ne.addEvents=function(){ne.domEventDelegate.on("click",ne.oDefaults.sSelectorDelegateClick,ne.handleToggleClick)},ne.initialize=function(){ne.init||ne.addEvents(),ne.init=!0},ie.initialize=function(t){ne.eventBus=t,ne.domEventDelegate=s.dom.getEventDelegate("body"),ne.initialize()};const re={},oe={__:re};re.oDefaults={sAttributeInitialCaption:"data-initialcaption",sAttributePrNumber:"data-partprnumber",sClassAozActive:"nm-aoz-active",sClassAozButton:"nm-aoz-btn",sClassAozDescription:"nm-aoz-description",sClassAozTyreLabel:"nm-aoz-tyre-label",sClassAozHintText:"nm-aoz-hinttext",sClassAozInvisible:"nm-aoz-invisible",sClassAozItem:"nm-aoz-item",sClassAozModule:"nm-md-aoz",sClassAozPrice:"nm-aoz-price",sSelectorAozButton:".nm-aoz-btn a",sSelectorAozItem:".nm-aoz-item",selectorModul:".nm-md-aoz",selectorStripe:".nm-aoz-stripe",classShowPrevArrow:"nm-j-aoz-show-prev-arrow",classShowNextArrow:"nm-j-aoz-show-next-arrow",classPrevButton:"nm-aoz-stripe-prev",selectorArrowButton:".nm-aoz-stripe-navigation-item",selectorPrevButton:".nm-aoz-stripe-prev",selectorNextButton:".nm-aoz-stripe-next",selectorStripeContainer:".nm-aoz-stripe-container",selectorStripeWrap:".nm-aoz-stripe-wrap",selectorStripeList:".nm-aoz-stripe > ul",selectorStripeItem:".nm-aoz-item"},re.scrollDuration=500,re.addEvents=function(){re.eventBus.on(r.appEvents.PAGE_LOADED,re.onConfigurationUpdate),re.eventBus.on(r.appEvents.CONFIG_UPDATE,re.onConfigurationUpdate),re.domEventDelegate.on("scroll",re.oDefaults.selectorStripe,re.stripeScrollHandler),re.domEventDelegate.on("click",re.oDefaults.sSelectorAozItem,re.toggleItem),re.domEventDelegate.on("click",re.oDefaults.sSelectorAozButton,re.toggleConfigItem),re.domEventDelegate.on("click",re.oDefaults.selectorPrevButton,re.handlePrevNextClick),re.domEventDelegate.on("click",re.oDefaults.selectorNextButton,re.handlePrevNextClick),window.addEventListener("resize",re.resizeModule)},re.onConfigurationUpdate=function(){re.handleSelectionUpdated()},re.resizeModule=function(){var t,e;s.dom.getElementsArray(re.oDefaults.selectorModul).forEach((function(n){s.dom.getElement(re.oDefaults.selectorStripeContainer,n),(t=s.dom.getElement(re.oDefaults.selectorStripe,n))&&(e=s.dom.closest(t,re.oDefaults.selectorStripeWrap),re.hideNavigationArrows(e))}))},re.handlePrevNextClick=function(t){var e="next",n=s.dom.closest(t.target,re.oDefaults.selectorArrowButton);n&&(n.classList.contains(re.oDefaults.classPrevButton)&&(e="prev"),re.translateStripe(n,e))},re.translateStripe=function(t,e){var n,i,r=s.dom.getElement(re.oDefaults.selectorStripeContainer,re.getCurrentModule(t)),o=s.dom.closest(t,re.oDefaults.selectorStripeWrap),a=s.dom.getElement(re.oDefaults.selectorStripe,o),l=s.dom.getElement(re.oDefaults.selectorStripeList,o);l.clientWidth>r.clientWidth&&(o.classList.remove(re.oDefaults.classShowPrevArrow),o.classList.remove(re.oDefaults.classShowNextArrow),n=re.calculateNewScrollPosition(r,a.scrollLeft,e,l.clientWidth),i=re.calculateScrollDuration(r,a.scrollLeft,n),s.dom.animateElementX(n,a,i).then((function(){re.hideNavigationArrows(o)})))},re.getCurrentModule=function(t){return t?s.dom.closest(t,re.oDefaults.selectorModul):null},re.calculateScrollDuration=function(t,e,n){return re.scrollDuration*(Math.abs(e-n)/t.clientWidth)},re.calculateNewScrollPosition=function(t,e,n,i){var r=t.clientWidth;return"next"===n?Math.min(e+r,i-r):Math.max(0,e-r)},re.hideNavigationArrows=function(t){var e=t,n=s.dom.getElement(re.oDefaults.selectorStripe,e),i=s.dom.getElementsArray(re.oDefaults.selectorStripeItem,e),r=s.dom.getElement(re.oDefaults.selectorStripeList,e);0!==i.length&&(n.scrollLeft>10?e.classList.add(re.oDefaults.classShowPrevArrow):e.classList.remove(re.oDefaults.classShowPrevArrow),e.clientWidth+n.scrollLeft<r.clientWidth-10?e.classList.add(re.oDefaults.classShowNextArrow):e.classList.remove(re.oDefaults.classShowNextArrow))},re.stripeScrollHandler=function(t){var e=t.target,n=s.dom.closest(e,re.oDefaults.selectorStripeWrap);n&&re.hideNavigationArrows(n)},re.toggleItem=function(t){var e=re.getClosestElementWithClass(t.target,re.oDefaults.sClassAozModule),n=re.getClosestElementWithClass(t.target,re.oDefaults.sClassAozItem);t.preventDefault(),t.stopPropagation(),e&&n&&(n.classList.contains(re.oDefaults.sClassAozActive)?re.unsetSelection(e):re.setNewSelection(e,n)),re.handleSelectionUpdated()},re.toggleConfigItem=function(t){var e=re.getClosestElementWithClass(t.target,re.oDefaults.sClassAozModule),n=e.getElementsByClassName(re.oDefaults.sClassAozActive)[0];n.getAttribute(re.oDefaults.sAttributePrNumber).split(" ").join("_");t.preventDefault(),re.updateButtonWrapperClass(e,n)},re.retrievePrNumbersToFilter=function(t){var e,n,i=t.getElementsByClassName(re.oDefaults.sClassAozItem),r=[];for(e=0,n=i.length;e<n;e++)r.push(i[e].getAttribute("data-configurator-id"));return r},re.updateRenderImage=function(t,e){var n,i,r,o,a,s=[],c=[],u=t.getElementsByClassName("nm-j-configurator-renderimage"),d=re.retrievePrNumbersToFilter(t);for(n=0,i=u.length;n<i;n++)c.push(u[n].getAttribute("data-renderimage-type")),r=u[n].getAttribute("data-renderimage-view"),s.indexOf(r)<=-1&&s.push(r);l.a.sendRenderServiceRequest(d,e,s.join(","),c.join(",")).then((function(t){for(n=0,i=u.length;n<i;n++)o=u[n].getAttribute("data-renderimage-type"),r=u[n].getAttribute("data-renderimage-view"),a=t["render-results"][e][r][o],u[n].setAttribute("style","background-image: url("+a+")")}))},re.resetRenderImage=function(t){var e,n,i,r=t.getElementsByClassName("nm-j-configurator-renderimage");for(e=0,n=r.length;e<n;e++)i=r[e].getAttribute("data-url"),r[e].setAttribute("style","background-image: url("+i+")")},re.getClassBySubstring=function(t,e){var n,i,r=!1;for(n=0,i=t.classList.length;n<i;n++)if(t.classList[n].indexOf(e)>-1){r=t.classList[n];break}return r},re.updateButtonWrapperClass=function(t,e){var n=t.getElementsByClassName(re.oDefaults.sClassAozButton)[0],i=re.getClassBySubstring(e,"nm-j-configurator-status_"),r=re.getClassBySubstring(n,"nm-j-configurator-status_");r&&n.classList.remove(r),i&&n.classList.add(i),re.updateButtonTrackingAttributes(t,e)},re.updateButtonTrackingAttributes=function(t,e){var n=t.getElementsByClassName("nm-el-btn")[0],i=e.getAttribute("data-name"),r=e.getAttribute("data-familygroup"),o=e.getAttribute("data-family");i=""!==o?o+":"+i:i,i=(i=""!==r?r+":"+i:i).replace(/"/g,'\\"'),n.parentNode.setAttribute("data-configurator-id",e.getAttribute("data-configurator-id"))},re.updateDescription=function(t,e){var n=t.getElementsByClassName(re.oDefaults.sClassAozDescription)[0];n.innerHTML=!1===e?n.getAttribute(re.oDefaults.sAttributeInitialCaption):e},re.updateTyreLabel=function(t,e){const n=t.getElementsByClassName(re.oDefaults.sClassAozTyreLabel)[0];if(e){n.innerHTML=`<feature-app\n\t\t\tid="tyre-label-link:aoz-inlinerendering:${e}"\n\t\t\tbase-url="https://fa-tyre-label-link.cdn.prod.arcade.apps.one.audi/v2.0.1/fh/"\n\t\t\tsrc="app.js"\n\t\t\tserver-src="app.node.js"\n\t\t\tconfig='{"optionId": "${e}"}'>\n\t\t</feature-app>`;const t=new CustomEvent("content:rendered",{detail:{element:n}});document.dispatchEvent(t)}else n.innerHTML=""},re.updatePrice=function(t,e){t.getElementsByClassName(re.oDefaults.sClassAozPrice)[0].innerHTML=e},re.updateHintText=function(t,e){t.getElementsByClassName(re.oDefaults.sClassAozHintText)[0].innerHTML=e},re.unsetSelection=function(t){re.removeClassFromElementsWithClassWithinDomFragment(t,re.oDefaults.sClassAozItem,re.oDefaults.sClassAozActive),re.updateDescription(t,!1),re.updateTyreLabel(t,!1),re.updatePrice(t,"&nbsp;"),re.updateHintText(t,"&nbsp;"),re.addClassToElementsWithClassWithinDomFragment(t,re.oDefaults.sClassAozButton,re.oDefaults.sClassAozInvisible),re.resetRenderImage(t)},re.setNewSelection=function(t,e){re.updateDescription(t,e.getAttribute("data-name")),re.updateTyreLabel(t,e.getAttribute("data-configurator-id")),re.updatePrice(t,e.getAttribute("data-price")),re.updateHintText(t,e.getAttribute("data-hinttext")),re.removeClassFromElementsWithClassWithinDomFragment(t,re.oDefaults.sClassAozItem,re.oDefaults.sClassAozActive),e.classList.add(re.oDefaults.sClassAozActive),re.removeClassFromElementsWithClassWithinDomFragment(t,re.oDefaults.sClassAozButton,re.oDefaults.sClassAozInvisible),re.updateButtonWrapperClass(t,e)},re.getClosestElementWithClass=function(t,e){for(var n=t;n.classList&&!n.classList.contains(e);){if(!n.parentNode)return!1;n=n.parentNode}return!!n.parentNode&&n},re.removeClassFromElementsWithClassWithinDomFragment=function(t,e,n){var i,r,o=t.getElementsByClassName(e);for(i=0,r=o.length;i<r;i++)o[i].classList.remove(n)},re.addClassToElementsWithClassWithinDomFragment=function(t,e,n){var i,r,o=t.getElementsByClassName(e);for(i=0,r=o.length;i<r;i++)o[i].classList.add(n)},re.updateStatusClass=function(t,e){var n=re.getClassBySubstring(t,"nm-j-configurator-status_");t.classList.remove(n),t.classList.add("nm-j-configurator-status_"+e)},re.handleSelectionUpdated=function(){var t,e,n,i,r,o=document.body.getElementsByClassName(re.oDefaults.sClassAozItem);const a=[];for(t=0,e=o.length;t<e;t++)i=o[t].getAttribute(re.oDefaults.sAttributePrNumber).split(" ").join("_"),(n=l.a.getItem(i)).status&&re.updateStatusClass(o[t],n.status),o[t].classList.contains(re.oDefaults.sClassAozActive)&&(r=re.getClosestElementWithClass(o[t],re.oDefaults.sClassAozModule),re.updateRenderImage(r,i),a.push(r));re.fallbackToDpuFlyoutImageIfApplicable(a)},re.regexEscape=function(t){return t?t.replace(/[-[\]{}()*+?.,\\^$|]/g,"\\$&"):t},re.isWheel=function(t){return!(!t||!t.toUpperCase().startsWith("MRAD"))},re.fallbackToDpuFlyoutImageIfApplicable=function(t){const e=s.dom.getElementsArray(re.oDefaults.selectorModul);if(!e||0==e.length||!t||e.length==t.length)return;const n=l.a.getConfiguration(),r=SETUPS.get("nemo.url.mediaservice");if(n&&n["mbv-ids"]&&n["mbv-ids"].prstring&&r){const o=n["mbv-ids"].prstring.split("|");o.length>1&&e.forEach((function(e){const a=t.find(t=>t.getAttribute("id")==e.getAttribute("id")),s=e.dataset.defaultextcolor;if(!a&&s&&o[1]){const t=o.reduce((t,e)=>t||re.isWheel(e),!1);if(!new RegExp(`s${re.regexEscape(o[1])}$`).test(s)||t){const t=e.getElementsByClassName("nm-j-configurator-renderimage");let o;for(i=0,o=t.length;i<o;i++){const e=t[i].getAttribute("data-renderimage-type");if("exterior"==t[i].getAttribute("data-renderimage-view")&&e){var l;const o=null==n||null===(l=n.assets)||void 0===l?void 0:l.exterior[e];o&&t[i].setAttribute("style",`background-image: url('${r.replace("/$","")}/${o.replace("^/","")}')`)}}}}}))}},oe.initialize=function(t){re.eventBus=t,re.domEventDelegate=s.dom.getEventDelegate("body"),re.addEvents(),re.handleSelectionUpdated()};const ae={},se={__:ae};ae.oDefaults={sIdCanvas:"nm-ave-canvas",sClassActive:"nm-active",sClassLoading:"nm-3d-loading",sClassUnLoading:"nm-3d-unloading",sClassAVECandidate:"nm-ave-candidate",sClassModeAuto:"nm-md-in-mode-automatic",sClassLandscapeWrapper:"nm-md-in-landscape-wrapper",sClassPortraitWrapper:"nm-md-in-portrait-wrapper",sSelectorInlineRenderingModule:".nm-md-inline-rendering",sSelectorAVEContainer:".nm-md-ave-container",sSelectorAVEContainerActive:".nm-md-ave-container.nm-active",sSelectorInlineRendering:".nm-j-configurator-renderimage",sSelectorInlineRenderingButton360:".nm-md-inline-rendering .nm-icon-360-view",sSelectorInlineRenderingButton2d:".nm-md-inline-rendering .nm-icon-2d-view",sSelectorButton360:".nm-icon-360-view",sSelectorButton2d:".nm-icon-2d-view",sSelectorAVECandidate:".nm-ave-candidate",sSelectorLandscapeWrapper:".nm-md-in-landscape-wrapper",sSelectorPortraitWrapper:".nm-md-in-portrait-wrapper",sSelectorLoading:".nm-3d-loading"},ae.addEvents=function(){ae.eventBus.on(r.appEvents.AVE_AVAILABLE,ae.handlerEnable360),ae.eventBus.on(r.appEvents.PAGE_LOADED,ae.handlerPageLoaded),ae.eventBus.on(r.appEvents.AVE_STREAM_READY,ae.aveStreamReadyHandler),ae.eventBus.on(r.appEvents.PAGE_OPEN,ae.handlerPageOpen)},ae.handlerPageLoaded=function(t){var e;!0===k.isAveAvailable()&&((e=jQuery(t.domElement)).find(ae.oDefaults.sSelectorInlineRenderingButton360).is(":visible")||(e.find(ae.oDefaults.sSelectorInlineRenderingButton360).show(),e.find(ae.oDefaults.sSelectorInlineRenderingButton360).off("click",ae.handlerActivate3d),e.find(ae.oDefaults.sSelectorInlineRenderingButton2d).off("click",ae.handlerActivate2d),e.find(ae.oDefaults.sSelectorInlineRenderingButton360).on("click",ae.handlerActivate3d),e.find(ae.oDefaults.sSelectorInlineRenderingButton2d).on("click",ae.handlerActivate2d)))},ae.handlerEnable360=function(){!0===k.isAveAvailable()&&(jQuery(ae.oDefaults.sSelectorInlineRenderingButton360).is(":visible")||(jQuery(ae.oDefaults.sSelectorInlineRenderingButton360).show(),jQuery(ae.oDefaults.sSelectorInlineRenderingButton360).off("click",ae.handlerActivate3d),jQuery(ae.oDefaults.sSelectorInlineRenderingButton2d).off("click",ae.handlerActivate2d),jQuery(ae.oDefaults.sSelectorInlineRenderingButton360).on("click",ae.handlerActivate3d),jQuery(ae.oDefaults.sSelectorInlineRenderingButton2d).on("click",ae.handlerActivate2d)))},ae.handlerPageOpen=function(){var t=jQuery(ae.oDefaults.sSelectorAVEContainerActive);t.length>0&&(ae.setContainerTo2d(t),k.deactivate(t.attr("id")))},ae.handlerActivate3d=function(t){var e=jQuery(t.currentTarget),n=jQuery(ae.oDefaults.sSelectorAVEContainerActive),i=e.parent().parent();t.preventDefault(),ae.activate3dForContainer(i,n),ae.enableResizeHandler()},ae.activate3dForContainer=function(t,e){var n=t.find(ae.oDefaults.sSelectorInlineRendering),i=t.children(ae.oDefaults.sSelectorAVEContainer).attr("id"),r=n.attr("data-renderimage-view");ae.setContainerTo2d(e),ae.setContainerTo3d(t,e),e.length>0?(k.moveAVE(e.attr("id"),i,r),ae.removeLoadingImg(jQuery(ae.oDefaults.sSelectorAVECandidate))):k.activateAVE(i,r)},ae.setContainerTo3d=function(t){var e=t.find(ae.oDefaults.sSelectorInlineRendering),n=t.children(ae.oDefaults.sSelectorAVEContainer);t.find(ae.oDefaults.sSelectorButton360).hide(),t.find(ae.oDefaults.sSelectorButton2d).show(),e.addClass(ae.oDefaults.sClassLoading),e.addClass(ae.oDefaults.sClassAVECandidate),n.addClass(ae.oDefaults.sClassActive)},ae.handlerActivate2d=function(t){var e=jQuery(ae.oDefaults.sSelectorAVEContainerActive);t.preventDefault(),ae.setContainerTo2d(e),k.deactivate(e.attr("id"))},ae.setContainerTo2d=function(t){t.length>0&&(t.parent().find(ae.oDefaults.sSelectorButton2d).hide(),t.parent().find(ae.oDefaults.sSelectorButton360).show(),setTimeout((function(){t.next().removeClass(ae.oDefaults.sClassUnLoading)}),1e3),t.parent().find(ae.oDefaults.sSelectorInlineRendering).removeClass(ae.oDefaults.sClassLoading),t.parent().find(ae.oDefaults.sSelectorInlineRendering).removeClass(ae.oDefaults.sClassAVECandidate),t.removeClass(ae.oDefaults.sClassActive))},ae.removeLoadingImg=function(t){console.log("removeLoadingImg"),t.addClass(ae.oDefaults.sClassUnLoading),t.removeClass(ae.oDefaults.sClassLoading)},ae.triggerSwipeTracker=function(t){t.target.closest(".nm-ave-animation-selector-wrapper")},ae.aveStreamReadyHandler=function(){var t=jQuery(ae.oDefaults.sSelectorAVEContainerActive);ae.removeLoadingImg(jQuery(ae.oDefaults.sSelectorLoading)),t.length>0&&(t.off("mousedown",ae.triggerSwipeTracker),t.off("touchstart",ae.triggerSwipeTracker),t.on("mousedown",ae.triggerSwipeTracker),t.on("touchstart",ae.triggerSwipeTracker))},ae.enableResizeHandler=function(){jQuery(window).off("resize",ae.handlerResize),jQuery(window).on("resize",ae.handlerResize)},ae.handlerResize=function(){var t,e=jQuery(ae.oDefaults.sSelectorAVEContainerActive),n=e.parent().hasClass(ae.oDefaults.sClassLandscapeWrapper),i=e.parent().hasClass(ae.oDefaults.sClassPortraitWrapper);jQuery(window).width()<jQuery(window).height()&&n?t=e.closest(ae.oDefaults.sSelectorInlineRenderingModule).find(ae.oDefaults.sSelectorPortraitWrapper):jQuery(window).width()>=jQuery(window).height()&&i&&(t=e.closest(ae.oDefaults.sSelectorInlineRenderingModule).find(ae.oDefaults.sSelectorLandscapeWrapper)),t&&ae.activate3dForContainer(t,e)},se.initialize=function(t){ae.eventBus=t,ae.addEvents()};const le={},ce={__:le};le.globalEventBus=null,le.EXPIRED_THRESHOLD=72,window.audi=window.audi||{},window.audi.api=window.audi.api||{},le.isExpired=function(t){return(new Date).getTime()/216e3-t>=le.EXPIRED_THRESHOLD},le.addEvents=function(){le.globalEventBus&&le.globalEventBus.on(r.appEvents.CONFIG_UPDATE,le.handleConfigurationUpdate)},le.getLastConfiguration=function(){var t=le.getStoredConfiguration();return!(!t||!t.lastChanged)&&(!le.isExpired(t.lastChanged)&&t)},window.audi.api.lastConfiguration=le.getLastConfiguration,le.handleConfigurationUpdate=function(){var t=le.getConfigurationObject();le.hasSorage()&&t&&le.writeEntry(t)},le.hasSorage=function(){return!!le.getStorage()},le.getStorage=function(){return window.localStorage||null},le.writeEntry=function(t){var e;try{e=JSON.stringify(t),le.getStorage().setItem("lastConfiguration",e)}catch(t){console.warn(t)}},le.getConfigurationObject=function(){var t,e=l.a.getConfiguration(),n={assets:{},assetsMobile:{}},i=l.a.getConfigurationAssets();return t=l.a.getRenderUrl(),e&&!l.a.getConflicts()&&i&&0!==Object.keys(i).length?(n.assets.exterior_front=i.exterior_front&&i.exterior_front["stage.hd"]?t+i.exterior_front["stage.hd"]:"",n.assets.closeup_lights=i.closeup_lights&&i.closeup_lights["stage.hd"]?t+i.closeup_lights["stage.hd"]:"",n.assets.exterior=i.exterior&&i.exterior["stage.hd"]?t+i.exterior["stage.hd"]:"",n.assetsMobile.exterior_front=i.exterior_front&&i.exterior_front["stage.hdx"]?t+i.exterior_front["stage.hdx"]:"",n.assetsMobile.closeup_lights=i.closeup_lights&&i.closeup_lights["stage.hdx"]?t+i.closeup_lights["stage.hdx"]:"",n.assetsMobile.exterior=i.exterior&&i.exterior["stage.hdx"]?t+i.exterior["stage.hdx"]:"",n.price=e.price,n.carline=e.carline,n.carlineName=e.carlineName,n.eec=e.eec,n.lastChanged=(new Date).getTime(),n["mv-version"]=l.a.getMarketVersion(),n.context=l.a.getContext(),n.url=le.getEntryUrl(e.prstring),n):null},le.getStoredConfiguration=function(){var t=le.getStorage();if(!t||!t.lastConfiguration)return null;try{return JSON.parse(t.lastConfiguration)}catch(t){return console.warn(t),null}},le.getEntryUrl=function(t){var e;return e=window.location.href.split("#")[0],e+=e.indexOf("?")>0?"&":"?",e+="pr="+t},ce.initialize=function(t){var e;return new Promise((function(n){le.globalEventBus=t,le.addEvents(),(e=parseInt(SETUPS.get("nemo.last_config.expires"),10))>0&&(le.EXPIRED_THRESHOLD=e),n("configurator/last-configuration.js")}))};const ue={},de={__:ue};function me(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}ue.handleLayerLoaded=function(){const t=document.querySelector(".nm-md-media-library-configuration-buttons");if(t){const e=t.querySelector(".nm-md-media-library-configuration-button"),n=t.getAttribute("data-configurator-id");if(ut.a.getModelsInfo(n)){const t=l.a.getItem(n);"11010"===(null==t?void 0:t.status)&&e.classList.add("nm-md-media-library-configuration-button--inactive")}}},ue.addEvents=function(){ue.eventBus.on(r.appEvents.PAGE_LOADED,ue.handleLayerLoaded),ue.eventBus.on(r.appEvents.LAYER_LOADED,ue.handleLayerLoaded),ue.eventBus.on(r.appEvents.MODELSINFO_LOAD_COMPLETE,ue.handleLayerLoaded),ue.eventBus.on(r.appEvents.CONFIG_UPDATE,ue.handleLayerLoaded)},de.initialize=function(t){ue.eventBus=t,ue.addEvents()},Object.setPrototypeOf(me.prototype,HTMLElement.prototype),Object.setPrototypeOf(me,HTMLElement);class ge extends me{constructor(){super(),this.eventBus=r.signal.getEmitter(),this.configuration=null,this.loadConfiguration=this.loadConfiguration.bind(this),this.isExternalLink=SETUPS.get("scope.nemo.audicode.externallink"),c.stateRegistry.subscribeToStore(u.a,t=>this.getConfigurationFromState(t))}connectedCallback(){this.link=this.querySelector(".nm-j-audicode-accept"),this.link.addEventListener("click",this.loadConfiguration)}disconnectedCallback(){this.link.removeEventListener("click",this.loadConfiguration)}loadConfiguration(t){if(this.configuration){if(this.emitLoadAudicodeEvent(),this.isExternalLink)return this.hasOtherUrl()&&(this.link.href=this.configuration.audicode["other-url"]),!0;t.preventDefault(),this.hasOtherUrl()&&(window.location=this.configuration.audicode["other-url"]),this.handleExternalConfiguration(),this.closeHeaderService()}else t.preventDefault()}handleExternalConfiguration(){h.a.handleExternalConfiguration(this.configuration,{startType:"audicode-search"}).then(()=>{r.router.open("page",l.a.getCurrentCarlineUrl())})}getConfigurationFromState(t){t&&t.configuration&&(this.configuration=t.configuration)}hasOtherUrl(){return!!this.configuration&&this.configuration.audicode&&this.configuration.audicode["other-url"]&&""!==this.configuration.audicode["other-url"]}emitLoadAudicodeEvent(){this.eventBus.emit(r.appEvents.SEARCH_LOAD_AUDICODE,{audicode:this.configuration.audicode.id})}closeHeaderService(){const t=document.querySelector("header-service");t&&t.click()}}function fe(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}window.customElements.get("audi-configurator-load-audicode-link")||window.customElements.define("audi-configurator-load-audicode-link",ge),Object.setPrototypeOf(fe.prototype,HTMLElement.prototype),Object.setPrototypeOf(fe,HTMLElement);class pe extends fe{constructor(){super(),this.updateTargetParam=this.updateTargetParam.bind(this),this.handleLoginStatus=this.handleLoginStatus.bind(this),this.handleLogoutStatus=this.handleLogoutStatus.bind(this),this.logoutHandler=this.logoutHandler.bind(this),this.showLoginLink=this.showLoginLink.bind(this),this.showLogoutLink=this.showLogoutLink.bind(this),this.hideHeader=this.hideHeader.bind(this),this.showHeader=this.showHeader.bind(this),this.csrfToken=null}connectedCallback(){this.loginLinkElement=this.querySelector(".myaudi-login__link"),this.logoutLinkElement=this.querySelector(".myaudi-logout__link"),this.logoutLinkElement.addEventListener("click",this.logoutHandler),c.stateRegistry.subscribeToStore(u.a,this.updateTargetParam),this.getLoginStatus(),this.updateTargetParam(),this.loginHeadline=document.querySelector(".audi-login-headline-container")}disconnectedCallback(){this.logoutLinkElement.removeEventListener("click",this.logoutHandler)}updateTargetParam(t){const e=this.querySelector(".myaudi-login__link"),n=new URL(e.getAttribute("href")),i=new URL(window.location.href);t&&t.audicode&&i.searchParams.set("audicode",t.audicode),n.searchParams.set("target_url",i.href),e.setAttribute("href",n.href)}handleLoginStatus(t){t.loggedIn?(this.csrfToken=t.csrfToken,c.stateRegistry.triggerAction(d,"update",t),this.showLogoutLink()):this.showLoginLink()}handleLogoutStatus(t){t.logoutDone?(this.csrfToken=null,c.stateRegistry.triggerAction(d,"logout"),this.showLoginLink()):this.showLogoutLink()}getLoginStatus(){const t=SETUPS.get("myaudi.uds.url")+"loginStatus";fetch(t,{credentials:"include"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then(this.handleLoginStatus).then(this.updateTargetParam).catch(t=>console.log("netzwerk problem/performance problem: ",t))}logoutHandler(t){t.preventDefault();const e=SETUPS.get("myaudi.uds.url")+"logout",n={credentials:"include",headers:{"X-CSRF-Token":this.csrfToken}};fetch(e,n).then(t=>{if(t.ok)return t.json()}).then(this.handleLogoutStatus)}showLoginLink(){this.loginLinkElement.classList.remove("nm-hidden"),this.logoutLinkElement.classList.add("nm-hidden"),this.showHeader()}showLogoutLink(){this.loginLinkElement.classList.add("nm-hidden"),this.logoutLinkElement.classList.remove("nm-hidden"),this.hideHeader()}showHeader(){this.loginHeadline&&this.loginHeadline.classList.remove("nm-hidden")}hideHeader(){this.loginHeadline&&this.loginHeadline.classList.add("nm-hidden")}}function he(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}void 0===window.customElements.get("audi-login")&&window.customElements.define("audi-login",pe),Object.setPrototypeOf(he.prototype,HTMLElement.prototype),Object.setPrototypeOf(he,HTMLElement);class ve extends he{static get selectors(){return{counter:"nm-light-experience-list__item_",containers:".nm-light-experience-list__item-container",items:".nm-light-experience-list__item",visible:[":not(.nm-j-configurator-container-hide)",":not(.nm-j-configurator-status_00000)",":not(.nm-j-configurator-status_00001)",":not(.nm-j-configurator-status_00010)",":not(.nm-j-configurator-status_00011)",":not(.nm-j-configurator-status_00100)",":not(.nm-j-configurator-status_00101)",":not(.nm-j-configurator-status_00110)",":not(.nm-j-configurator-status_00111)",":not(.nm-j-configurator-status_01000)",":not(.nm-j-configurator-status_01001)",":not(.nm-j-configurator-status_01010)",":not(.nm-j-configurator-status_01011)",":not(.nm-j-configurator-status_01100)",":not(.nm-j-configurator-status_01101)",":not(.nm-j-configurator-status_01110)",":not(.nm-j-configurator-status_01111)",":not(.nm-j-configurator-status_10000)"]}}constructor(){super(),this.eventBus=r.signal.getEmitter(),this.setViewportWidth_=this.setViewportWidth.bind(this)}connectedCallback(){this.visibleSelector=ve.selectors.visible.join(""),this.itemsPerRow=1,this.addEvents(),this.setViewportWidth()}disconnectedCallback(){this.removeEvents()}addEvents(){this.eventBus.on(r.appEvents.DOM_UPDATED,()=>{this.updateElements()}),this.onResizeHandler=s.dom.throttle(this.setViewportWidth.bind(this),100),window.addEventListener("resize",this.onResizeHandler)}removeEvents(){this.eventBus.off(r.appEvents.DOM_UPDATED,()=>{this.updateElements()}),window.removeEventListener("resize",this.onResizeHandler)}getItemsPerRow(){return this.viewportWidth<768?1:this.viewportWidth>=768&&this.viewportWidth<1280?2:this.viewportWidth>=1280&&this.viewportWidth<1440?3:4}setViewportWidth(){this.viewportWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0);const t=this.itemsPerRow;this.itemsPerRow=this.getItemsPerRow(),t!==this.itemsPerRow&&this.updateElements()}updateElements(){const t=[...this.querySelectorAll(ve.selectors.containers)],e=ve.selectors.items+this.visibleSelector;t.forEach(t=>{[...t.querySelectorAll(e)].forEach((t,e,n)=>{t.classList.remove(ve.selectors.counter+"last"),e%this.itemsPerRow!=this.itemsPerRow-1&&e!==n.length-1||t.classList.add(ve.selectors.counter+"last")})})}}window.customElements.get("audi-configurator-light-experience")||window.customElements.define("audi-configurator-light-experience",ve);const ye={},Se={__:ye};function Ce(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}ye.oDefaults={sSelectorItemLoading:".nm-j-configurator-item-loading",sItemLoadingClass:"nm-j-configurator-item-loading"},ye.showLoadingIndicator=function(t){var e=t.$element;e&&e.length&&e.addClass(ye.oDefaults.sItemLoadingClass)},ye.hideLoadingIndicator=function(){jQuery(ye.oDefaults.sSelectorItemLoading).removeClass(ye.oDefaults.sItemLoadingClass)},ye.addEvents=function(){ye.eventBus.on(r.appEvents.CONFIG_CHANGEREQUEST_START,ye.showLoadingIndicator),ye.eventBus.on(r.appEvents.CONFIG_CHANGEREQUEST_END,ye.hideLoadingIndicator)},Se.initialize=function(t){ye.eventBus=t,ye.addEvents()},Object.setPrototypeOf(Ce.prototype,HTMLElement.prototype),Object.setPrototypeOf(Ce,HTMLElement);class Ee extends Ce{static get observedAttributes(){return["data-rate"]}static get selectors(){return{circle:".nm-offer-rate-path",text:".nm-offer-rate-value"}}static get options(){return{circle:{duration:2e3,property:"strokeDashoffset",easing:"easeInOutSine"},text:{duration:2e3,property:"innerHTML",easing:"noEasingInt"},observer:{threshold:1}}}constructor(){super()}connectedCallback(){this.initElements(),this.setInitialValues(),this.isIntersectionOberserverAvailable()?this.setupIntersectionObserver():this.startAnimations()}attributeChangedCallback(t,e,n){switch(t){case"data-rate":this.updateRate(e,n)}}updateRate(t,e){null!==t&&t!==e&&(this.initRate(),this.startAnimations())}isIntersectionOberserverAvailable(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype}setupIntersectionObserver(){new IntersectionObserver(t=>{t.filter(t=>t.intersectionRatio>=Ee.options.observer.threshold).forEach(()=>this.startAnimations())},Ee.options.observer).observe(this)}initElements(){this.circle=this.querySelector(Ee.selectors.circle),this.text=this.querySelector(Ee.selectors.text),this.pathLength="function"==typeof this.circle.getTotalLength?this.circle.getTotalLength():0,this.initRate()}initRate(){this.rate=parseInt(this.getAttribute("data-rate"),10),this.rate=this.rate>100?100:this.rate}setInitialValues(){this.circle.style.strokeDasharray=this.pathLength,this.circle.style.strokeDashoffset=this.pathLength}startAnimations(){const t=this.pathLength*(1-this.rate/100);s.animate.animateElementStyleProperty(t,this.circle,Ee.options.circle),this.text&&s.animate.animateElementProperty(this.rate,this.text,Ee.options.text)}}window.customElements.get("audi-configurator-offerrate")||window.customElements.define("audi-configurator-offerrate",Ee);const be={},we={__:be};be.oDefaults={},be.pendingPromise=null,be.resolved=!1,be.eventBus=null,be.register=function(){dt.patternMatching.register("audicode",be.getAudiCode),dt.patternMatching.register("conf_audicode",be.getAudiCode)},be.getAudiCode=function(){return!be.resolved&&be.pendingPromise||(be.pendingPromise=be.fetchAudiCode().catch((function(t){return be.resolved=!0,be.pendingPromise=null,t})).then((function(t){return be.resolved=!0,be.pendingPromise=null,t}))),be.pendingPromise},be.fetchAudiCode=function(){return new Promise((function(t,e){p.loadAudiCode().then((function(e){t(e)}),(function(t){e(t),console.error(t)}))}))},we.initialize=function(){be.register()};var De={},_e={__:De};De.oDefaults={},De.register=function(){dt.patternMatching.register("carlineID",De.getCarlineId)},De.getCarlineId=function(){var t;return new Promise((function(e,n){(t=l.a.getCarline())?e(t):n(new TypeError("load pattern -carlineID- failed"))}))},_e.initialize=function(){De.register()};var Ae={},Le={__:Ae};Ae.oDefaults={},Ae.register=function(){dt.patternMatching.register("conf_finance",Ae.getConfigurationAttribute("financeProductName")),dt.patternMatching.register("conf_name",Ae.getConfigurationAttribute("carlineName")),dt.patternMatching.register("conf_id",Ae.getConfigurationAttribute("carline")),dt.patternMatching.register("conf_description",Ae.getConfigurationAttribute("description")),dt.patternMatching.register("conf_modelyear",Ae.getConfigurationAttribute("modelyear")),dt.patternMatching.register("conf_power_primary",Ae.getModelInfoAttribute("power-primary")),dt.patternMatching.register("conf_power_secondary",Ae.getModelInfoAttribute("power-secondary"))},Ae.getConfigurationAttribute=function(t){return function(){var e=l.a.getConfiguration();return new Promise((function(n,i){e&&e[t]?n(e[t]):i(t+" was not found within the configuration")}))}},Ae.getModelInfoAttribute=function(t){return function(){var e=l.a.getCurrentModelInfo();return new Promise((function(n,i){e&&e[t]?n(e[t]):i(t+" was not found within the model Info")}))}},Le.initialize=function(){Ae.register()};const Te={},ke={__:Te};Te.oDefaults={},Te.eventBus=null,Te.register=function(){dt.patternMatching.register("language",Te.getLanguage)},Te.getLanguage=function(){var t;return new Promise((function(e,n){(t=SETUPS.get("nemo.locale.language"))?e(t):n(new TypeError("load pattern -language- failed"))}))},ke.initialize=function(){Te.register()};const Ie={},xe={__:Ie};Ie.oDefaults={sourceName:"IPH"},Ie.eventBus=null,Ie.register=function(){dt.patternMatching.register("lead_source",Ie.getLeadSource)},Ie.getLeadSource=function(){return new Promise((function(t,e){dt.iph.inIPHMode()?t(Ie.oDefaults.sourceName):e(new TypeError("load pattern -leadsource- failed"))}))},xe.initialize=function(){Ie.register()};var Pe={},Oe={__:Pe};Pe.oDefaults={},Pe.eventBus=null,Pe.register=function(){dt.patternMatching.register("partnerid",Pe.getPartnerId)},Pe.getPartnerId=function(){var t;return new Promise((function(e,n){(t=dt.iph.inIPHMode())?e(t):n(new TypeError("load pattern -partnerid- failed"))}))},Oe.initialize=function(){Pe.register()};const je=new class{initialize(){dt.patternMatching.register("prstring",this._getPrString)}_getPrString(){return new Promise(t=>t(l.a.getPrString()))}},Re={},Be={__:Re};Re.oDefaults={},Re.register=function(){dt.patternMatching.register("vehicle_id",Re.getVehicleId)},Re.getVehicleId=function(){return new Promise((function(t,e){const n=Re.getUrlParameterByName("vehicleid",location.href);n?t(n):e(new TypeError("load pattern -vehicleid- failed"))}))},Re.getUrlParameterByName=function(t,e){let n,i,r,o;return o=e||window.location.href,r=(t||"").replace(/[[\]]/g,"\\$&"),n=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)"),i=n.exec(o),i?i[2]?decodeURIComponent((i[2]||"").replace(/\+/g," ")):"":null},Be.initialize=function(){Re.register()};const Me={},Fe={__:Me};var Ue="",ze="";Me.setGroupPrice=function(){s.dom.getElementsArray(".js-configurator-group").forEach((function(t){var e,n=t,i=s.dom.closest(n,".nm-pattern-block, .nm-pattern-block-dynamic, .nm-tile-block"),r=s.dom.getElementsArray(".nm-j-configurator-item:not(.nm-j-configurator-status_00000)",i),o=Number.MAX_VALUE,a=!0;r.forEach((function(t){var n,i,r;i=(n=l.a.getItem(t.getAttribute("data-configurator-id")))&&n.price?n.price:"",1*(r=(r=Fe.getRawPrice(i,!1)).toFixed(2))==0&&(e=ze),1*o>1*r&&(e=i,o=r),a&&o!==r&&(a=!1)})),a||(e=Ue+" "+e),s.dom.getElement(".nm-price",n).textContent=e}))},Fe.getRawPrice=function(t,e){var n,i;return i=0===SETUPS.get("scope.commaseparator")||"0"===SETUPS.get("scope.commaseparator")?/[^0-9,]/g:/[^0-9.]/g,(n=t.replace(i,"")).replace(/[,]/g,"."),n=!0===e?parseInt(n,10):parseFloat(n),isNaN(n)&&(n=0),n},Me.setSelectedGroup=function(){s.dom.getElementsArray(".nm-pattern-list-dynamic").forEach((function(t){var e=s.dom.getElementsArray("li.nm-j-configurator-status_11010, li.nm-j-configurator-status_10011",t).length;t.classList.remove("nm-pattern-selected"),e&&t.classList.add("nm-pattern-selected")}))},Me.handleUpdates=function(){s.polling.wait((function(){return l.a.isInitialized()||!l.a.getCarline()}),5e3,250).then((function(){Me.setSelectedGroup(),Me.setGroupPrice()})).catch(t=>console.warn("pattern: could not update groups and prices",t))},Me.subscribe=function(){Me.eventBus.on(r.appEvents.CONFIG_UPDATE,Me.handleUpdates),Me.eventBus.on(r.appEvents.PAGE_LOADED,Me.handleUpdates),Me.eventBus.on(r.appEvents.LAYER_LOADED,Me.handleUpdates)},Me.initialize=function(){Ue=window.i18n.from,ze=window.i18n["standard-group-price"],Me.subscribe()},Fe.initialize=function(t){Me.eventBus=t,Me.initialize()};const Ne={},Qe={__:Ne};Ne.oDefaults={sSelectorModule:".j-pdf-configuration"},Ne.addEvents=function(){s.dom.getEventDelegate("body").on("click",Ne.oDefaults.sSelectorModule,Ne.callPDFServiceWithAudicode)},Ne.callPDFServiceWithAudicode=function(t){var e,n;e=SETUPS.get("nemo.pdf.url"),console.log("PDFURl: ",e),e&&(n=window.open(),dt.patternMatching.getReplacedUrl(e+"/audicode/{{audicode}}","audi.de").then((function(t){n.location=t})).catch((function(t){console.warn("PDF SERVICE LINK ERROR: something went wrong in pattern matching: ",t)})))},Qe.initialize=function(t){Ne.addEvents()};const He={},Ve={__:He};He.oDefaults={sPreconfTeaserSelector:".nm-module-preconfiguration-teaser",spreconfigSlide:".nm-md-preconfig-teaser-slide",sButtonSelector:".j-preconfig-submit",sButtonConfigurationClass:"nm-md-preconfig-teaser-custom-configuration",sSelectorTabsNavi:"ul.nm-preconfiguration-teaser-thumbs",sSelectorTeaserTemplates:"j-preconfig-teaser-tpl-",sTabsSelectorDelegateClick:"li.nm-preconfiguration-teaser-thumbnail",sMenuSelectedClass:"nm-selected",sSelectorTeaserContainer:".nm-preconfig-teaser-peephole",selectorArrow:".nm-preconfiguration-teaser-slide-arrows a",selectorArrowPrev:".nm-preconfiguration-teaser-slide-prev",selectorArrowNext:".nm-preconfiguration-teaser-slide-next",classHidden:"nm-hidden"},He.selectedIndex=0,He.maxIndex=0,He.startPos={x:0,y:0},He.PREV="prev",He.sensitivity=40,He.direction="left",He.isAnimating=!1,He.xDirection="none",He.yDirection="none",He.deltaX=0,He.deltaY=0,He.eventLookup={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},He.isDown=!1,He.deviceType="desktopdevice",He.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},He.handlePageLoaded=function(){if(He.$preconfigTeaserContainer&&jQuery.contains(document,He.$preconfigTeaserContainer[0]))return!1;if(He.$preconfigTeaserContainer=jQuery(He.oDefaults.sPreconfTeaserSelector),He.$preconfigTeaserContainer.length){var t=jQuery("script[id^='"+He.oDefaults.sSelectorTeaserTemplates+"']");He.maxIndex=t.length-1,He.isTouchDevice()&&(He.deviceType="touchdevice"),He.maxIndex>0&&(He.addSwipeEvents(),He.$preconfigTeaserContainer.on("click.tabs touchend.tabs",He.oDefaults.sTabsSelectorDelegateClick,He.handleTabClick)),He.$preconfigTeaserContainer.on("click.configuration.start touchend.configuration.start",He.oDefaults.sButtonSelector,He.handleConfigurationStartClick),He.eventBus.on(r.appEvents.CONFIG_UPDATE,He.updateButtonLabel),He.updateButtonLabel(),He.updateArrows(0)}},He.addSwipeEvents=function(){He.removeSwipeEvents(),He.$preconfigTeaserContainer.off(He.eventLookup[He.deviceType].down,He.handleMouseDown).on(He.eventLookup[He.deviceType].down,He.handleMouseDown)},He.removeSwipeEvents=function(){He.$preconfigTeaserContainer.off(He.eventLookup[He.deviceType].up,He.handleMouseUp),He.$preconfigTeaserContainer.off(He.eventLookup[He.deviceType].move,He.handleMouseMove)},He.handleMouseDown=function(t){He.isDown=!1,"select"!==t.target.nodeName.toLowerCase()&&"input"!==t.target.nodeName.toLowerCase()&&"option"!==t.target.nodeName.toLowerCase()&&(He.isDown=!0,He.deltaX=0,He.deltaY=0,He.startPos.x=t.pageX||t.originalEvent.changedTouches[0].pageX,He.startPos.y=t.pageY||t.originalEvent.changedTouches[0].pageY,He.$preconfigTeaserContainer.off(He.eventLookup[He.deviceType].up,He.handleMouseUp).on(He.eventLookup[He.deviceType].up,He.handleMouseUp),He.isTouchDevice()||He.$preconfigTeaserContainer.on(He.eventLookup[He.deviceType].move,He.handleMouseMove))},He.getXDirection=function(t){return t>0?"left":"right"},He.getYDirection=function(t){return t>0?"up":"down"},He.handleMouseUp=function(t){He.down=!1,He.removeSwipeEvents(),He.deltaX=He.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),He.deltaY=He.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),He.xDirection=He.getXDirection(He.deltaX),He.yDirection=He.getYDirection(He.deltyY),Math.abs(He.deltaX)>He.sensitivity&&Math.abs(He.deltaY)<He.sensitivity&&He.triggerViewChange(He.xDirection)},He.handleMouseMove=function(t){He.isDown&&(He.deltaX=He.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),He.deltaY=He.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),He.xDirection=He.getXDirection(He.deltaX),He.yDirection=He.getYDirection(He.deltyY),Math.abs(He.deltaX)>He.sensitivity&&Math.abs(He.deltaY)<He.sensitivity&&(He.removeSwipeEvents(),He.isDown=!1,He.triggerViewChange(He.xDirection)))},He.removeEvents=function(){He.$preconfigTeaserContainer=jQuery(He.oDefaults.sPreconfTeaserSelector),He.$preconfigTeaserContainer.length&&(He.removeSwipeEvents(),He.$preconfigTeaserContainer.off("click.tabs touchend.tabs",He.handleTabClick),He.$preconfigTeaserContainer.off("click.configuration.start touchend.configuration.start",He.handleConfigurationStartClick),jQuery("body").off(r.appEvents.CONFIG_UPDATE,He.updateButtonLabel))},He.handleConfigurationStartClick=function(t){He.cancelEvent(t);var e=jQuery(this),n=e.data("prstring"),i=e.data("audicode");return jQuery(t.target).closest("a").trigger("click.link-tracking"),i?(h.a.loadConfigurationFromTeaser({audicode:i,prstring:null},"audicode.preconfig-teaser").then((function(){r.router.open("page",l.a.getCurrentCarlineUrl())})),!1):n?(h.a.loadConfigurationFromTeaser({prstring:n,audicode:null},"prstring.preconfig-teaser").then((function(){r.router.open("page",l.a.getCurrentCarlineUrl())})),!1):(r.router.open("page",l.a.getCurrentCarlineUrl()),void jQuery("a.nm-configuration-new").trigger("click.configuration.new"))},He.handleTabClick=function(t){t&&t.preventDefault&&t.preventDefault();var e,n=He.selectedIndex;this.hasAttribute("data-direction")?e=this.getAttribute("data-direction")===He.PREV?n-1:n+1:e=$(this).index();return He.cancelEvent(t),He.isAnimating?null:e!==n&&(He.direction=e>n?"left":"right",He.selectedIndex=e,void He.updateContent(He.selectedIndex,He.direction))},He.updateArrows=function(t){if(0!=He.maxIndex){var e=s.dom.getElement(He.oDefaults.selectorArrowPrev),n=s.dom.getElement(He.oDefaults.selectorArrowNext);0==t?e.classList.add(He.oDefaults.classHidden):e.classList.remove(He.oDefaults.classHidden),t==He.maxIndex?n.classList.add(He.oDefaults.classHidden):n.classList.remove(He.oDefaults.classHidden)}},He.getNextIndex=function(t){return(t+1)%(He.maxIndex+1)},He.getPreviousIndex=function(t){var e=t-1;return e<0&&(e=He.maxIndex),e},He.updateContent=function(t,e){He.insertTeaser(t,e),He.updateSelection(t)},He.triggerViewChange=function(t){var e=He.selectedIndex;if(He.isAnimating)return null;He.legacyEventBus.trigger("swipe.preconfiguration",{prop16:"<prefix>:"+l.a.getCarlineName(),eVar39:"Pre-Config Switch",prop39:"Pre-Config Switch",eVar44:"Pre-Config Switch",prop44:"Pre-Config Switch",eVar46:"<pagename>:Pre-Config Switch:Swipe",prop46:"<pagename>:Pre-Config Switch:Swipe",prop67:"<pagename>"}),He.direction=t,e="right"===t?He.getPreviousIndex(e):He.getNextIndex(e),He.selectedIndex=e,He.updateContent(He.selectedIndex,He.direction)},He.handlePageLeave=function(){He.removeEvents()},He.animateStage=function(t,e,n,i){var r="-"+.5*e.width()+"px";He.isAnimating=!0,"left"===t?e.css("height",n).animate({"margin-left":r,height:i},500,"easeOutSine",He.animationEnded):e.css("margin-left",r).animate({"margin-left":0,height:i},500,"easeOutSine",He.animationEnded)},He.insertTeaser=function(t,e){var n,i,r,o,a=jQuery(He.oDefaults.sSelectorTeaserContainer);a.addClass("nm-slide-animation-start-"+e),n=He.getTemplateByIndex(t),i=jQuery(n),r=jQuery(He.oDefaults.spreconfigSlide).height()+"px",i.appendTo(a),o=i.height()+"px",He.animateStage(e,a,r,o);const s=document.querySelector(He.oDefaults.sSelectorTeaserContainer),l=new CustomEvent("content:rendered",{detail:{element:s}});document.dispatchEvent(l)},He.animationEnded=function(){$(this).removeClass(["nm-slide-animation-start-",He.direction].join("")).removeAttr("style").find(He.oDefaults.spreconfigSlide).first().remove(),He.isAnimating=!1,He.updateArrows(He.selectedIndex)},He.updateButtonLabel=function(){l.a.hasCustomConfiguration()?$(He.oDefaults.sSelectorTeaserContainer).addClass(He.oDefaults.sButtonConfigurationClass):$(He.oDefaults.sSelectorTeaserContainer).removeClass(He.oDefaults.sButtonConfigurationClass)},He.updateSelection=function(t){var e=He.$preconfigTeaserContainer.find(He.oDefaults.sSelectorTabsNavi).find(He.oDefaults.sTabsSelectorDelegateClick);e.removeClass(He.oDefaults.sMenuSelectedClass),jQuery(e[t]).addClass(He.oDefaults.sMenuSelectedClass)},He.getTemplateByIndex=function(t){var e=jQuery(["#",He.oDefaults.sSelectorTeaserTemplates,t].join("")).html()||"";return e=e.trim()},He.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},He.addEvents=function(){He.eventBus.on(r.appEvents.PAGE_LOADED,He.handlePageLoaded),He.eventBus.on(r.appEvents.LAYER_LOADED,He.handlePageLoaded),He.domEventDelegate.on("click",He.oDefaults.selectorArrow,He.handleTabClick)},Ve.initialize=function(t){He.eventBus=t,He.domEventDelegate=s.dom.getEventDelegate("body"),He.addEvents(),He.handlePageLoaded()};const qe={},We={__:qe};qe.oDefaults={sPreconfTeaserSelector:".nm-md-preconfs-teaser",sPreconfsSlide:".nm-md-preconfs-teaser-slide",sButtonSelector:".j-preconfs-submit",sButtonConfigurationClass:"nm-md-preconfs-teaser-custom-configuration",sSelectorDotsNavi:"ul.nm-dots-navi",sSelectorTeaserTemplates:"j-preconfs-teaser-tpl-",sDotsSelectorDelegateClick:"li.nm-dot",sMenuSelectedClass:"nm-selected",sSelectorTeaserContainer:".nm-peephole"},qe.selectedIndex=0,qe.maxIndex=0,qe.startPos={x:0,y:0},qe.sensitivity=40,qe.direction="left",qe.isAnimating=!1,qe.xDirection="none",qe.yDirection="none",qe.deltaX=0,qe.deltaY=0,qe.eventLookup={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},qe.isDown=!1,qe.deviceType="desktopdevice",qe.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},qe.handlePageLoaded=function(){if(qe.$preconfsTeaserContainer=jQuery(qe.oDefaults.sPreconfTeaserSelector),qe.$preconfsTeaserContainer.length){var t=jQuery("script[id^='"+qe.oDefaults.sSelectorTeaserTemplates+"']");qe.maxIndex=t.length-1,qe.isTouchDevice()&&(qe.deviceType="touchdevice"),qe.maxIndex>0&&(qe.addSwipeEvents(),qe.$preconfsTeaserContainer.on("click.dots touchend.dots",qe.oDefaults.sDotsSelectorDelegateClick,qe.handleDotClick)),qe.$preconfsTeaserContainer.on("click.configuration.start touchend.configuration.start",qe.oDefaults.sButtonSelector,qe.handleConfigurationStartClick),qe.eventBus.on(r.appEvents.CONFIG_UPDATE,qe.updateButtonLabel),qe.updateButtonLabel()}},qe.addSwipeEvents=function(){qe.removeSwipeEvents(),qe.$preconfsTeaserContainer.off(qe.eventLookup[qe.deviceType].down,qe.handleMouseDown).on(qe.eventLookup[qe.deviceType].down,qe.handleMouseDown)},qe.removeSwipeEvents=function(){qe.$preconfsTeaserContainer.off(qe.eventLookup[qe.deviceType].up,qe.handleMouseUp),qe.$preconfsTeaserContainer.off(qe.eventLookup[qe.deviceType].move,qe.handleMouseMove)},qe.handleMouseDown=function(t){qe.isDown=!1,"select"!==t.target.nodeName.toLowerCase()&&"input"!==t.target.nodeName.toLowerCase()&&"option"!==t.target.nodeName.toLowerCase()&&(qe.isDown=!0,qe.deltaX=0,qe.deltaY=0,qe.startPos.x=t.pageX||t.originalEvent.changedTouches[0].pageX,qe.startPos.y=t.pageY||t.originalEvent.changedTouches[0].pageY,qe.$preconfsTeaserContainer.off(qe.eventLookup[qe.deviceType].up,qe.handleMouseUp).on(qe.eventLookup[qe.deviceType].up,qe.handleMouseUp),qe.isTouchDevice()||qe.$preconfsTeaserContainer.on(qe.eventLookup[qe.deviceType].move,qe.handleMouseMove))},qe.handleMouseUp=function(t){qe.down=!1,qe.removeSwipeEvents(),qe.deltaX=qe.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),qe.deltaY=qe.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),qe.deltaX>0?qe.xDirection="left":qe.xDirection="right",qe.deltaY>0?qe.yDirection="up":qe.yDirection="down",Math.abs(qe.deltaX)>qe.sensitivity&&Math.abs(qe.deltaY)<qe.sensitivity&&qe.triggerViewChange(qe.xDirection)},qe.handleMouseMove=function(t){qe.isDown&&(qe.deltaX=qe.startPos.x-(t.pageX||t.originalEvent.changedTouches[0].pageX),qe.deltaY=qe.startPos.y-(t.pageY||t.originalEvent.changedTouches[0].pageY),qe.deltaX>0?qe.xDirection="left":qe.xDirection="right",qe.deltaY>0?qe.yDirection="up":qe.yDirection="down",Math.abs(qe.deltaX)>qe.sensitivity&&Math.abs(qe.deltaY)<qe.sensitivity&&(qe.removeSwipeEvents(),qe.isDown=!1,qe.triggerViewChange(qe.xDirection)))},qe.removeEvents=function(){qe.$preconfsTeaserContainer=jQuery(qe.oDefaults.sPreconfTeaserSelector),qe.$preconfsTeaserContainer.length&&(qe.removeSwipeEvents(),qe.$preconfsTeaserContainer.off("click.dots touchend.dots",qe.handleDotClick),qe.$preconfsTeaserContainer.off("click.configuration.start touchend.configuration.start",qe.handleConfigurationStartClick),jQuery("body").off(r.appEvents.CONFIG_UPDATE,qe.updateButtonLabel))},qe.handleConfigurationStartClick=function(t){qe.cancelEvent(t);var e=jQuery(this),n=e.data("prstring"),i=e.data("audicode");return i?(h.a.loadConfigurationFromTeaser({audicode:i,prstring:null},"audicode.preconfs-teaser").then((function(){r.router.open("page",l.a.getCurrentCarlineUrl())})),!1):n?(h.a.loadConfigurationFromTeaser({prstring:n,audicode:null},"prstring.preconfs-teaser").then((function(){r.router.open("page",l.a.getCurrentCarlineUrl())})),!1):(r.router.open("page",l.a.getCurrentCarlineUrl()),void jQuery("a.nm-configuration-new").trigger("click.configuration.new"))},qe.handleDotClick=function(t){if(qe.cancelEvent(t),qe.isAnimating)return null;var e=$(this).index(),n=qe.selectedIndex;if(e===n)return!1;qe.direction=e>n?"left":"right",qe.selectedIndex=e,qe.updateContent(qe.selectedIndex,qe.direction)},qe.getNextIndex=function(t){return(t+1)%(qe.maxIndex+1)},qe.getPreviousIndex=function(t){return(t-=1)<0&&(t=qe.maxIndex),t},qe.updateContent=function(t,e){qe.insertTeaser(t,e),qe.updateSelection(t)},qe.triggerViewChange=function(t){if(qe.isAnimating)return null;var e=qe.selectedIndex;"right"===t?(qe.direction="right",e=qe.getPreviousIndex(e)):(qe.direction="left",e=qe.getNextIndex(e)),qe.selectedIndex=e,qe.updateContent(qe.selectedIndex,qe.direction)},qe.handlePageLeave=function(){qe.removeEvents()},qe.insertTeaser=function(t,e){var n=jQuery(qe.oDefaults.sSelectorTeaserContainer);n.addClass("nm-slide-animation-start-"+e);var i=qe.getTemplateByIndex(t),r=jQuery(i),o=jQuery(qe.oDefaults.sPreconfsSlide).height()+"px";r.appendTo(n);var a=r.height()+"px",s="-"+.5*n.width()+"px";qe.isAnimating=!0,"left"===e?n.css("height",o).animate({"margin-left":s,height:a},500,"easeOutSine",qe.animationEnded):n.css("margin-left",s).animate({"margin-left":0,height:a},500,"easeOutSine",qe.animationEnded)},qe.animationEnded=function(){$(this).removeClass(["nm-slide-animation-start-",qe.direction].join("")).removeAttr("style").find(qe.oDefaults.sPreconfsSlide).first().remove(),qe.isAnimating=!1},qe.updateButtonLabel=function(){l.a.hasCustomConfiguration()?$(qe.oDefaults.sSelectorTeaserContainer).addClass(qe.oDefaults.sButtonConfigurationClass):$(qe.oDefaults.sSelectorTeaserContainer).removeClass(qe.oDefaults.sButtonConfigurationClass)},qe.updateSelection=function(t){var e=qe.$preconfsTeaserContainer.find(qe.oDefaults.sSelectorDotsNavi).find(qe.oDefaults.sDotsSelectorDelegateClick);e.removeClass(qe.oDefaults.sMenuSelectedClass),jQuery(e[t]).addClass(qe.oDefaults.sMenuSelectedClass)},qe.getTemplateByIndex=function(t){var e=jQuery(["#",qe.oDefaults.sSelectorTeaserTemplates,t].join("")).html()||"";return e=e.trim()},qe.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},qe.addEvents=function(){qe.eventBus.on(r.appEvents.PAGE_LOADED,qe.handlePageLoaded),qe.eventBus.on(r.appEvents.PAGE_LEAVE,qe.handlePageLeave),qe.eventBus.on(r.appEvents.LAYER_LOADED,qe.handlePageLoaded)},We.initialize=function(t){qe.eventBus=t,qe.addEvents(),qe.handlePageLoaded()};const Ge='<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n\t{{=window.i18n[\'recommendations-layer.your-recommendations-for\']}}\n</h2>\n<p class="nm-el-pg nm-el-pg-03">\n\t{{=window.i18n[\'recommendations-layer.message\']}}\n</p>\n{{~it.recommendations :value :index}}\n<div class="nm-recommendation-container nm-recommendation-{{=index+1}}">\n\t<div class="nm-module nm-md-recommendations">\n\t\t<strong class="nm-el-hdl nm-el-hdl-04">\n\t\t\t{{=window.i18n[\'recommendations-layer.recommendation-index\']}} {{=index+1}}\n\t\t</strong>\n\t\t<p class="nm-recommendation-title nm-el-pg nm-el-pg-03">\n\t\t\t{{=value.explanation}}\n\t\t</p>\n\t\t{{~value.recommendation :r}}\n\t\t<div class="nm-module nm-md-teaser-equipment nm-md-teaser clearfix nm-j-configurator-item nm-j-configurator-status_{{=r.status}}"\n\t\tdata-configurator-id="{{=r.id}}">\n\t\t\t<div class="nm-md-teaser-img">\n\t\t\t\t<img src="{{=r.image}}" alt="" />\n\t\t\t</div>\n\t\t\t<div class="nm-md-teaser-copy">\n\t\t\t\t<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n\t\t\t\t\t{{=r.name}}\n\t\t\t\t</strong>\n\t\t\t\t<div class="nm-info-wrap">\n\t\t\t\t\t<a class="nm-info nm-image-replace nm-layerLink" href="{{=r.url}}">{{=window.i18n[\'more-information\']}}</a>\n\t\t\t\t</div>\n\t\t\t\t<span class="nm-price nm-el-hdl nm-el-hdl-04">\n\t\t\t\t\t{{=r.price}}\n\t\t\t\t</span>\n\t\t\t\t<div class="nm-el-pg nm-el-pg-02">\n\t\t\t\t\t{{=r.description || "No descriptive text found"}}\n\t\t\t\t</div>\n\t\t\t\t<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n\t\t\t\t    <span class="nm-at-btn-state01">{{=window.i18n[\'configuration.add-item\']}}</span>\n\t\t\t\t    <span class="nm-at-btn-state02">{{=window.i18n[\'configuration.item-included\']}}</span>\n\t\t\t\t    <span class="nm-at-btn-state03">{{=window.i18n[\'configuration.remove-item\']}}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t\t{{~}} {{? 0 !== value.chosen.length}}\n\t\t<p class="nm-el-pg nm-el-pg-03 nm-at-pg-b">\n\t\t\t{{=window.i18n[\'recommendations-layer.explanation\']}}:\n\t\t</p>\n\t\t{{~value.chosen :c}}\n\t\t<ul class="nm-options-list">\n\t\t\t<li class="clearfix">\n\t\t\t\t<div class="nm-options-cell-additional">\n\t\t\t\t\t<div class="nm-list-item-text nm-el-pg nm-el-pg-04">\n\t\t\t\t\t\t{{=c.name}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="nm-info-wrap">\n\t\t\t\t\t<a class="nm-info nm-layerLink" href="{{=c.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n\t\t\t\t</div>\n\t\t\t\t<div class="nm-price nm-el-pg nm-el-pg-04 clearfix">\n\t\t\t\t\t<span class="nm-price">\n\t\t\t\t\t\t{{=c.price}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t\t{{~}} {{?}}\n\t</div>\n</div>\n{{~}}',Ye={},$e={__:Ye};Ye.oDefaults={sSelectorTemplateClass:".nm-recommendation",sSelectorTabClass:".nm-j-link-recommendations"},Ye.tplFunc=null,Ye.tplFuncNoRecs=function(){return""},Ye.getTplString=function(t){var e=$(t);return e.length>0?e.html():""},Ye.showTab=function(){jQuery("body").addClass("nm-has-recommendations")},Ye.hideTab=function(){jQuery("body").removeClass("nm-has-recommendations")},Ye.tabAvailable=function(){return jQuery(Ye.oDefaults.sSelectorTabClass).length>0},Ye.containerAvailable=function(){return jQuery(Ye.oDefaults.sSelectorTemplateClass).length>0},Ye.initialize=function(){Ye.addEvents()},Ye.dispose=function(){Ye.disposeEvents()},Ye.parse=function(t){var e,n=l.a.getItems()||{},i={recommendations:[]},r=JSON.parse(JSON.stringify(t)),o={};return jQuery.each(n,(function(t,e){o[e.mbvId]=e})),e=[],jQuery.each(r,(function(t,i){if(null===i)return!1;i.recommendation=jQuery.map(i.recommendation,(function(t){return!!o[t.id]?o[t.id]:l.a.getItem(t.id)})),i.chosen=jQuery.map(i.chosen,(function(t){return!!o[t.id]?o[t.id]:n[t.id]})),e.push(i)})),jQuery.each(e,(function(t,e){Array.prototype.push.call(i.recommendations,e)})),i.recommendations=e,i.carlineName=l.a.getCarlineName(),i},Ye.render=function(){var t=l.a.getRecommendations(),e=Ye.parse(t),n=s.template.render(Ge,e);n=n.replace("{{=it.carlineName}}",e.carlineName.toUpperCase()),jQuery(Ye.oDefaults.sSelectorTemplateClass).html(n)},Ye.renderNoRecommendations=function(){var t=l.a.getConfiguration(),e=s.template.render(Ge,t);e=e.replace("{{=it.carlineName}}",(l.a.getCarline()||"").toUpperCase()),jQuery(Ye.oDefaults.sSelectorTemplateClass).html(e),jQuery(Ye.oDefaults.sSelectorTemplateClass).html(Ye.tplFuncNoRecs(t))},Ye.addEvents=function(){Ye.eventBus.on(r.appEvents.CONFIG_UPDATE,Ye.handleConfigUpdate),Ye.eventBus.on(r.appEvents.PAGE_LOADED,Ye.handlePageLoaded),Ye.eventBus.on(r.appEvents.PAGE_LOADED,Ye.handleLayerLoaded),Ye.eventBus.on(r.appEvents.LAYER_LOADED,Ye.handleLayerLoaded),Ye.eventBus.on(r.appEvents.LAYER_CLOSED,Ye.handleLayerClosed)},Ye.disposeEvents=function(){Ye.eventBus.off(r.appEvents.CONFIG_UPDATE,Ye.handleConfigUpdate),Ye.eventBus.off(r.appEvents.PAGE_LOADED,Ye.handlePageLoaded),Ye.eventBus.off(r.appEvents.PAGE_LOADED,Ye.handleLayerLoaded),Ye.eventBus.off(r.appEvents.LAYER_LOADED,Ye.handleLayerLoaded),Ye.eventBus.off(r.appEvents.LAYER_CLOSED,Ye.handleLayerClosed)},Ye.recommendationsAvailable=function(){return l.a.isConfigurable()&&l.a.getRecommendations().length},Ye.updateView=function(){Ye.containerAvailable()||(Ye.recommendationsAvailable()?(Ye.showTab(),Ye.render()):Ye.hideTab())},Ye.handleConfigUpdate=function(){Ye.updateView()},Ye.handlePageLoaded=function(){Ye.updateView()},Ye.handleLayerClosed=function(){Ye.recommendationsAvailable()||Ye.hideTab()},Ye.handleLayerLoaded=function(){!Ye.recommendationsAvailable()&&Ye.containerAvailable()?(Ye.showTab(),Ye.renderNoRecommendations()):Ye.recommendationsAvailable()&&Ye.containerAvailable()?(Ye.showTab(),Ye.render()):Ye.recommendationsAvailable()&&Ye.tabAvailable()&&Ye.showTab()},$e.initialize=function(t){Ye.eventBus=t,Ye.initialize()};const Ke={},Xe={__:Ke,initialized:!1};Ke.activeImageSrc=!1,Ke.interiorImages=[],Ke.exteriorImages=[],Ke.exteriorOpenImages=[],Ke.min360ImgCount=6,Ke.oDefaults={sClassActive:"nm-active",sClassNoThumbnailAnimation:"nm-no-animation",sClassAnimate:"nm-animate",sClassCabrioOpen:"nm-cabrio-open",sClassSelectorClosed:"nm-icon-expand-white",sClassSelectorOpen:"nm-icon-collapse-white",sClassItemExterior:"nm-js-exterior",sClassItemExteriorOpen:"nm-js-exterior-open",sClassItemInterior:"nm-js-interior",sAttrDisplayedRenderingView:"data-renderimage-view",sIdToggleExterior:"nm-renderinglayer-exteriortoggle",sIdToggleExteriorOpen:"nm-renderinglayer-exterioropentoggle",sIdToggleInterior:"nm-renderinglayer-interiortoggle",sSelectorColorItems:"#nm-renderinglayer-extcolor-selection-color li",sSelectorOpenButton:".nm-renderinglayer-open",sSelectorRenderingLayerOuter:".nm-layer-renderinglayer",sSelectorRenderingLayer:".nm-renderinglayer",sSelectorItemExterior:".nm-js-exterior",sSelectorItemExteriorOpen:".nm-js-exterior-open",sSelectorItemInterior:".nm-js-interior",sSelectorDisplayedRenderingImage:".nm-basket-image .nm-j-configurator-renderimage",sSelectorRenderingCounterCurrent:".nm-renderingcounter-current",sSelectorRenderingCounterTotal:".nm-renderingcounter-total",sSelectorBack:".nm-renderinglayer .nm-backarrow",sSelectorNext:".nm-renderinglayer .nm-nextarrow",sSelectorStageImage:".nm-renderinglayer-image",sSelectorStageImages:".nm-renderinglayer-stageimages",sSelectorActiveStageImageWrapper:".nm-renderinglayer-imagewrapper.nm-active",sSelectorFirstStageImageWrapper:".nm-renderinglayer-imagewrapper:first-child",sSelectorActiveStageImage:".nm-renderinglayer-imagewrapper.nm-active .nm-renderinglayer-image",sSelectorThumbnailArea:".nm-renderinglayer-thumbnails",sSelectorThumbnail:".nm-renderinglayer-item .nm-rl-placeholder",sSelectorPlusButton:".nm-renderinglayer-item .nm-icon-plus",sSelectorThumbnailActive:".nm-renderinglayer-item .nm-rl-placeholder.nm-active",sSelectorColorSelector:".nm-render-color-selector",sSelectorColorSelectorWrapper:".nm-render-color-selector-wrapper",sSelectorOptionsSelector:".nm-render-animation-selector",sSelectorCurrentColorIndicator:".selector-current-selected .nm-render-active-color"},Ke.isInteriorActive=function(t){var e=!1;return 0!==t.indexOf("interior")&&0!==t.indexOf("dashboard")&&0!==t.indexOf("rearseat")||(e=!0),e},Ke.isOpenActive=function(t){var e=!1;return t.indexOf("_open")>0&&(e=!0),e},Ke.getActiveImageSrc=function(t){t.interiorActive&&Ke.interiorImages.length>0?Ke.activeImageSrc=Ke.interiorImages[0].image:t.open&&Ke.exteriorOpenImages.length>0?Ke.activeImageSrc=Ke.exteriorOpenImages[0].image:Ke.exteriorImages.length>0?Ke.activeImageSrc=Ke.exteriorImages[0].image:Ke.activeImageSrc=""},Ke.getConfigurationAssets=function(){var t=l.a.getConfigurationAssets();(!t||Object.keys(t).length<=0)&&(t=SETUPS.get("nemo.default.data").configuration.assets),Ke.generateRenderingLayerInnerHtml(t),Ke.initListeners()},Ke.pollConfigurationAssets=function(){jQuery(Ke.oDefaults.sSelectorRenderingLayer).length>0?console.log("RL: abort poll request"):Ke.getConfigurationAssets()},Ke.parseRenderImageTypeFromHash=function(t){var e,n,i;return!!t&&(n=/(renderingLayer)(\.(\S)+)?/,(i=t.match(n))&&(e=2===(i=(i=i[0].split("&")[0]).split(".")).length&&i[1]),e)},Ke.setAllowedItems=function(t){var e,n=SETUPS.get("nemo.hiddenAssets")?SETUPS.get("nemo.hiddenAssets").replace(/"/g,""):"";for(e in Ke.activeRenderings=[],n=n.length>0?n.split(","):[],console.log("hiddenAssets: "+n),t)e&&-1===n.indexOf(e)&&Ke.activeRenderings.push(e)},Ke.generateRenderingLayerInnerHtml=function(t){var e=l.a.getCarline(),n=l.a.getExtColor(),i=l.a.getConfiguration(),r=Ke.parseRenderImageTypeFromHash(window.location.hash),o={};r||(r=jQuery(Ke.oDefaults.sSelectorDisplayedRenderingImage).attr(Ke.oDefaults.sAttrDisplayedRenderingView)),Ke.setAllowedItems(t),-1===Ke.activeRenderings.indexOf(r)&&(r="exterior_front"),o.interiorActive=Ke.isInteriorActive(r),o.open=Ke.isOpenActive(r),Ke.preloadImages=["exterior_straight_front","exterior_front","exterior","exterior_back","exterior_straight_back"],Ke.preloadImagesOpen=["exterior_straight_front_open","exterior_front_open","exterior_open","exterior_back_open","exterior_straight_back_open"],Ke.exteriorImages=Ke.extractAssets(e,t,r,"exterior"),Ke.exteriorImages=Ke.exteriorImages.concat(Ke.extractAssets(e,t,r,"closeup")),Ke.exteriorOpenImages=Ke.extractAssets(e,t,r,"exterior_open"),Ke.exteriorOpenImages=Ke.exteriorOpenImages.concat(Ke.extractAssets(e,t,r,"closeup_open")),o.openavailable=Ke.exteriorOpenImages.length>0,Ke.interiorImages=Ke.extractAssets(e,t,r,"interior"),Ke.interiorImages=Ke.interiorImages.concat(Ke.extractAssets(e,t,r,"dashboard")),Ke.interiorImages=Ke.interiorImages.concat(Ke.extractAssets(e,t,r,"rearseat")),Ke.activeImageSrc||Ke.getActiveImageSrc(o),r||(r="exterior_front"),o.exterior=Ke.exteriorImages,o.exterior_open=Ke.exteriorOpenImages,o.interior=Ke.interiorImages,o.active_image_src=Ke.activeImageSrc,o.currentRenderingView=r,o.config=i,o.activeColor=n;var a=s.template.render('\n\t<div class="nm-layer-toolbar">\n\t\t<div class="nm-renderingcounter">\n\t\t\t&nbsp;<span class="nm-renderingcounter-current">01</span>|\n\t\t\t<span class="nm-renderingcounter-total">--</span>&nbsp;\n\t\t</div>\n\t\t<div class="nm-layer__close-button nm-j-layer-close-button">\n\t\t\t<svg class="nm-layer__close-button-icon">\n\t\t\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/cancel-newci-large.svg#audi-icon-cancel-newci-large"}}></use>\n\t\t\t</svg>\n\t\t</div>\n\t</div>\n\t<div class="nm-layer-inner nm-renderinglayer-wrapper">\n\t\t<div class="nm-renderinglayer {{? it.open }} nm-cabrio-open{{ } }}" style="{{?it.native_width!=undefined}} width: {{=it.native_width}}px{{?}}">\n\t\t\t<input type="radio" id="nm-renderinglayer-exteriortoggle" name="nm-renderinglayer-toggle-radio" value="exterior" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}{{?? it.open }}{{??}}checked{{?}} >\n\t\t\t<input type="radio" id="nm-renderinglayer-exterioropentoggle" name="nm-renderinglayer-toggle-radio" value="exterioropen" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}{{?? it.open }}checked{{??}}{{?}} >\n\t\t\t<input type="radio" id="nm-renderinglayer-interiortoggle" name="nm-renderinglayer-toggle-radio" value="interior" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}checked{{?? it.open }}{{??}}{{?}} >\n\t\t\t\x3c!--\n\t\t\t<input type="checkbox" id="nm-renderinglayer-opentoggle" name="nm-rl-toggle-open" class="nm-rl-toggle-open" {{? it.open}}checked{{?}} >\n\t\t--\x3e\n\t\t\t<div class="nm-renderinglayer-stagewrapper {{? it.openavailable}} openavailable {{ }Â }}">\n\t\t\t\t<ul class="nm-renderinglayer-stagebrowse">\n\t\t\t\t\t<li class="nm-backarrow"><a href="" class="nm-b-icon nm-icon-back-arrow-l"></a></li>\n\t\t\t\t\t<li class="nm-nextarrow"><a href="" class="nm-b-icon nm-icon-next-arrow-l"></a></li>\n\t\t\t\t</ul>\n\t\t\t\t<a href="" class="nm-renderinglayer-open nm-el-btn nm-el-btn-01">{{? it.open}}{{=window.i18n[\'rendering-layer.cabrio-close\']}}{{??}}{{=window.i18n[\'rendering-layer.cabrio-open\']}}{{?}}</a>\n\n\t \t\t\t<div class="nm-renderinglayer-stage">\n\t \t\t\t\t<ul class="nm-renderinglayer-stageimages">{{~ it.exterior :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-view="{{=value.name}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}{{~ it.exterior_open :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}{{~ it.interior :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}</ul>\n\t \t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="nm-renderinglayer-thumbnails clearfix">\n\t\t\t\t<ul class="nm-renderinglayer-thumbs">\n{{~ it.exterior :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-toggle-exterior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n\t\t\t\t\t\t\t<label for="nm-renderinglayer-exteriortoggle" class="nm-renderinglayer-expander"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-item-exterior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n\t{{?}}\n\t\t\t\t\t</li>\n{{~}}\n{{~ it.exterior_open :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-toggle-exterior-open">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior-open {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n\t\t\t\t\t\t\t<label for="nm-renderinglayer-exterioropentoggle" class="nm-renderinglayer-expander"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-rl-item-exterior-open">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-exterior-open {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n\t{{?}}\n\t\t\t\t\t</li>\n{{~}}\n{{~ it.interior :value:i }}\n\t{{? i == 0}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-js-toggle nm-rl-toggle-interior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-interior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n\t\t\t\t\t\t\t<label for="nm-renderinglayer-interiortoggle" class="nm-renderinglayer-expander"></label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n\t{{??}}\n\t\t\t\t\t<li class="nm-renderinglayer-item nm-js-item nm-rl-item-interior">\n\t\t\t\t\t\t<div class="nm-rl-placeholder nm-js-interior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n\t\t\t\t\t\t<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n\t{{?}}\n\t\t\t\t\t</li>\n{{~}}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>',o);jQuery(Ke.oDefaults.sSelectorRenderingLayerOuter).html(a)},Ke.generateRenderingLayerHtml=function(){var t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e="";return 975>t&&(e=' style="width: '+t*(1400/975)+'px;"'),'<div class="nm-layer-wrapper nm-layer-wrapper-renderinglayer"><div class="nm-layer-renderinglayer nm-j-jslayer nm-layer"'+e+"></div></div>"},Ke.addEvents=function(){r.clientLayer.register("renderingLayer",Ke.generateRenderingLayerHtml),Ke.eventBus.on(r.appEvents.LAYER_LOADED,Ke.handler),Xe.initialized=!0},Xe.dispose=function(){Ke.eventBus.off(r.appEvents.LAYER_LOADED,Ke.handler)},Xe.disableFor3D=function(){jQuery(Ke.oDefaults.sSelectorOpenButton).off("click",Ke.handlerOpenToggle),jQuery(Ke.oDefaults.sSelectorBack).off("click",Ke.handlerBackClick),jQuery(Ke.oDefaults.sSelectorNext).off("click",Ke.handlerNextClick),jQuery(Ke.oDefaults.sSelectorThumbnail).off("click",Ke.handlerThumbnailClick),jQuery(Ke.oDefaults.sSelectorStageImage).off("mousedown",Ke.activateSwipe),jQuery(Ke.oDefaults.sSelectorStageImage).off("touchstart",Ke.activateSwipe)},Ke.handler=function(){jQuery(Ke.oDefaults.sSelectorRenderingLayerOuter).length>0&&Ke.pollConfigurationAssets()},Ke.initListeners=function(){Ke.interiorToggle=document.getElementById(Ke.oDefaults.sIdToggleInterior),Ke.exteriorOpenToggle=document.getElementById(Ke.oDefaults.sIdToggleExteriorOpen),Ke.exteriorToggle=document.getElementById(Ke.oDefaults.sIdToggleExterior),jQuery(Ke.oDefaults.sSelectorOpenButton).off("click",Ke.handlerOpenToggle),jQuery(Ke.oDefaults.sSelectorBack).off("click",Ke.handlerBackClick),jQuery(Ke.oDefaults.sSelectorNext).off("click",Ke.handlerNextClick),jQuery(Ke.oDefaults.sSelectorThumbnail).off("click",Ke.handlerThumbnailClick),jQuery(Ke.oDefaults.sSelectorPlusButton).off("click",Ke.handlerPlusButtonClick),""===jQuery(Ke.oDefaults.sSelectorStageImage).first().attr("src")&&Ke.pollConfigurationAssets(),Ke.updateCounter(),jQuery(Ke.oDefaults.sSelectorOpenButton).on("click",Ke.handlerOpenToggle),jQuery(Ke.oDefaults.sSelectorBack).on("click",Ke.handlerBackClick),jQuery(Ke.oDefaults.sSelectorNext).on("click",Ke.handlerNextClick),jQuery(Ke.oDefaults.sSelectorThumbnail).on("click",Ke.handlerThumbnailClick),jQuery(Ke.oDefaults.sSelectorPlusButton).on("click",Ke.handlerPlusButtonClick),Ke.exteriorOpenToggle&&Ke.exteriorOpenToggle.checked&&Ke.preloadDefinedImages(Ke.preloadImagesOpen,"exterior_open"),Ke.exteriorToggle&&Ke.exteriorToggle.checked&&Ke.preloadDefinedImages(Ke.preloadImages,"exterior"),Ke.activateSwipeOrDrag(),jQuery(window).on("resize",Ke.resizeLayer),Ke.resizeLayer(),Ke.eventBus.emit(r.appEvents.RENDERINGLAYER_LOADED)},Ke.determineImageObjectsForArea=function(t){return"interior"===t?Ke.interiorImages:"exterior_open"===t?Ke.exteriorOpenImages:Ke.exteriorImages},Ke.preloadDefinedImages=function(t,e){var n,i,r=Ke.determineImageObjectsForArea(e);for(n=0,i=r.length;n<i;n++)t.indexOf(r[n].name)>=0&&((new Image).src=r[n].image)},Ke.activateSwipeOrDrag=function(){var t,e=document.getElementById(Ke.oDefaults.sIdToggleExterior),n=document.getElementById(Ke.oDefaults.sIdToggleExteriorOpen);jQuery(Ke.oDefaults.sSelectorStageImage).off("mousedown",Ke.activateSwipe),jQuery(Ke.oDefaults.sSelectorStageImage).off("touchstart",Ke.activateSwipe),jQuery(Ke.oDefaults.sSelectorStageImage).off("mousedown",Ke.activateDrag),jQuery(Ke.oDefaults.sSelectorStageImage).off("touchstart",Ke.activateDrag),jQuery(document).off("mouseup",Ke.deactivateDrag),jQuery(document).off("touchend",Ke.deactivateDrag),jQuery(document).off("mouseup",Ke.deactivateSwipe),jQuery(document).off("touchend",Ke.deactivateSwipe),t=n&&n.checked?jQuery(Ke.oDefaults.sSelectorItemExteriorOpen).length:jQuery(Ke.oDefaults.sSelectorItemExterior).length,(e&&e.checked||n&&n.checked)&&t>=Ke.min360ImgCount?(jQuery(Ke.oDefaults.sSelectorStageImage).on("mousedown",Ke.activateDrag),jQuery(Ke.oDefaults.sSelectorStageImage).on("touchstart",Ke.activateDrag),jQuery(document).on("mouseup",Ke.deactivateDrag),jQuery(document).on("touchend",Ke.deactivateDrag)):(jQuery(Ke.oDefaults.sSelectorStageImage).on("mousedown",Ke.activateSwipe),jQuery(Ke.oDefaults.sSelectorStageImage).on("touchstart",Ke.activateSwipe),jQuery(document).on("mouseup",Ke.deactivateSwipe),jQuery(document).on("touchend",Ke.deactivateSwipe))},Ke.getViewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},Ke.getViewportWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},Ke.fitToWidth=function(t,e,n,i){1400>t&&(i*e<=n?jQuery(Ke.oDefaults.sSelectorRenderingLayerOuter).outerWidth(i*e):jQuery(Ke.oDefaults.sSelectorRenderingLayerOuter).outerWidth(n))},Ke.resizeLayer=function(){var t=Ke.getViewportHeight(),e=jQuery(Ke.oDefaults.sSelectorRenderingLayerOuter).outerHeight(),n=jQuery(Ke.oDefaults.sSelectorRenderingLayerOuter).outerWidth(),i=n/e,o=Ke.getViewportWidth();e>t?jQuery(Ke.oDefaults.sSelectorRenderingLayerOuter).outerWidth(t*i):Ke.fitToWidth(n,i,o,t),Ke.eventBus.emit(r.appEvents.RENDERINGLAYER_RESIZED)},Ke.calculateTotalItems=function(){var t=document.getElementById(Ke.oDefaults.sIdToggleExteriorOpen),e=document.getElementById(Ke.oDefaults.sIdToggleInterior);return e&&e.checked?jQuery(Ke.oDefaults.sSelectorItemInterior).length:t&&t.checked?jQuery(Ke.oDefaults.sSelectorItemExteriorOpen).length:jQuery(Ke.oDefaults.sSelectorItemExterior).length},Ke.calculateCurrentItem=function(t){var e=document.getElementById(Ke.oDefaults.sIdToggleExteriorOpen),n=document.getElementById(Ke.oDefaults.sIdToggleInterior);return n&&n.checked?Ke.calculateCurrentPosition(Ke.oDefaults.sSelectorItemInterior,t):e&&e.checked?Ke.calculateCurrentPosition(Ke.oDefaults.sSelectorItemExteriorOpen,t):Ke.calculateCurrentPosition(Ke.oDefaults.sSelectorItemExterior,t)},Ke.updateCounter=function(){var t=Ke.calculateTotalItems(),e=Ke.calculateCurrentItem(t);void 0!==t&&(t=t<10?"0"+t:t,e=e<10?"0"+e:e,jQuery(Ke.oDefaults.sSelectorRenderingCounterTotal).html(t),jQuery(Ke.oDefaults.sSelectorRenderingCounterCurrent).html(e))},Ke.calculateCurrentPosition=function(t,e){var n,i=jQuery(t);for(n=0;n<e;n++)if(i.eq(n).hasClass(Ke.oDefaults.sClassActive))return n+1},Ke.activateDrag=function(t){jQuery(Ke.oDefaults.sSelectorStageImages).hasClass(Ke.oDefaults.sClassAnimate)||("touchstart"===t.type?Ke.swipeX=t.originalEvent.pageX:Ke.swipeX=t.pageX,jQuery(document).on("mousemove",Ke.drag),jQuery(document).on("touchmove",Ke.drag))},Ke.deactivateDrag=function(){var t=jQuery(Ke.oDefaults.sSelectorActiveStageImage).attr("data-renderimage-view");jQuery(document).off("mousemove",Ke.drag),jQuery(document).off("touchmove",Ke.drag),jQuery(Ke.oDefaults.sSelectorThumbnail).removeClass(Ke.oDefaults.sClassActive),jQuery(Ke.oDefaults.sSelectorThumbnail+"."+t).addClass(Ke.oDefaults.sClassActive)},Ke.activateSwipe=function(t){"touchstart"===t.type?Ke.swipeX=t.originalEvent.pageX:Ke.swipeX=t.pageX,jQuery(document).on("mousemove",Ke.swipe),jQuery(document).on("touchmove",Ke.swipe)},Ke.deactivateSwipe=function(){jQuery(document).off("mousemove",Ke.swipe),jQuery(document).off("touchmove",Ke.swipe)},Ke.retrieveCurrentPos=function(t){return"touchmove"===t.type?t.originalEvent.pageX:t.pageX},Ke.doLeftDragAction=function(t){t.removeClass(Ke.oDefaults.sClassActive),t.prev().attr("data-view")&&t.prev().attr("data-view").indexOf("exterior")>=0?t.prev().addClass(Ke.oDefaults.sClassActive):t.prev().prev().addClass(Ke.oDefaults.sClassActive)},Ke.doRightDragAction=function(t){t.next().length>0&&t.next().attr("data-view")&&t.next().attr("data-view").indexOf("exterior")>=0?(t.removeClass(Ke.oDefaults.sClassActive),t.next().addClass(Ke.oDefaults.sClassActive)):t.attr("data-view")&&t.attr("data-view").indexOf("closeup")>=0&&(t.removeClass(Ke.oDefaults.sClassActive),jQuery(Ke.oDefaults.sSelectorFirstStageImageWrapper).addClass(Ke.oDefaults.sClassActive))},Ke.doDragAction=function(t,e){var n=jQuery(Ke.oDefaults.sSelectorActiveStageImageWrapper);e&&n.prev().length>0?Ke.doLeftDragAction(n):t&&Ke.doRightDragAction(n)},Ke.drag=function(t){var e=!1,n=!1,i=!1,r=Ke.retrieveCurrentPos(t);r>=Ke.swipeX+55?(e=!0,n=!0,Ke.swipeX+=55):r<=Ke.swipeX-55&&(e=!0,i=!0,Ke.swipeX-=55),e&&Ke.doDragAction(i,n)},Ke.getEventPos=function(t){return"touchmove"===t.type?t.originalEvent.pageX:t.pageX},Ke.swipe=function(t){var e=Ke.getEventPos(t);e>=Ke.swipeX+5?(Ke.deactivateSwipe(t),Ke.handlerBackClick(t)):e<=Ke.swipeX-5&&(Ke.deactivateSwipe(t),Ke.handlerNextClick(t))},Ke.determineCarlineFallbackGroup=function(t){var e=t.charAt(0);return 0!==t.indexOf("rs")&&0!==t.indexOf("s")||(e="a"),0===t.indexOf("tt")&&(e="r"),e},Ke.getFallbackThumb=function(t,e){var n=window.location.href.split("/");return n[2].indexOf("audi.local")>=0?n[0]+"//"+n[2]+"/cms4i-nemo/fallback-renderings/"+t+"-thumbnail-"+e+".jpg":n[0]+"//"+n[2]+SETUPS.get("nemo.url.static")+"/cms4i-nemo/fallback-renderings/"+t+"-thumbnail-"+e+".jpg"},Ke.getFallbackImg=function(t,e){var n=window.location.href.split("/");return n[2].indexOf("audi.local")>=0?n[0]+"//"+n[2]+"/cms4i-nemo/fallback-renderings/"+t+"-fullscreen-"+e+".jpg":n[0]+"//"+n[2]+SETUPS.get("nemo.url.static")+"/cms4i-nemo/fallback-renderings/"+t+"-fullscreen-"+e+".jpg"},Ke.getRenderImageType=function(t,e){var n="thumbnail";return t[e].hasOwnProperty("thumbnail.16-9")?n="thumbnail.16-9":t[e].hasOwnProperty("thumbnail.new")&&(n="thumbnail.new"),n},Ke.getThumbnail=function(t,e,n,i){var r=t[e][i];return void 0!==r&&(r=-1===r.indexOf("?")?"http://mediaservice.audi.com/media"+r+"?alt="+n:"http://mediaservice.audi.com/media"+r),r},Ke.getFullImg=function(t,e,n){let i;return t&&e&&t.hasOwnProperty(e)&&t[e]?(i=t[e].hasOwnProperty("fullscreen.new")?t[e]["fullscreen.new"]:t[e].fullscreen||"",i?(i="http://mediaservice.audi.com/media"+i,i&&-1===i.indexOf("?")&&(i+="?alt="+n),i):null):""},Ke.checkForActiveImage=function(t,e,n){t===e&&(Ke.activeImageSrc=n)},Ke.compliesWithCondition=function(t,e,n,i){var r=!1;return 0===e.indexOf(n)&&t.hasOwnProperty(e)&&Ke.activeRenderings.indexOf(e)>=0&&(i&&e.indexOf("_open")>0||!i&&e.indexOf("_open")<0)&&(r=!0),r},Ke.determineAssetType=function(t){return t.indexOf("_open")>0?t.substring(0,t.indexOf("_open")):t},Ke.isOpen=function(t){var e=!1;return t.indexOf("_open")>=0&&(e=!0),e},Ke.extractAssets=function(t,e,n,i){var r,o,a,s,l,c,u=[],d=Ke.determineCarlineFallbackGroup(t),m=Ke.determineAssetType(i),g=Ke.isOpen(i);for(c in e)e[c]&&Ke.compliesWithCondition(e,c,m,g)&&(s=Ke.getFallbackThumb(d,c),a=Ke.getFallbackImg(d,c),l=Ke.getRenderImageType(e,c),o=Ke.getThumbnail(e,c,s,l),(r=Ke.getFullImg(e,c,a))&&(Ke.checkForActiveImage(c,n,r),u.push({name:c,image:r,thumbnail:o,type:l})));return Ke.sortThumbs(m,g,u)},Ke.customArraySort=function(t,e){var n=["exterior_straight_front","exterior_front","exterior","exterior_back","exterior_straight_back","closeup_lights","closeup_wheels","interior","dashboard","rearseat"];return e&&(n=["exterior_straight_front_open","exterior_front_open","exterior_open","exterior_back_open","exterior_straight_back_open","closeup_lights_open","closeup_wheels_open","interior","dashboard","rearseat"]),function(e,i){return n.indexOf(e[t])<n.indexOf(i[t])?-1:1}},Ke.sortThumbs=function(t,e,n){return n.sort(Ke.customArraySort("name",e))},Ke.toggleCheckAndPreload=function(){Ke.exteriorOpenToggle.checked?(Ke.exteriorToggle.checked=!0,Ke.preloadDefinedImages(Ke.preloadImages,"exterior")):(Ke.exteriorOpenToggle.checked=!0,Ke.preloadDefinedImages(Ke.preloadImagesOpen,"exterior_open"))},Ke.setDefaultActiveThumbnail=function(){jQuery(Ke.oDefaults.sSelectorRenderingLayer).hasClass(Ke.oDefaults.sClassCabrioOpen)?jQuery(Ke.oDefaults.sSelectorItemExteriorOpen).first().addClass(Ke.oDefaults.sClassActive):jQuery(Ke.oDefaults.sSelectorItemExterior).first().addClass(Ke.oDefaults.sClassActive)},Ke.retrieveCorrespondingCabrioKey=function(t){return t.indexOf("_open")>0?t.substring(0,t.indexOf("_open")):t+"_open"},Ke.handlerOpenToggle=function(t){var e,n,i=jQuery(Ke.oDefaults.sSelectorThumbnailActive),r=i.attr("data-key");t.preventDefault(),jQuery(Ke.oDefaults.sSelectorThumbnailArea).addClass(Ke.oDefaults.sClassNoThumbnailAnimation),Ke.toggleCheckAndPreload(),setTimeout((function(){jQuery(Ke.oDefaults.sSelectorThumbnailArea).removeClass(Ke.oDefaults.sClassNoThumbnailAnimation)}),50),0===i.length&&Ke.setDefaultActiveThumbnail(),jQuery(Ke.oDefaults.sSelectorRenderingLayer).hasClass(Ke.oDefaults.sClassCabrioOpen)?(jQuery(Ke.oDefaults.sSelectorRenderingLayer).removeClass(Ke.oDefaults.sClassCabrioOpen),jQuery(Ke.oDefaults.sSelectorOpenButton).html(window.i18n["rendering-layer.cabrio-open"])):(jQuery(Ke.oDefaults.sSelectorRenderingLayer).addClass(Ke.oDefaults.sClassCabrioOpen),jQuery(Ke.oDefaults.sSelectorOpenButton).html(window.i18n["rendering-layer.cabrio-close"])),r&&(e=Ke.retrieveCorrespondingCabrioKey(r),n=jQuery("."+e),Ke.activateImage(n,!1,!1))},Xe.determinePrevFromActive=function(t){var e;return t.hasClass(Ke.oDefaults.sClassItemExterior)?e=jQuery(Ke.oDefaults.sSelectorThumbnailActive).parent().prev().children(Ke.oDefaults.sSelectorItemExterior).get(0):t.hasClass(Ke.oDefaults.sClassItemExteriorOpen)?e=jQuery(Ke.oDefaults.sSelectorThumbnailActive).parent().prev().children(Ke.oDefaults.sSelectorItemExteriorOpen).get(0):t.hasClass(Ke.oDefaults.sClassItemInterior)&&(e=jQuery(Ke.oDefaults.sSelectorThumbnailActive).parent().prev().children(Ke.oDefaults.sSelectorItemInterior).get(0)),e},Xe.determineDefaultPrev=function(){return Ke.interiorToggle.checked?jQuery(Ke.oDefaults.sSelectorItemInterior).last().get(0):Ke.exteriorOpenToggle&&Ke.exteriorOpenToggle.checked?jQuery(Ke.oDefaults.sSelectorItemExteriorOpen).last().get(0):jQuery(Ke.oDefaults.sSelectorItemExterior).last().get(0)},Ke.handlerBackClick=function(t){var e,n=jQuery(Ke.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=Xe.determinePrevFromActive(n)),void 0===e&&(e=Xe.determineDefaultPrev()),Ke.activateImage(e,!0,"prev")},Xe.determineNextFromActive=function(t){var e;return t.hasClass(Ke.oDefaults.sClassItemExterior)?e=jQuery(Ke.oDefaults.sSelectorThumbnailActive).parent().next().children(Ke.oDefaults.sSelectorItemExterior).get(0):t.hasClass(Ke.oDefaults.sClassItemExteriorOpen)?e=jQuery(Ke.oDefaults.sSelectorThumbnailActive).parent().next().children(Ke.oDefaults.sSelectorItemExteriorOpen).get(0):t.hasClass(Ke.oDefaults.sClassItemInterior)&&(e=jQuery(Ke.oDefaults.sSelectorThumbnailActive).parent().next().children(Ke.oDefaults.sSelectorItemInterior).get(0)),e},Xe.determineDefaultNext=function(){return Ke.interiorToggle.checked?jQuery(Ke.oDefaults.sSelectorItemInterior).first().get(0):Ke.exteriorOpenToggle&&Ke.exteriorOpenToggle.checked?jQuery(Ke.oDefaults.sSelectorItemExteriorOpen).first().get(0):jQuery(Ke.oDefaults.sSelectorItemExterior).first().get(0)},Ke.handlerNextClick=function(t){var e,n=jQuery(Ke.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=Xe.determineNextFromActive(n)),void 0===e&&(e=Xe.determineDefaultNext()),Ke.activateImage(e,!0,"next")},Ke.handlerThumbnailClick=function(){jQuery(this).hasClass(Ke.oDefaults.sClassActive)||Ke.activateImage(this,!0,!1)},Ke.handlerPlusButtonClick=function(t){var e=jQuery(this).parent().parent().find(".nm-rl-placeholder"),n=jQuery(this).parent().parent().find(".nm-renderinglayer-expander");t.preventDefault(),e.trigger("click"),n.trigger("click")},Ke.doStageAnimation=function(t){var e=jQuery(".ie8").length>0,n=jQuery(".ie9").length>0;e||n?jQuery(Ke.oDefaults.sSelectorStageImages).animate({left:t},500):jQuery(Ke.oDefaults.sSelectorStageImages).css("left",t)},Ke.determineAnimationDirection=function(t,e,n){var i=!1;return!1===e?n.parent().prevAll().find(t).length>0&&(i=!0):"prev"===e&&(i=!0),i},Ke.activateImage=function(t,e,n){var i=jQuery(Ke.oDefaults.sSelectorThumbnailActive),r=jQuery(t).attr("data-key"),o=jQuery(".nm-rendersource-"+r),a=jQuery(".nm-rendersource-"+i.attr("data-key")).closest(".nm-renderinglayer-imagewrapper"),s=o.closest(".nm-renderinglayer-imagewrapper"),l=!1;jQuery(Ke.oDefaults.sSelectorStageImages).hasClass(Ke.oDefaults.sClassAnimate)||(jQuery(Ke.oDefaults.sSelectorThumbnail).removeClass(Ke.oDefaults.sClassActive),jQuery(t).addClass(Ke.oDefaults.sClassActive),!0===e?((l=Ke.determineAnimationDirection(t,n,i))?(jQuery(Ke.oDefaults.sSelectorStageImages).css("left","-100%"),a.css("left","50%"),s.css("left","0")):(jQuery(Ke.oDefaults.sSelectorStageImages).css("left","0"),a.css("left","0"),s.css("left","50%")),s.addClass(Ke.oDefaults.sClassActive),setTimeout((function(){jQuery(Ke.oDefaults.sSelectorStageImages).addClass(Ke.oDefaults.sClassAnimate),l?Ke.doStageAnimation("0"):Ke.doStageAnimation("-100%"),setTimeout((function(){a.css("left","0"),a.removeClass(Ke.oDefaults.sClassActive),jQuery(Ke.oDefaults.sSelectorStageImages).css("left","0"),s.css("left","0"),Ke.activateSwipeOrDrag(),jQuery(Ke.oDefaults.sSelectorStageImages).removeClass(Ke.oDefaults.sClassAnimate)}),500)}),10)):(s.addClass(Ke.oDefaults.sClassActive),a.removeClass(Ke.oDefaults.sClassActive),Ke.activateSwipeOrDrag()),setTimeout((function(){Ke.updateCounter()}),50))},Xe.initialize=function(t){Ke.eventBus=t,Ke.addEvents()};const Je={},Ze={__:Je};Je.oDefaults={sIdCanvas:"avecanvas",sClassActive:"nm-active",sClassAVE:"ave-layer",sSelectorOptionsWrapper:".nm-ave-animation-selector-wrapper",sSelectorStageWrapper:".nm-renderinglayer-stagewrapper",sSelectorBack:".nm-renderinglayer .nm-backarrow",sSelectorNext:".nm-renderinglayer .nm-nextarrow",sSelectorOuterRenderingLayer:".nm-layer-renderinglayer",sSelectorRenderingLayer:".nm-layer-renderinglayer",sSelectorRenderingStageWrapper:".nm-renderinglayer-stagewrapper",sSelectorThumbnail:".nm-renderinglayer-item .nm-rl-placeholder",sSelectorThumbnailActive:".nm-renderinglayer-item .nm-rl-placeholder.nm-active",sSelectorAVEContainerActive:".nm-md-ave-container.nm-active",sSelectorActiveStageImageWrapper:".nm-renderinglayer-imagewrapper.nm-active"},Je.disableStreamReadyEvent=function(){Je.eventBus.off(r.appEvents.AVE_STREAM_READY,Xe.disableFor3D)},Je.handlerLayerClosed=function(){var t,e;jQuery(Je.oDefaults.sSelectorRenderingLayer).length>0&&jQuery(Je.oDefaults.sSelectorRenderingLayer).first().hasClass(Je.oDefaults.sClassAVE)&&(jQuery(".nm-3d-unloading").length>0?(e=(t=jQuery(".nm-3d-unloading").prev()).attr("id"),Je.moveOptionsIntoCanvas(),k.moveAVE(Je.oDefaults.sIdCanvas,e),t.addClass(Je.oDefaults.sClassActive)):(k.deactivate(Je.oDefaults.sIdCanvas),jQuery(Je.oDefaults.sSelectorOptionsWrapper).remove()))},Je.handlerThumbnailClick=function(){jQuery(this).hasClass(Je.oDefaults.sClassActive)||Je.activateView(this)},Je.handlerBackClick=function(t){var e,n=jQuery(Je.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=Xe.determinePrevFromActive(n)),void 0===e&&(e=Xe.determineDefaultPrev()),Je.activateView(e)},Je.handlerNextClick=function(t){var e,n=jQuery(Je.oDefaults.sSelectorThumbnailActive);t.preventDefault(),n.length>0&&(e=Xe.determineNextFromActive(n)),void 0===e&&(e=Xe.determineDefaultNext()),Je.activateView(e)},Je.activateView=function(t){var e=jQuery(Je.oDefaults.sSelectorThumbnailActive).attr("data-key"),n=jQuery(t).attr("data-key");jQuery(Je.oDefaults.sSelectorThumbnail).removeClass(Je.oDefaults.sClassActive),jQuery(t).addClass(Je.oDefaults.sClassActive),n!==e&&k.showPerspective(n)},Je.captureAVEDrag=function(t){jQuery("body").off("click",".nm-layer-wrapper",r.layerApi.wrapperClickHandler),jQuery(".nm-layer-wrapper").off("mousedown",Je.handlerAVEWrapperClick),jQuery(".nm-layer-wrapper").on("mousedown",Je.handlerAVEWrapperClick),jQuery(".nm-layer-wrapper").off("touchstart",Je.handlerAVEWrapperClick),jQuery(".nm-layer-wrapper").on("touchstart",Je.handlerAVEWrapperClick)},Je.activateThumbListeners=function(){jQuery(Je.oDefaults.sSelectorThumbnail).on("click",Je.handlerThumbnailClick),jQuery(Je.oDefaults.sSelectorBack).on("click",Je.handlerBackClick),jQuery(Je.oDefaults.sSelectorNext).on("click",Je.handlerNextClick),jQuery("#"+Je.oDefaults.sIdCanvas).off("mousedown",Je.captureAVEDrag),jQuery("#"+Je.oDefaults.sIdCanvas).off("touchstart",Je.captureAVEDrag),jQuery("#"+Je.oDefaults.sIdCanvas).on("mousedown",Je.captureAVEDrag),jQuery("#"+Je.oDefaults.sIdCanvas).on("touchstart",Je.captureAVEDrag)},Je.handlerAVEWrapperClick=function(){jQuery("body").off("mousedown",".nm-layer-wrapper",r.layerApi.wrapperClickHandler),jQuery("body").on("mousedown",".nm-layer-wrapper",r.layerApi.wrapperClickHandler),jQuery("body").off("touchstart",".nm-layer-wrapper",r.layerApi.wrapperClickHandler),jQuery("body").on("touchstart",".nm-layer-wrapper",r.layerApi.wrapperClickHandler)},Je.moveOptionsOutOfCanvas=function(){jQuery(Je.oDefaults.sSelectorOptionsWrapper).prependTo(jQuery(Je.oDefaults.sSelectorStageWrapper))},Je.moveOptionsIntoCanvas=function(){jQuery(Je.oDefaults.sSelectorOptionsWrapper).prependTo(jQuery("#"+Je.oDefaults.sIdCanvas))},Je.retrieveActiveViewPerspective=function(){var t=jQuery(Je.oDefaults.sSelectorActiveStageImageWrapper);return t&&t.attr("data-view")?t.attr("data-view"):"exterior_front"},Je.prepareDomForAVE=function(){null===document.getElementById(Je.oDefaults.sIdCanvas)&&jQuery(Je.oDefaults.sSelectorRenderingStageWrapper).prepend('<div id="'+Je.oDefaults.sIdCanvas+'" class="nm-md-ave-container"></div>'),Je.eventBus.on(r.appEvents.AVE_STREAM_READY,Xe.disableFor3D),jQuery(Je.oDefaults.sSelectorOuterRenderingLayer).addClass(Je.oDefaults.sClassAVE)},Je.handlerInjectAVE=function(){var t=jQuery(Je.oDefaults.sSelectorAVEContainerActive);k.isAveAvailable()?(console.log("AVE - prepare dom"),Je.prepareDomForAVE(),t.length>0?(k.moveAVE(t.attr("id"),Je.oDefaults.sIdCanvas,!1),Xe.disableFor3D()):k.activateAVE(Je.oDefaults.sIdCanvas,Je.retrieveActiveViewPerspective()),Je.handlerFollowupInjection()):console.log("renderinginjector - no matching carline")},Je.handlerFollowupInjection=function(){Je.activateThumbListeners(),Je.moveOptionsOutOfCanvas()},Je.handlerLayerOpened=function(){jQuery(Je.oDefaults.sSelectorRenderingLayer).length>0?S.isAve2CloudAvailable()?(Je.prepareDomForAVE(),Je.eventBus.emit("AVE2CLOUD.CONTAINER.READY")):k.isActiveCarline()?!0===k.isAveAvailable()?Je.handlerInjectAVE():Je.eventBus.on(r.appEvents.AVE_AVAILABLE,Je.handlerInjectAVE):(jQuery(Je.oDefaults.sSelectorOuterRenderingLayer).removeClass(Je.oDefaults.sClassAVE),jQuery("#"+Je.oDefaults.sIdCanvas).remove()):console.log("renderinginjector - no matching dom element")},Je.addEvents=function(){Je.eventBus.on(r.appEvents.RENDERINGLAYER_LOADED,Je.handlerLayerOpened),Je.eventBus.on("jslayer.close",Je.handlerLayerClosed),Je.eventBus.on("jslayer.close",Je.disableStreamReadyEvent)},Ze.initialize=function(t){Je.eventBus=t,Je.addEvents()};class tn{constructor(){1===SETUPS.get("scope.nemo.configuration.force.initial.request")&&(this._alreadyCalled=!1,this._makeInitialCallForScsAttributesIfNecessary=this._makeInitialCallForScsAttributesIfNecessary.bind(this),c.stateRegistry.subscribeToStore(J.a,this._makeInitialCallForScsAttributesIfNecessary))}static get pollTime(){return 3e4}async _makeInitialCallForScsAttributesIfNecessary(t){if(t&&t.configuration&&!t.configuration["stock-car-attrs"]&&!1===this._alreadyCalled){c.stateRegistry.unsubscribeFromStore(J.a,this._makeInitialCallForScsAttributesIfNecessary),this._alreadyCalled=!0;try{await s.polling.wait(h.a.isDataInitialized,tn.pollTime);ut.a.getConfiguration()["stock-car-attrs"]||h.a.loadConfigurationByPrString(ut.a.getPrString(),ut.a.getSubsessionID()).then((function(t){ut.a.adoptConfiguration(t)}))}catch(t){return console.log("scs initial attribute loading timeout"),{}}}}}const en=new tn,nn={},rn={__:nn};nn.oDefaults={classBasketMatchingContainer:".nm-basket-matching",classBasketMatchingCarousel:".nm-basket-matching-car-slider",classBasketMatchingListSlider:".nm-basket-matching-list-slider",classBasketArrowLeft:".nm-basket-matching-prev",classBasketArrowRight:".nm-basket-matching-next",classBasketThumb:".nm-basket-matching-list-small ul li label"},nn.currentMatchingVehicles=null,nn.eventBus=null,nn.scDetailLinkPattern=null,nn.carouselItemCount=null,nn.carouselItemWidth=null,nn.carouselItemHeight=null,nn.carouselWidth=null,nn.carouselIndex=0,nn.carouselLabelStep=!1,nn.carouselItemWidthTransform=null,nn.addEvents=function(){nn.eventBus.on(r.appEvents.STOCKCAR_UPDATE,nn.handleStockcarResults),nn.addClickEvents()},nn.addClickEvents=function(){var t=s.dom.getEventDelegate("body");t.on("click",nn.oDefaults.classBasketArrowLeft,nn.prevArrowClickHandler),t.on("click",nn.oDefaults.classBasketArrowRight,nn.nextArrowClickHandler),t.on("click",nn.oDefaults.classBasketThumb,nn.thumbClickHandler)},nn.removeClickEvents=function(){var t=s.dom.getEventDelegate("body");t.off("click",nn.oDefaults.classBasketArrowLeft,nn.prevArrowClickHandler),t.off("click",nn.oDefaults.classBasketArrowRight,nn.nextArrowClickHandler),t.off("click",nn.oDefaults.classBasketThumb,nn.thumbClickHandler)},nn.handlePageLoaded=function(){nn.currentMatching&&document.querySelector(nn.oDefaults.selectorModuleContainer)&&nn.handleStockcarResults(nn.currentMatching)},nn.handleStockcarResults=function(t){var e;t&&(nn.currentMatchingVehicles=t.vehicleBasic?t.vehicleBasic:[],e=nn.parseResonse(t),nn.renderTemplate(e))},nn.parseResonse=function(t){var e,n,i,r,o={cars:[]},a=t.vehicleBasic.length;for(e=0,n=a;e<n;e++)(i=t.vehicleBasic[e])&&(r={id:i.id,model:i.symbolicCarline.description,engine:i.modelCode.description,image:nn.setImageSrc(i),price:nn.getFormattedPrice(i.typedPrices,"retail"),link:nn.setDetailsURL(i.id),svdVersion:i.svdVersion,percentage:Math.round(i.percentage||i.displayPercentage)},o.cars.push(r));return o.result_link=nn.setResultsURL(t.filterExpression),o.totalCount=a,o},nn.setImageSrc=function(t={}){let e,n,i;return t.pictures&&t.pictures.length&&(n=t.pictures.find(t=>"n5c01"===t.key))?e=n.url:t.fallbackPictures&&t.fallbackPictures.length&&(i=t.fallbackPictures.find(t=>"render_16x96"===t.key))&&(e=i.url),e},nn.setResultsURL=function(t){var e=nn.getResultsLinkUrl()||"";return e=e.replace(/SC_ATTR_FILTERS/i,t)},nn.getResultsLinkUrl=function(){var t=document.querySelector(nn.oDefaults.classBasketMatchingContainer);return t?t.getAttribute("data-result-url"):null},nn.setDetailsURL=function(t){var e=nn.getDetailsLinkUrl()||"";return e=e.replace(/SC_VEHICLE_ID/i,t)},nn.getDetailsLinkUrl=function(){var t=document.querySelector(nn.oDefaults.classBasketMatchingContainer);return t?t.getAttribute("data-detail-url"):null},nn.getFormattedPrice=function(t,e){for(var n=t.length;n--;)if(t[n].type===e)return t[n].formatted;return null},nn.renderTemplate=function(t){var e,n=document.querySelector(nn.oDefaults.classBasketMatchingContainer);n&&(n.innerHTML="",t.cars.length>1&&(e=s.template.render('{{~ it.cars :car :index }}\n<input type="radio" id="nm-basket-matching-list-car{{=index+1}}" name="nm-basket-matching-list-slider" class="nm-basket-matching-list-slider" data-index="{{=index}}" {{? index === 0}}checked="checked" {{?}} />\n{{~}}\n<label class="nm-basket-toggle-widgets-label-fullarea" for="nm-basket-toggle-widgets"></label>\n<label class="nm-basket-toggle-widgets-label" for="nm-basket-toggle-widgets">\n\t<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=window.i18n[\'basket.matching.headline\'] || "VerfÃ¼gbare Neuwagen"}}</span>\n\t<svg class="nm-icon-arrow">\n\t\t<use xlink:href={{=SETUPS.get(\'coreci.url.assets\')+"/icons/svg/arrow.svg#nm-icon-arrow"}}></use>\n\t</svg>\n</label>\n<div class="nm-basket-matching-wrap">\n\t<div class="nm-basket-matching-car-slider">\n\n\t\t<div class="nm-basket-matching-next"></div>\n\t\t<div class="nm-basket-matching-prev"></div>\n\t\t<div class="nm-basket-matching-counter nm-el-lbl nm-el-lbl-01">\n\t\t\t<span class="nm-basket-matching-counter-current">1</span>/<span class="nm-basket-matching-counter-total">{{=it.totalCount}}</span>\n\t\t</div>\n\t\t<ul>\n\t\t\t{{~ it.cars :car :index }}\n\t\t\t\t<li data-index="{{=index}}">\n\t\t\t\t\t<div class="nm-basket-matching-car-container">\n\t\t\t\t\t\t<a class="nm-layerLink" href="{{=car.link}}">\n\t\t\t\t\t\t\t<div {{? car.image !== \'undefined\' && car.image !== \'\' }} style="background-image: url({{=car.image}});" class="nm-basket-matching-car-image" {{??}} class="nm-basket-matching-car-image nm-basket-matching-car-fallback" {{?}} ></div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a class="nm-layerLink" href="{{=car.link}}">\n\t\t\t\t\t\t<div class="nm-basket-matching-car-info">\n\t\t\t\t\t\t\t<span class="nm-basket-matching-car-model nm-el-lbl nm-el-lbl-01 nm-at-lbl-b">{{=car.model}}</span>\n\t\t\t\t\t\t\t<span class="nm-basket-matching-car-description nm-el-lbl nm-el-lbl-01">{{=car.engine}}</span>\n\t\t\t\t\t\t\t<span class="nm-basket-matching-car-price nm-el-lbl nm-el-lbl-01">{{=car.price}}</span>\n\n\t\t\t\t\t\t\t<div class="nm-basket-matching-circle" data-progress="{{=car.percentage}}">\n\t\t\t\t\t\t\t\t<style>\n\t\t\t\t\t\t\t\t{{var circle_degree = parseInt(car.percentage * 1.8);}}\n\t\t\t\t\t\t\t\t{{var circle_degree_fix = parseInt(circle_degree * 2);}}\n\t\t\t\t\t\t\t\t{{var full_percentage = car.percentage<50 ? 0 : car.percentage;}}\n\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full .fill {\n\t\t\t\t\t\t\t\t\t\tclip: rect(0px, 25px, {{=full_percentage}}px, 0px);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full, .nm-basket-matching-circle .circle-{{=index}} .mask .fill {\n\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t    animation: fill-{{=index}}  ease-in-out 3s;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask .fill.fix {\n\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t    animation: fill-fix-{{=index}} ease-in-out 3s;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t.nm-basket-matching-circle .circle-{{=index}} .mask.full, .nm-basket-matching-circle .circle-{{=index}} .mask.full .fill {\n\t\t\t\t\t\t\t\t\t\tborder-radius: 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t@keyframes fill-{{=index}}  {\n\t\t\t\t\t\t\t\t\t\t0% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate({{=circle_degree}}deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t@keyframes fill-fix-{{=index}}  {\n\t\t\t\t\t\t\t\t\t\t0% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t    -webkit-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t    -ms-transform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t\ttransform: rotate({{=circle_degree_fix}}deg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</style>\n\t\t\t\t\t\t\t\t<div class="outer-circle"></div>\n\t\t\t\t\t\t\t\t<div class="circle-{{=index}}">\n\t\t\t\t\t\t\t\t\t<div class="mask full">\n\t\t\t\t\t\t\t\t\t\t<div class="fill"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="mask half">\n\t\t\t\t\t\t\t\t\t\t<div class="fill"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="fill fix"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="inner-circle">{{=car.percentage}}%</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t{{~}}\n\t\t</ul>\n\t</div>\n\t<div class="nm-basket-matching-list-small-wrap">\n\t\t<div class="nm-basket-matching-list-small">\n\t\t\t<ul>\n\t\t\t\t{{~ it.cars :car :index }}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<label for="nm-basket-matching-list-car{{=index+1}}" {{? !!car.image }} style="background-image: url({{=car.image}});" {{??}} class="nm-basket-matching-car-fallback" {{?}} data-index="{{=index}}"></label>\n\t\t\t\t\t</li>\n\t\t\t\t{{~}}\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class="nm-basket-matching-more-btn">\n\t\t<a href="{{=it.result_link}}" class="nm-el-btn nm-el-btn-01 nm-el-btn-ast nm-at-btn-inv"><span>{{=window.i18n[\'basket.matching.button.label\'] || "Weitere Neuwagen"}}</span></a>\n\t</div>\n</div>',t),n.innerHTML=e,nn.initCarousel()))},nn.initCarousel=function(){var t=document.querySelector(nn.oDefaults.classBasketMatchingCarousel+" ul"),e=document.querySelector(nn.oDefaults.classBasketMatchingCarousel+" ul li:last-child");nn.carouselItemCount=parseInt(t.childNodes.length,10),nn.carouselItemWidthTransform=100/nn.carouselItemCount,nn.carouselItemWidth="100",nn.carouselWidth=100*nn.carouselItemCount+"%",t.setAttribute("style","width:"+nn.carouselWidth+";transform: translate(-"+nn.carouselItemWidthTransform+"%);"),t.insertBefore(e,t.firstChild),s.swipe.register(nn.onSwipeFinishHandler,nn.oDefaults.classBasketMatchingCarousel,{swipedistance:50})},nn.getCurrentIndex=function(){var t=s.dom.getElementsArray(nn.oDefaults.classBasketMatchingListSlider),e=0;return t.forEach((function(t,n){t.checked&&(e=n)})),e},nn.setCurrentIndex=function(t){var e=nn.getCurrentIndex();t!==e&&(nn.updateThumbPosition(t),nn.updateCounter(t+1),nn.animation(e,t))},nn.nextArrowClickHandler=function(){var t=nn.getCurrentIndex();t=++t%nn.carouselItemCount,nn.setCurrentIndex(t)},nn.prevArrowClickHandler=function(){var t=nn.getCurrentIndex();(t=--t)<0&&(t=nn.carouselItemCount-1),nn.setCurrentIndex(t)},nn.onSwipeFinishHandler=function(t){if(t.direction&&0!==t.move)switch(t.direction.horizontal){case s.swipe.LEFT:nn.nextArrowClickHandler();break;default:nn.prevArrowClickHandler()}},nn.animation=function(t,e){var n;nn.removeClickEvents(),t<e?(n="next",0===t&&e===nn.carouselItemCount-1&&(n="prev")):(n="prev",t===nn.carouselItemCount-1&&0===e&&(n="next")),"prev"===n?nn.animatePrev(t,e):nn.animateNext(t,e)},nn.animatePrev=function(t,e){var n=document.querySelector(nn.oDefaults.classBasketMatchingCarousel+" ul"),i=document.querySelector(nn.oDefaults.classBasketMatchingCarousel+" ul li:last-child");s.dom.handleTransition(n).then((function(r){r.classList.remove("slide-transition"),t-e>1&&(i=document.querySelector(nn.oDefaults.classBasketMatchingCarousel+" ul li:last-child")),n.insertBefore(i,n.firstChild),n.setAttribute("style","width:"+nn.carouselWidth+";transform: translate(-"+nn.carouselItemWidthTransform+"%);"),nn.addClickEvents()})),t-e>1?(n.insertBefore(i,n.firstChild),n.setAttribute("style","width:"+nn.carouselWidth+";transform: translate(-"+2*nn.carouselItemWidthTransform+"%);"),n.classList.add("slide-transition"),n.setAttribute("style","width:"+nn.carouselWidth+";transform: translate(0)")):(n.classList.add("slide-transition"),n.setAttribute("style","width:"+nn.carouselWidth+";transform: translate(0)"))},nn.animateNext=function(t,e){var n=document.querySelector(nn.oDefaults.classBasketMatchingCarousel+" ul"),i=document.querySelector(nn.oDefaults.classBasketMatchingCarousel+" ul li:first-child");s.dom.handleTransition(n).then((function(n){n.classList.remove("slide-transition"),n.appendChild(i,n.firstChild),e-t>1&&(i=document.querySelector(nn.oDefaults.classBasketMatchingCarousel+" ul li:first-child"),n.appendChild(i,n.firstChild)),n.setAttribute("style","width:"+nn.carouselWidth+";transform: translate(-"+nn.carouselItemWidthTransform+"%);"),nn.addClickEvents()})).catch((function(t){console.log("Promise not completed ",t)})),n.classList.add("slide-transition"),n.setAttribute("style","width:"+nn.carouselWidth+";transform: translate(-"+nn.carouselItemWidthTransform*(e-t<0?2:e-t+1)+"%);")},nn.thumbClickHandler=function(t){var e=parseInt(t.target.getAttribute("data-index"),10);nn.setCurrentIndex(e)},nn.updateThumbPosition=function(t){var e=s.dom.getElementsArray(".nm-basket-matching-list-slider");e.map((function(t){t.checked=!1})),e[t].checked=!0},nn.updateCounter=function(t){document.querySelector(".nm-basket-matching-counter-current").innerHTML=t},rn.initialize=function(t){nn.eventBus=t,nn.addEvents()};const on={},an={__:on};on.oDefaults={classBasketMatchingContainer:".nm-basket-matching"},on.eventBus=null,on.matchingSize=6,on.svdVersion=null,on.stckSetups=null,on.addEvents=function(){on.eventBus.on(r.appEvents.CONFIG_UPDATE,on.triggerStckRequest),on.eventBus.on(r.appEvents.PAGE_READY,on.triggerStckRequest)},on.isMatchingActive=function(){const t=!!SETUPS.get("scope.nemo.scs-matching"),e=SETUPS.get("stockcar.context"),n=!!SETUPS.get("stockcar.scs.base.url"),i=!!SETUPS.get("stockcar.scs.market.path");return t&&!e&&n&&i},on.initialize=function(){!0===on.isMatchingActive()&&on.getSVDVersion().then((function(){on.triggerStckRequest(),on.addEvents()}))},on.getStckUrlSetup=function(t){return on.stckSetups={},on.stckSetups.baseUrl=SETUPS.get("stockcar.scs.base.url"),on.stckSetups.market=SETUPS.get("stockcar.scs.market.path"),on.stckSetups.versionId=on.getStckVersionString(t),on.stckSetups},on.getStckVersionString=t=>{let e=SETUPS.get("stockcar.scs.default.version")?SETUPS.get("stockcar.scs.default.version")+"/":"",n=SETUPS.get("stockcar.scs.version.mapping");return n&&Object.keys(n).length>0&&(e="string"==typeof n[t]?n[t]+"/":e),e},on.triggerStckRequest=function(){if(!0===on.isMatchingActive())return on.startStckRequests().then(t=>(on.svdVersion=t&&t.header&&t.header.dataVersion?t.header.dataVersion:on.svdVersion,on.broadcastStckMatching(t))).catch(t=>console.log(t))},on.startStckRequests=async function(){var t,e=on.getMatchingUrl();if(e){const n=await on.getSVDVersion();if(!(t=on.getRequestParams(n)))return Promise.reject("missing SCS Attributesâ€¦");const i=new URLSearchParams(t),r=e+(e.indexOf("?")<0?"?":"&")+i.toString();return fetch(r,{credentials:"omit"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)})}return Promise.reject("no version and matchUrlâ€¦")},on.getBasketContainer=function(){return document.querySelector(on.oDefaults.classBasketMatchingContainer)},on.getMatchingAttributes=function(){var t,e=on.getBasketContainer();return(t=l.a.getSCSmatchingAttributes())&&t.length>0?t.join(","):e&&e.getAttribute("data-attributes").replace(/[[\s\]']+/g,"")||null},on.getRequestParams=function(t){var e=[],n=on.getMatchingAttributes();return n&&n.length&&t?(e.push("svd="+t),e.push("size="+on.matchingSize),e.push("attributes="+n),e=e.join("&")):null},on.broadcastStckMatching=function(t){return on.eventBus.emit(r.appEvents.STOCKCAR_UPDATE,t),t},on.getVersionUrl=function(){var t,e=on.stckSetups?on.stckSetups:on.getStckUrlSetup("version");return e.baseUrl&&e.versionId&&e.market&&(t=e.baseUrl+e.versionId+"version/"+e.market),t},on.getMatchingUrl=function(){var t,e=on.stckSetups?on.stckSetups:on.getStckUrlSetup("search");return e.baseUrl&&e.versionId&&e.market&&(t=e.baseUrl+e.versionId+"search/match/"+e.market),t},on.getSVDVersion=function(){let t;return function(){return t?on.svdVersion&&(t=Promise.resolve(on.svdVersion)):t=on.svdVersion?Promise.resolve(on.svdVersion):on.fetchSVDVersion(),t}}(),on.fetchSVDVersion=function(){var t=on.getVersionUrl();return on.svdVersion=null,fetch(t,{credentials:"omit"}).then(t=>{if(t.ok)return t.json();throw new Error(t.statusText)}).then((function(t){if(on.svdVersion=t&&t.header&&t.header.dataVersion?t.header.dataVersion:null,!on.svdVersion)throw new TypeError("could not load svd-version");return on.svdVersion})).catch((function(t){console.error("SVD Version error. Using stockcar.static.svd ",t)})).then((function(){return on.svdVersion}))},an.initialize=function(t){on.eventBus=t,on.initialize()};var sn=n(32),ln=n(43);class cn extends ln.a{performSearch(t){t&&(this.setApplicationFlags(t),this.setDpuFlags(t))}setApplicationFlags(t){if(-1!==t.search(/^([a-z0-9]+)=((true)|(false))$/)){const e=/^([a-z0-9]+)=((true)|(false))$/.exec(t);dt.state.triggerModeChange(e[1],e[2])}}setDpuFlags(t){if(-1!==t.search(/dpu_extra=(.*)/)){const e=/^dpu_extra=(.*)/.exec(t);h.a.setDpuExtra(e[1])}}}const un=new cn,dn={},mn={__:dn};function gn(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}dn.oDefaults={ssButtonCompactMode:".nm-summary-list-toggle-btn",sSelectorSummaryTechDataContainer:".nm-summary-list-techdata-container",sSelectorSummaryTechDataMultiContainer:".nm-mediathek-description",sSelectorSummaryContainer:".nm-module-summary-engine",sSelectorSummaryContainerEngineIcons:".nm-summary-tech-icons",sSelectorSummaryListContainer:".nm-summary-list-container.nm-techdata-container",sSelectorSummaryWltpLink:".nm-module-summary-techdata-list .nm-wltp-link",sSelectorTechRow:".nm-techrow, .nm-j-techrow-data-entry",sSelectorCompactMode:"nm-is-compact-mode",hiddenClass:"nm-hidden",maxModelsinfoWaitTime:3e4,sButtonFullTechData:".nm-foldout-techdata-list-button-full-techdata",sButtonEngineCompare:".nm-foldout-techdata-list-button-engine-compare"},dn.handlePageLoaded=function(t){var e=t&&t.domElement?t.domElement:document;dn.bindClicks(e),dn.patchMotorInfo(e)},dn.bindClicks=function(t){dn.summaryTechDataContainer=s.dom.getElementsArray(dn.oDefaults.sSelectorSummaryTechDataContainer,t),dn.buttonCompactMode=s.dom.getElementsArray(dn.oDefaults.ssButtonCompactMode,t),dn.summaryTechDataContainer.length>0&&dn.buttonCompactMode.length>0&&(dn.domDelegate.off("click",dn.oDefaults.ssButtonCompactMode,dn.handleToggleBtnClick),dn.domDelegate.on("click",dn.oDefaults.ssButtonCompactMode,dn.handleToggleBtnClick))},dn.handleLayerLoaded=function(t){var e=t&&t.element?t.element:document;dn.bindClicks(e),dn.patchMotorInfo(e)},dn.handleConfigurationUpdates=function(){mn.wait(l.a.isInitialized,dn.oDefaults.maxModelsinfoWaitTime).then((function(){dn.patchMotorInfo(document)}))},dn.run=function(t,e,n,i,r){var o,a,s;a=0,(s=t())?i(s):o=setInterval((function(){(s=t())?(clearInterval(o),i(s)):a>e&&(clearInterval(o),r(new Error)),a+=n}),n)},mn.wait=function(t,e,n){var i=n||50;return new Promise((function(n,r){dn.run(t,e,i,n,r)}))},dn.initialize=function(){dn.addEvents()},dn.addEvents=function(){dn.eventBus.on(r.appEvents.PAGE_LOADED,dn.handlePageLoaded),dn.eventBus.on(r.appEvents.LAYER_LOADED,dn.handleLayerLoaded),dn.eventBus.on(r.appEvents.CONFIG_UPDATE,dn.handleConfigurationUpdates),dn.eventBus.on(r.appEvents.MODELSINFO_LOAD_COMPLETE,dn.handlePageLoaded)},dn.handleToggleBtnClick=function(t){t.preventDefault();const e=t.target;[...s.dom.closest(e,dn.oDefaults.sSelectorSummaryTechDataMultiContainer).querySelectorAll(dn.oDefaults.sSelectorSummaryTechDataContainer)].forEach(t=>{s.dom.isElement(t)&&(t.classList.contains(dn.oDefaults.sSelectorCompactMode)?t.classList.remove(dn.oDefaults.sSelectorCompactMode):t.classList.add(dn.oDefaults.sSelectorCompactMode))})},dn.patchMotorInfo=function(t){var e,n,i,r,o,a,c,u=t,d=s.dom.getElement('[data-template="summary"]',u),m=l.a.getEngine(),g=dn.getMotorTechdata(m);if(s.dom.isElement(d)&&g){for(r in g)for(e=g[r],i=s.dom.getElementsArray(".nm-j-summary-text-"+r+", .nm-j-configurator-techdata-"+r,d),n=0;n<i.length;n++)s.dom.isElement(i[n])&&dn.patchDOMfragment(i[n],e);dn.updateVisibilityWltpLinks(g),dn.patchModelFootnotes(m,t)}dn.hideInvisibleCategories(),o=s.dom.getElement(dn.oDefaults.sButtonFullTechData,u),a=s.dom.getElement(dn.oDefaults.sButtonEngineCompare,u),c=ut.a.getModelsInfo(),s.dom.isElement(o)&&s.dom.isElement(a)&&c&&Object.keys(c).length>1&&(o.classList.add(dn.oDefaults.hiddenClass),a.classList.remove(dn.oDefaults.hiddenClass))},dn.patchModelFootnotes=(t,e=document)=>{const n=ut.a.getModelsInfoFootnotes(t),i=ut.a.getModelsInfoSectionFootnotes(t);s.dom.getElementsArray(".nm-j-summary-footnote-text",e).forEach(t=>{const e=t.getAttribute("data-key");""!==e&&(n&&n[e]?t.innerHTML=n[e]:i&&i[e]&&(t.innerHTML=i[e]))})},dn.updateVisibilityWltpLinks=function(t){const e=s.dom.getElementsArray(dn.oDefaults.sSelectorSummaryWltpLink);if(e.length>0){const n=Object.keys(t).filter(t=>-1!=t.indexOf("wltp-"));if(n.length>0){n.map(e=>t[e]).some(t=>""!=t&&null!=t)?e.forEach(t=>t.classList.remove("nm-hidden")):e.forEach(t=>t.classList.add("nm-hidden"))}}},dn.getMotorTechdata=function(t){const e=l.a.getModelsInfo(t),n=l.a.getTechdata();return Object.assign({},e,n)},dn.patchDOMfragment=function(t,e){var n=s.dom.closest(t,dn.oDefaults.sSelectorTechRow);s.dom.isElement(t)&&(e?(n&&n.classList&&n.classList.remove(dn.oDefaults.hiddenClass),t.innerHTML=e):n&&n.classList&&n.classList.add(dn.oDefaults.hiddenClass))},dn.hideInvisibleCategories=function(){var t,e,n,i,r,o=s.dom.getElementsArray(dn.oDefaults.sSelectorSummaryListContainer+", "+dn.oDefaults.sSelectorSummaryContainer);if(o.length>0)for(e=0;e<o.length;e++){for(i=0,t=s.dom.getElementsArray(dn.oDefaults.sSelectorTechRow,o[e]),n=0;n<t.length;n++)t[n].classList.contains(dn.oDefaults.hiddenClass)&&i++;if(t.length!==i)o[e].classList.remove(dn.oDefaults.hiddenClass);else{if(o[e].classList.contains("nm-module-summary-engine")&&(r=s.dom.getElement(dn.oDefaults.sSelectorSummaryContainerEngineIcons,o[e]),s.dom.isElement(r)))continue;o[e].classList.add(dn.oDefaults.hiddenClass)}}},mn.initialize=function(t){dn.eventBus=t,dn.domDelegate=s.dom.getEventDelegate("body"),dn.initialize()},Object.setPrototypeOf(gn.prototype,HTMLElement.prototype),Object.setPrototypeOf(gn,HTMLElement);const fn={categorizedWrapper:".nm-module-tiles-categorized-tilelist-container",uncategorizedWrapper:".nm-module-tiles-uncategorized-tilelist-container",categorizedHeadlineWrapper:"div.nm-module-tiles-categorized-group-headline-wrapper",uncategorizedHeadline:".nm-module-tiles-uncategorized-headline",categorizedTile:".nm-module-tiles-categorized-tile",categorizedGroupInfo:"div.nm-module-tiles-categorized-groupinfo",tile:".nm-module-tiles-uncategorized-tile, .nm-module-tiles-categorized-tile",categorizedTileInfo:".nm-module-tiles-categorized-tileinfo",uncategorizedTileInfo:".nm-module-tiles-uncategorized-tileinfo",configuratorItems:".nm-j-configurator-item",configuratorItemsList:".nm-module-tiles-categorized-tilelist, .nm-module-tiles-uncategorized-tilelist",categorizedConfiguratorItemsList:".nm-module-tiles-categorized-tilelist",uncategorizedConfiguratorItemsList:".nm-module-tiles-uncategorized-tilelist",categorizedTickMark:"svg.nm-module-tiles-categorized-icon-selected",uncategorizedTickMark:"svg.nm-module-tiles-uncategorized-icon-selected",fadeOutClass:"nm-tile-fadeout",groupMinPrice:".js-configurator-group .nm-j-configurator-text-price"},pn=["00000","00001","00010","00011","00100","00101","00110","00111","01000","01001","01010","01011","01100","01101","01110","01111","10000"];class hn extends gn{get allConfiguratorItems(){return[...this.querySelectorAll(fn.configuratorItems)]}get allTiles(){return[...this.querySelectorAll(fn.tile)]}get isSortingEnabled(){return!!this.sortOrder&&!!this.sortType&&"default"!==this.sortType}constructor(){super()}connectedCallback(){this.initElements(),this.addEvents()}disconnectedCallback(){this.removeEvents()}initElements(){this.groupMinPrice=this.querySelector(fn.groupMinPrice),this.sortOrder=this.getAttribute("data-sort-order"),this.sortType=this.getAttribute("data-sort-type"),l.a.isConfigurationStarted()&&this.handlePriceUpdate(),this.updateHeight(),this.allTiles&&this.allTiles.length>0&&[this.allTiles[0].querySelector("img"),this.allTiles[this.allTiles.length-1].querySelector("img")].forEach(t=>t.addEventListener("load",()=>this.updateHeight()))}addEvents(){this.allTiles.forEach(t=>{t.addEventListener("mouseover",t=>this.handleTileMouseOver(t)),t.addEventListener("mouseout",()=>this.handleTileMouseOut())});const t=r.signal.getEmitter();t.addListener(r.appEvents.CARINFO_LOAD_COMPLETE,()=>this.handlePriceUpdate()),t.addListener(r.appEvents.CONFIG_UPDATE,()=>{this.updateHeightAndPrice(),this.applyStylesToTiles()}),t.addListener(r.appEvents.LAYER_CLOSED,()=>{this.updateHeight(),this.applyStylesToTiles()}),t.addListener(r.appEvents.PAGE_READY,()=>{this.updateHeight()}),window.addEventListener("resize",()=>this.updateHeight()),window.addEventListener("load",()=>this.updateHeight())}removeEvents(){this.allTiles.forEach(t=>{t.removeEventListener("mouseover",t=>this.handleTileMouseOver(t)),t.removeEventListener("mouseout",()=>this.handleTileMouseOut())});const t=r.signal.getEmitter();t.removeListener(r.appEvents.CARINFO_LOAD_COMPLETE,()=>this.updateHeightAndPrice()),t.removeListener(r.appEvents.CONFIG_UPDATE,()=>this.updateHeightAndPrice()),t.removeListener(r.appEvents.LAYER_CLOSED,()=>this.updateHeight()),t.removeListener(r.appEvents.PAGE_READY,()=>this.updateHeight()),window.removeEventListener("resize",()=>this.updateHeight()),window.removeEventListener("load",()=>this.updateHeight()),this.allTiles&&this.allTiles.length>0&&[this.allTiles[0].querySelector("img"),this.allTiles[this.allTiles.length-1].querySelector("img")].forEach(t=>t.removeEventListener("load",()=>this.updateHeight()))}handleTileMouseOver(t){const e=t.currentTarget;this.updateHeight(),this.allTiles.forEach(t=>{t!==e?(this.fadeOutTile(t),t.nextElementSibling.style.display="none"):t.nextElementSibling.style.display="flex"})}checkIfUncategorized(t){return t.includes("uncategorized")}showOrHideTile(t){const e=this.checkIfUncategorized(t.className)?fn.uncategorizedTickMark:fn.categorizedTickMark,n=getComputedStyle(t.querySelector(e)).display;t.nextElementSibling.style.display="none"!==n&&n?"flex":"none"}applyStylesToTiles(){this.allTiles.forEach(t=>{this.fadeInTile(t),this.showOrHideTile(t)})}handleTileMouseOut(){this.applyStylesToTiles()}fadeInTile(t){t.classList.remove(fn.fadeOutClass)}fadeOutTile(t){t.classList.add(fn.fadeOutClass)}updateHeightAndPrice(){this.handlePriceUpdate(),this.updateHeight()}handlePriceUpdate(){if(this.isSortingEnabled){const t=this.getSortedItems();this.replaceItems(t)}this.groupMinPrice&&this.updateGroupMinPrice()}updateTileHeights({configuratorItemsList:t,tileInfo:e}){const n=this.querySelectorAll(`${t} > li ${e}`),i=this.querySelector(":scope > div").offsetHeight;for(const t of n)i>0&&(t.style.top=i+"px")}updateHeight(){const t=fn,e=this.checkIfUncategorized(this.firstElementChild.className),n={isUncategorized:e,wrapper:e?t.uncategorizedWrapper:t.categorizedWrapper,configuratorItemsList:e?t.uncategorizedConfiguratorItemsList:t.categorizedConfiguratorItemsList,groupInfo:e?null:t.categorizedGroupInfo,headline:e?t.uncategorizedHeadline:`${t.categorizedWrapper}>${t.categorizedHeadlineWrapper}`,tileInfo:e?t.uncategorizedTileInfo:t.categorizedTileInfo};this.updateTileHeights(n)}updateGroupMinPrice(){const t=this.getVisibleConfiguratorItemIds();if(t.length>0){const e=l.a.getMinPriceForItemIds(t);this.groupMinPrice.innerHTML=e?`${window.i18n.from} ${e}`:`${window.i18n.from} ${window.i18n["standard-group-price"]}`}}getSortedItems(){const t=this.allConfiguratorItems;if("price"===this.sortType){const e=this.getSortedItemsByPrice(t);return this.getItemsWithStandardToFront(e)}return t}replaceItems(t){const e=this.querySelector(fn.configuratorItemsList),n=document.createDocumentFragment();t.forEach(t=>{n.appendChild(t)}),e.innerHTML="",e.appendChild(n)}getSortedItemsByPrice(t){return t.sort((t,e)=>{const n=l.a.getItem(t.getAttribute("data-configurator-id")),i=l.a.getItem(e.getAttribute("data-configurator-id"));if(!n||!i)return 0;const r=hn.getPriceValue(n),o=hn.getPriceValue(i);return"ascending"===this.sortOrder?r<o?-1:1:"descending"===this.sortOrder?r>o?-1:1:void 0})}getItemsWithStandardToFront(t){return t.sort((t,e)=>{const n=l.a.getItem(t.getAttribute("data-configurator-id")),i=l.a.getItem(e.getAttribute("data-configurator-id"));return n&&i?hn.isStatusStandardFlagSet(n)?-1:hn.isStatusStandardFlagSet(i)?1:0:0})}getVisibleConfiguratorItemIds(){return this.allConfiguratorItems.map(t=>t.getAttribute("data-configurator-id")).filter(t=>{const e=l.a.getItem(t);return e&&-1===pn.indexOf(e.status)})}static isStatusStandardFlagSet(t){return t.status.match(/1$/)}static getPriceValue(t){return t.priceValue?t.priceValue:0}}function vn(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}void 0===window.customElements.get("audi-configurator-tile-list")&&window.customElements.define("audi-configurator-tile-list",hn),Object.setPrototypeOf(vn.prototype,HTMLElement.prototype),Object.setPrototypeOf(vn,HTMLElement);class yn extends vn{static get selectors(){return{hideButton:".nm-tooltip-hide",popup:".nm-tooltip-popup"}}static get classes(){return{visible:"nm-j-tooltip-visible",tipLeft:"nm-tip-left",tipRight:"nm-tip-right"}}constructor(){super()}connectedCallback(){this.popup=this.querySelector(yn.selectors.popup),this.hideButton=this.querySelector(yn.selectors.hideButton),this.addEvents()}disconnectedCallback(){this.removeEvents()}addEvents(){this.addEventListener("click",this.handleTooltipClick.bind(this)),this.addEventListener("mouseover",this.setPosition.bind(this)),this.hideButton&&this.hideButton.addEventListener("click",this.closeTooltip.bind(this))}removeEvents(){this.removeEventListener("click",this.handleTooltipClick.bind(this)),this.removeEventListener("mouseover",this.setPosition.bind(this)),this.hideButton&&this.hideButton.removeEventListener("click",this.closeTooltip.bind(this))}handleTooltipClick(t){this.isCloseButton(t.target)||this.openTooltip()}isCloseButton(t){return t===this.hideButton}openTooltip(){this.popup.classList.add(yn.classes.visible)}closeTooltip(){this.popup.classList.remove(yn.classes.visible)}setPosition(){this.removePositionClass();const t=this.popup.getBoundingClientRect();t.left<0?this.classList.add(yn.classes.tipLeft):t.left+t.width>window.innerWidth&&this.classList.add(yn.classes.tipRight)}removePositionClass(){this.classList.remove(yn.classes.tipRight,yn.classes.tipLeft)}}window.customElements.get("audi-configurator-tooltip")||window.customElements.define("audi-configurator-tooltip",yn);const Sn={closeAllTooltips:function(){[...document.querySelectorAll("."+yn.classes.visible)].forEach(t=>{t.classList.remove(yn.classes.visible)})},handleTooltipOutsideClick:function(t){s.dom.isElementOutsideOfElementWithSelector(t.target,"audi-configurator-tooltip")&&this.closeAllTooltips()},initialize:function(){s.dom.getEventDelegate("body").on("click",this.handleTooltipOutsideClick.bind(this))}};var Cn=n(42);const En={},bn={__:En};En.oDefaults={sColors:"nm-j-visualizer-tiles-color",sRims:"nm-j-visualizer-tiles-rim",sCombiItem:".nm-j-visualizer-slide",sSelectorCombiContainer:".nm-j-visualizer-slides",sTilesSelector:".nm-j-visualizer-item",sTilesblockSelector:".nm-j-visualizer-tiles-block",sMenuSelectedClass:"nm-selected",sButtonSelector:".nm-j-preconfig-submit",sSlideActiveClass:"active",sSlideHiddenClass:"hidden"},En.timeoutID=null,En.timeoutDelay=1e3,En.handleConfigurationStartClick=function(t){let e,n,i,o=s.dom.getElement(En.oDefaults.sCombiItem+".active");En.cancelEvent(t),n=s.dom.getDataAttribute(o,"audicode"),i=s.dom.getDataAttribute(o,"prstring"),(n||i)&&(e={},n?e.audicode=n:e.prstring=i,h.a.loadConfigurationFromTeaser(e,"audicode.visualizer").then((function(){r.router.open("page",l.a.getCurrentCarlineUrl())})))},En.handleTileClick=function(t){let e,n,i,r,o;En.cancelEvent(t),e=s.dom.closest(t.target,En.oDefaults.sTilesSelector),n=e.getAttribute("data-color-index")||e.getAttribute("data-rim-index"),En.updateTileSelection(e),o=En.getSelectedColorAndRimIndex(e),i=s.dom.getElement(".nm-visualizer-slide.active"),r=s.dom.getElement('.nm-visualizer-slide[data-matrix-index="'+o+'"]'),En.hideSlide(i),En.resetActiveVideo(i),En.showSlide(r),En.updateActiveTileBar(e,73,55*(n-1))},En.showSlide=function(t){t.classList.remove("hidden"),t.classList.add("active")},En.hideSlide=function(t){t.classList.remove("active"),t.classList.add("hidden")},En.resetActiveVideo=function(t){let e,n=s.dom.getElement("video",t);s.dom.isElement(n)&&n.currentTime>0&&(n.load(),e=s.dom.getElement(".nm-mediaplayer",t),e.classList.remove("nm-video-playing"))},En.updateTileSelection=function(t){let e=s.dom.closest(t,En.oDefaults.sTilesblockSelector);s.dom.getElement("."+En.oDefaults.sMenuSelectedClass,e).classList.remove(En.oDefaults.sMenuSelectedClass),t.classList.add(En.oDefaults.sMenuSelectedClass)},En.getSelectedColorAndRimIndex=function(){let t,e;return t=s.dom.getElement(".nm-j-visualizer-tiles-color ."+En.oDefaults.sMenuSelectedClass).getAttribute("data-color-index"),e=s.dom.getElement(".nm-j-visualizer-tiles-rim ."+En.oDefaults.sMenuSelectedClass).getAttribute("data-rim-index"),t+"-"+e},En.handleTileHover=function(t){let e=s.dom.closest(t.target,En.oDefaults.sTilesSelector);En.updateActiveTileBar(e,e.clientWidth,e.offsetLeft),clearTimeout(En.timeoutID)},En.handleTileblockLeave=function(){clearTimeout(En.timeoutID),En.timeoutID=setTimeout((function(){s.dom.getElementsArray(En.oDefaults.sTilesSelector+"."+En.oDefaults.sMenuSelectedClass).forEach((function(t){En.updateActiveTileBar(t,t.clientWidth,t.offsetLeft)}))}),En.timeoutDelay)},En.updateActiveTileBar=function(t,e,n){let i=s.dom.closest(t,En.oDefaults.sTilesblockSelector),r=s.dom.getElement(".nm-visualizer-tile-active-bar",i);r.style.left=n+"px",r.style.width=e+"px"},En.cancelEvent=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault()},En.addEvents=function(){En.domEventDelegate.on("click",En.oDefaults.sTilesSelector,En.handleTileClick),En.domEventDelegate.on("click",En.oDefaults.sButtonSelector,En.handleConfigurationStartClick),En.domEventDelegate.on("mouseover",En.oDefaults.sTilesSelector,En.handleTileHover),En.domEventDelegate.on("mouseout",En.oDefaults.sTilesblockSelector,En.handleTileblockLeave)},En.removeEvents=function(){En.domEventDelegate.off("click",En.oDefaults.sTilesSelector,En.handleTileClick),En.domEventDelegate.off("click",En.oDefaults.sButtonSelector,En.handleConfigurationStartClick)},bn.initialize=function(){En.domEventDelegate=s.dom.getEventDelegate("body"),En.init||En.addEvents(),En.init=!0};const wn={},Dn={__:wn};let _n,An,Ln,Tn=[];wn.oDefaults={sSelectorVTPlink:".nm-j-vtp-link"},wn.handleJSONresponse=function(t){var e,n,i,r=_n;e="",t&&t.num&&t.num>0?(r=An,e=" ("+t.num+")"):r=!1,Tn=Tn||[],Tn.forEach((function(t){Ln=t,r||(r=Ln.getAttribute("data-vtp-original")),Ln.setAttribute("href",r),n=Ln.textContent.split(" (")[0],i=n+e,wn.replaceVtpLinkText(Ln,i)}))},wn.replaceVtpLinkText=function(t,e){let n=t,i=!1;[...n.children].filter(t=>t.classList.contains("audi-link-s__text")||t.classList.contains("audi-link-m__text")).every(t=>(t.textContent=e,i=!0,!1)),i||(n.textContent=e)},wn.sendJSONPrequest=function(t){var e=t.replace(/&callback=\?$/,"");wn.getJSONP(e).then((function(t){wn.handleJSONresponse(t)}),(function(t){console.log("VTP JSON request failed! ",t.message),wn.handleJSONresponse(null)}))},wn.getJSONP=function(t){return new Promise((function(e,n){var i,r,o,a=wn.oDefaults.xhrTimeout,s=window.setTimeout((function(){window.jsonp_callback=function(){},n("JSONP Error")}),a);window.jsonp_callback=function(t){window.clearTimeout(s),e(t)},t.indexOf("jsonp_callback")<0&&(r=t.indexOf("?")<0?"?":"&",i=t+r+"callback=jsonp_callback"),(o=document.createElement("script")).type="text/javascript",o.async=!0,o.src=i||t,document.getElementsByTagName("head")[0].appendChild(o)}))},wn.checkForIPHDealerLink=function(t){var e=t;return dt.iph.inIPHMode()&&(e=dt.iph.addPartnerId(e),e=dt.iph.updateNWB(e)),e},wn.handleUpdates=function(){var t=l.a.getNwbLink(),e="";Tn=s.dom.getElementsArray(wn.oDefaults.sSelectorVTPlink),Tn.length&&(Tn.forEach((function(t){Ln=t,Ln.getAttribute("data-vtp-original")||(e=Ln.getAttribute("href"),Ln.setAttribute("data-vtp-original",e))})),t&&(_n=wn.checkForIPHDealerLink(t.plainLink),An=wn.checkForIPHDealerLink(t.entryLink),wn.sendJSONPrequest(wn.checkForIPHDealerLink(t.queryLink))))},wn.addEvents=function(){wn.eventBus.on(r.appEvents.CONFIG_UPDATE,wn.handleUpdates),wn.eventBus.on(r.appEvents.LAYER_LOADED,wn.handleUpdates),wn.eventBus.on(r.appEvents.PAGE_LOADED,wn.handleUpdates)},wn.initialize=function(){wn.instance||(wn.addEvents(),wn.instance=!0)},Dn.initialize=function(t){wn.eventBus=t,wn.initialize()};const kn={},In={__:kn};kn.device=s.device,kn.oDefaults={classIsWallet:"nm-agent-is-wallet"},kn.eventBus=null,kn.addEvents=function(){kn.eventBus.on(r.appEvents.PAGE_LOADED,kn.handlePageLoaded)},kn.handlePageLoaded=function(){kn.isWalletEnabled()&&document.querySelector("body").classList.add(kn.oDefaults.classIsWallet)},kn.isWalletEnabled=function(){return kn.device.isiPad()||kn.device.isiPhone()},In.initialize=function(t){kn.eventBus=t,kn.addEvents(),kn.handlePageLoaded()};class xn extends r.ModalLayerContentBase{constructor(t={}){super(),this._closeLayer=this._closeLayer.bind(this),this.data=Object.assign({},t.dataset)}static get type(){return"EngineDisclaimerLayerElement"}static async getContent(t){return new xn(t)}connectedCallback(){this._render(),this.addEvents()}addEvents(){this.querySelector(".j-close").addEventListener("click",this._closeLayer)}static get buttonText(){return window.i18n["engine_disclaimer_layer.button.text"]}_closeLayer(t){t.preventDefault(),t.stopPropagation(),this._triggerClose()}_render(){const{headline:t,message:e}=this.data,n=xn.buttonText;this.innerHTML=`<div class="modal-layer__inner nm-modal-layer__inner" role="alert">\n\t\t\t\t\t\t\t<div class="nm-modal-layer__header">\n\t\t\t\t\t\t\t\t<div class="nm-modal-layer__headline-wrap">\n\t\t\t\t\t\t\t\t\t<h2 class="nm-modal-layer__headline audi-headline-order-2">${t}</h2>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="nm-modal-layer__inner-content">\n\t\t\t\t\t\t\t\t<p class="nm-modal-layer__message audi-copy-m">${e}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="nm-modal-layer__footer">\n\t\t\t\t\t\t\t\t<button class="audi-button nm-modal-layer__confirm-button j-close">\n\t\t\t\t\t\t\t\t\t<span class="audi-button__text">${n}</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`}}r.modalLayer.registerLayerType(xn),void 0===window.customElements.get("audi-engine-disclaimer-layer-element")&&window.customElements.define("audi-engine-disclaimer-layer-element",xn);const Pn={},On={__:Pn};Pn.oDefaults={sSelectorModule:".nm-md-yourpayment",sSelectorRateSwitchCart:"#nm-price-rate-switch",sSelectorRateSwitchYP:"#nm-price-rate-switch-yp",sSelectorTable:".nm-yourpayment-costs-list",sSelectorSnippetText:".nm-j-configurator-text-",sShowErrorClass:"nm-j-yourpayment-show-error"},Pn.eventBus=null,Pn.addEvents=function(){Pn.eventBus.on(r.appEvents.PAGE_LOADED,Pn.handleConfigUpdate),Pn.eventBus.on(r.appEvents.CONFIG_UPDATE,Pn.handleConfigUpdate)},Pn.handleConfigUpdate=function(){var t;if(document.querySelector(Pn.oDefaults.sSelectorModule)&&l.a.isConfigurable()){if(!(t=l.a.getConfiguration()))return;""===t.rate?document.querySelector(Pn.oDefaults.sSelectorModule).classList.add(Pn.oDefaults.sShowErrorClass):(document.querySelector(Pn.oDefaults.sSelectorModule).classList.remove(Pn.oDefaults.sShowErrorClass),Pn.updatePriceMode(t))}},Pn.updatePriceMode=function(t){var e,n=document.querySelector(Pn.oDefaults.sSelectorRateSwitchYP),i=document.querySelector(Pn.oDefaults.sSelectorRateSwitchCart);n&&i&&(i.getAttribute("checked")!==n.getAttribute("checked")&&n.setAttribute("checked",i.getAttribute("checked")),e=t.financeParameterList?t.financeParameterList:null,Pn.popuplatePricesByRate(e))},Pn.popuplatePricesByRate=function(t){var e,n,i,r=0,o=document.querySelector(Pn.oDefaults.sSelectorTable);if(o&&t)for(e=t.length;r<e;)n=t[r].id,i=t[r].textAndUnit,n&&i&&s.dom.getElement(Pn.oDefaults.sSelectorSnippetText+n,o).text(i),r++},On.initialize=function(t){Pn.eventBus=t,Pn.addEvents(),Pn.handleConfigUpdate()};const jn={},Rn={__:jn};jn.handleClickDownloadLink=function(t){t.preventDefault();const e=SETUPS.get("nemo.url.dpu")+"media-zip",n=l.a.getCarline()+".zip",i=jn.getFetchOptions(n);return fetch(e,i).then(t=>{if(t.ok)return t.blob()}).then(t=>{const e=jn.createFakeLink(n);e.href=window.URL.createObjectURL(t),e.click()}).catch(t=>{console.error(t)}),!0},jn.getFetchOptions=t=>{const e=new URLSearchParams;return e.append("carline",l.a.getCarlineName()),e.append("images",jn.getImageListFromConfigurationObject().join("\n")),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Disposition":"attachment; filename="+t},body:e}},jn.createFakeLink=t=>{const e=document.createElement("a");return e.download=t,e.style.display="none",e.setAttribute("data-tracking-exclude",!0),document.body.appendChild(e),e},jn.addEvents=function(){jn.domEventDelegate.on("click",".nm-j-zip-download-delegate-click",jn.handleClickDownloadLink)},jn.getImageListFromConfigurationObject=function(){const t=l.a.getConfigurationAssets()||[],e=l.a.getRenderUrl(),n=[];for(const i of Object.keys(t)){const r="https:"+e+(t[i].fullscreen||t[i]["fullscreen.new"]||t[i]["stage.new"]);n.push(r)}return n},Rn.initialize=function(t){jn.eventBus=t,jn.domEventDelegate=s.dom.getEventDelegate("body"),jn.addEvents()},window.nemo=window.nemo||{},window.nemo.configurator=window.nemo.configurator||{},window.nemo.configurator.api=l.a,SETUPS&&(window.nemo.setups=SETUPS.__.stored);const Bn=[p,S,k,B,K,at.a,lt,ct.a,h.a,ut.a,pt,ht.a,At,Tt,Yt,Kt,Zt,ee,ie,se,oe,ce,Se,de,Fe,we,_e,Le,ke,xe,Oe,je,Be,Qe,Ve,We,$e,Ze,Xe,an,rn,sn.a,mn,Sn,Cn.a,bn,Dn,In,On,Rn],Mn=r.signal.getEmitter();Bn.forEach(t=>{try{t.initialize(Mn)}catch(t){console.error(t)}})}])}));
//# sourceMappingURL=bundle.configurator.js.map